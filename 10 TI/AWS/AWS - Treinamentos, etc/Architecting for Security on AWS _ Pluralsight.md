Architecting for Security on AWS | Pluralsight

### [Course Overview](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live)

[(Music playing) Hi everyone, my name Ben](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=0)  [Piper, and welcome to my course,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=7.233545454545456)  [Architecting for Security on AWS. I'm an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=9.111)  [AWS certified Solutions Architect and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=13.058300000000003)  [author. Security is about protecting your](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=16.043333333333333)  [valuable data and the systems that store](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=18.384545454545457)  [and retrieve that data. As an AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=20.787499999999998)  [architect, you need to understand how to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=23.373999999999988)  [build security into every AWS deployment](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=26.237750000000002)  [at every level. In this course, you're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=29.009250000000005)  [going to learn how to secure your data and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=31.464428571428574)  [your AWS services and resources at](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=33.87064285714286)  [multiple levels using a defense in-depth](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=36.77591666666666)  [approach. Some of the major topics that we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=39.941416666666655)  [will cover include identity and access](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=43.13716666666666)  [management, capturing and analyzing](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=45.62114285714286)  [security logs, network and instance](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=47.93371428571429)  [security, data encryption, and backup,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=50.828875000000004)  [replication, and recovery. By the end of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=53.727)  [this course, you'll know how to secure](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=56.632999999999996)  [your data stored in AWS, as well as your](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=58.21499999999999)  [AWS services and resources. Before](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=61.956)  [beginning the course, you should have six](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=64.33527272727272)  [months of experience with AWS in a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=66.69618181818186)  [technical capacity. I hope you'll join me](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=69.08584615384618)  [on this journey to learn AWS security with](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=71.49707692307699)  [the Architecting for Security on AWS course, only on Pluralsight.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=57666e95-fd68-4643-9262-7c1dfcc597c2&clip=0&mode=live&start=74.16218181818184)

## [Protecting AWS Credentials](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live)

### [Confidentiality, Integrity, and Availability](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live)

[Welcome to Pluralsight! I'm Ben Piper, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=0)  [you're watching Architecting for Security](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=4.060777777777778)  [on AWS. In this course, you're going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=6.463818181818181)  [learn how to properly secure your AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=9.778)  [infrastructure. Whether that's a new](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=13.513375000000005)  [infrastructure that you're planning, or an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=15.367)  [existing one, you are going to learn how](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=17.325615384615386)  [to secure it. But before we jump in, let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=19.880076923076924)  [back up and talk about the term security.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=22.748142857142852)  [Security is one of those terms that gets](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=25.295)  [used a lot, but is seldom defined in any](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=27.68642857142858)  [meaningful way. For some people, security](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=30.722749999999998)  [is about a feeling, as in, I feel secure](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=33.20825)  [that I'm not going to get hacked today.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=36.19400000000001)  [They may think, I've never been hacked](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=38.518)  [before, so I feel pretty good that I'm not](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=40.19153846153846)  [going to suffer a breach today. On the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=42.73366666666666)  [other hand, if someone has suffered an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=45.41592307692308)  [attack, then may think, I was hacked](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=47.05015384615386)  [yesterday and I'm terrified that it's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=49.06657142857143)  [going to happen again today. So, part of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=51.23171428571428)  [security is just being able to give people](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=54.118076923076934)  [assurance that their data and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=57.00361538461542)  [infrastructure are relatively safe. It's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=59.00171428571429)  [to give them that warm, fuzzy feeling that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=60.98408333333333)  [there aren't any gaping holes through](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=63.22474999999997)  [which an attacker can crawl in. Other](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=65.14300000000001)  [people think of security as having things](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=67.63769230769232)  [configured in a restrictive way. For](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=70.0085384615385)  [example, having firewalls restricting](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=72.24766666666666)  [network access and making sure that people](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=74.43033333333331)  [have access only to the resources that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=77.51225000000001)  [they need. Others still think of security](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=79.61050000000003)  [as an ongoing process of patching](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=82.42272727272726)  [operating systems and applications to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=85.078)  [address new vulnerabilities, which might](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=87.09237499999998)  [allow an attacker to gain unauthorized](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=88.95766666666667)  [access to a system. And yet, other folks](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=90.92766666666667)  [think of security as monitoring for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=93.86000000000001)  [unusual or unauthorized activities, such](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=96.28850000000006)  [as someone downloading large volumes of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=98.84039999999999)  [data. Now, if you look at all of these](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=102.32519999999997)  [different views of security, you'll notice](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=104.97533333333337)  [that they have one common theme,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=107.0296)  [protecting data. The goal of information](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=110.0884)  [security is to protect data, which means](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=112.67333333333335)  [also protecting the resources that store](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=115.4126666666667)  [the data and make it available. This is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=117.60536363636365)  [the working definition of security we're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=120.33842857142858)  [going to use in this course. But what](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=122.05271428571433)  [exactly does it mean to protect data?](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=124.48433333333332)  [Well, protecting data specifically means](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=126.995)  [protecting or ensuring three aspects of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=129.98111111111115)  [data; confidentiality, integrity, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=133.9142857142857)  [availability. This is called the CIA](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=137.00285714285712)  [triad, and no, I did not make that up, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=139.44607142857149)  [yes, it is a little bit hokey, CIA being a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=142.70492857142858)  [reference to the Central Intelligence](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=145.21421428571432)  [Agency, which is an American spy agency,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=146.70433333333332)  [but you may find that it's a great](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=149.285)  [pneumonic to help you remember these three](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=151.74899999999994)  [aspects. Let's start with the first](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=154.42433333333332)  [aspect, confidentiality. This means that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=157.63271428571426)  [only the people who are authorized to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=159.84359999999995)  [access data can access it. Everyone else](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=162.53766666666652)  [who is not authorized cannot access that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=165.33999999999997)  [data. Access control lists, or ACLs, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=168.41299999999993)  [encryption are two common methods of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=171.34418181818174)  [enforcing confidentiality. The idea here](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=173.79072727272725)  [is to make it difficult, or impossible,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=175.63936363636356)  [for unauthorized people to access data.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=178.64600000000002)  [The second leg of the triad is integrity.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=182.12)  [Data integrity means the data has not been](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=185.57133333333343)  [modified in any undesirable way, or by any](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=188.9598571428571)  [unauthorized party. Think of a database](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=192.28557142857127)  [that contains bank account numbers for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=194.39900000000003)  [direct deposit. You wouldn't want some](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=196.3220000000001)  [random hacker to be able to hack into the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=198.2497692307692)  [database and change the bank account](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=201.145)  [number so that he ends up getting money](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=202.2854615384616)  [intended for someone else. Likewise, you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=203.9661)  [wouldn't want a hacker to be able to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=206.0667)  [change security logs to cover his tracks.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=209.01033333333336)  [Data integrity means not just protecting](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=211.661)  [data from unauthorized modification, but](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=214.22433333333328)  [also knowing whether it has been modified.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=216.49488888888888)  [The last leg of the triad, availability,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=219.956)  [means that those who are supposed to have](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=222.2076666666666)  [access to the data can access it when they](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=224.78714285714287)  [need it. One way to ensure availability is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=227.70057142857146)  [by protecting the systems that store,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=230.53145454545455)  [process, and deliver the data. Think of a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=232.74836363636365)  [banking website. A hacker may attack that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=235.92727272727285)  [website in such a way that the bank's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=238.01392307692308)  [customers cannot access the site to get to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=240.081)  [their own account information. That's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=242.89099999999993)  [called a denial of service attack. The](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=244.66899999999998)  [data itself may be safe and untouched, but](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=247.27999999999992)  [by attacking the systems that make the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=250.28718181818186)  [data available, the hacker takes out the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=252.95227272727286)  [availability leg of the CIA triad.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=255.88649999999993)  [Architecting your AWS environment for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=258.44)  [security involves applying security](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=261.3975)  [controls to everything that touches the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=263.6215)  [data, which includes storage, compute, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=266.31850000000003)  [networking. This approach is called](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=269.1880000000001)  [defense in depth. We're not just securing](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=270.90509090909086)  [a parameter or applying security controls](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=273.063)  [to just one AWS service, defense in depth](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=276.27681818181804)  [means exhaustively and consistently](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=280.4403333333333)  [protecting our data's confidentiality,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=282.4207777777777)  [integrity, and availability. Now how do we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=284.685)  [do that? Well, in an AWS environment,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=287.8534285714286)  [there are three levels of architecture to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=290.0539285714286)  [consider. Firstly are the AWS services and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=292.7218)  [resources themselves, which include](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=295.7708888888889)  [storage, networking, and compute. AWS is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=297.6184444444445)  [responsible for making the security](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=300.2225454545454)  [controls for these shared services](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=302.1139090909089)  [available to you, but it's up to you to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=304.03676923076927)  [configure them correctly. A lot of people](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=307.7246923076926)  [are surprised to learn that AWS does not](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=310.13186666666667)  [give you a magic button to press that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=312.4876)  [automatically secures everything for you.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=315.49450000000013)  [If you're running EC2 instances, you need](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=317.618)  [to secure the operating systems running on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=319.71163636363644)  [those instances. These are most likely](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=322.01225000000005)  [going to be Linux, although many folks do](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=324.2207500000001)  [run Windows in the cloud. If you're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=327.14200000000005)  [running only cloud native applications and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=329.6897272727272)  [not managing your own operating systems,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=331.8819090909089)  [then this part may not apply, but for this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=333.70875)  [course, I'm going to assume that you are](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=335.901)  [running and managing EC2 instances. The](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=339.1914615384614)  [third thing you need to secure are your](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=341.548)  [applications. Applications are ultimately](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=343.9480000000001)  [what process data, and so it's critical](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=345.41739999999993)  [that they are secure. Securing individual](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=348.146)  [applications is outside the scope of this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=350.89799999999997)  [course because, frankly, how you do that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=353.5376923076923)  [is highly dependent on what the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=355.7491538461538)  [application is. However, it's still](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=357.51779999999997)  [something you need to consider as part of your overall security posture.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=0&mode=live&start=358.93879999999996)

### [Course Overview](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live)

[Security is a vast topic, even when you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=0.892)  [limit it to just AWS. But don't let that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=4.232923076923076)  [intimidate you! A key to securing your AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=7.629666666666667)  [environment is to understand which legs of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=10.247)  [the CIA triad you'd need to cover for each](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=13.103583333333336)  [service or resource. Again, those are](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=16.4465)  [confidentiality, integrity, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=19.02033333333333)  [availability. The AWS service management](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=20.927333333333326)  [consoles and APIs are very consistent. So](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=23.817800000000002)  [if you understand how to secure one](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=27.460923076923077)  [service, it's not hard to figure out how](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=29.28738461538462)  [to secure a brand-new service you've never](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=31.5395)  [seen before. Now let's talk about the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=33.750333333333316)  [prerequisites for this course. Ideally you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=36.23811111111111)  [should have at least six months of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=38.40976923076923)  [experience with AWS in a technical](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=40.81346153846153)  [capacity. This includes logging into the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=42.82590909090909)  [web console and configuring some AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=44.74263636363638)  [service. It doesn't matter which one, just](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=47.483999999999995)  [as long as you know your way around the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=51.253499999999995)  [web console. However, it's best if you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=53.08499999999998)  [have some experience launching EC2](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=55.89654545454547)  [instances. You also need to have access to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=58.30109090909094)  [an AWS root user, which, if you're not](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=61.03880000000001)  [sure what that is, it's the account you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=63.618)  [log into using an email address and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=66.18784615384614)  [password, and it has access to the billing](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=68.57133333333333)  [and payment information for the account.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=71.68066666666665)  [Now if you're thinking, Ben, I don't know](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=73.85400000000001)  [about this, I haven't configured any AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=76.69754545454545)  [services. What should I do? Well, if you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=79.26081818181815)  [don't meet the prerequisites, then may I](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=80.608)  [suggest you first watch the course AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=83.24583333333337)  [Fundamentals for System Administrators by](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=86.292)  [Elias Khnaser. That will give you enough](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=89.19700000000002)  [theory and practice on AWS to get started](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=92.12438461538463)  [with this course. Thoroughly protecting](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=94.949)  [your AWS infrastructure and data using a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=97.80133333333335)  [defense in depth approach involves](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=101.509)  [completing six high-level tasks,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=104.23066666666664)  [protecting your AWS credentials, capturing](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=106.408)  [and analyzing logs, protecting network and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=109.17299999999999)  [host-level boundaries, protecting data at](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=112.54566666666665)  [rest, and in transit, and configuring data](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=115.40177777777774)  [backup, replication, and recovery. We will](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=119.1272)  [cover each of these tasks in its own](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=121.83672727272729)  [module. But let's briefly talk through](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=124.26363636363642)  [each of these so you understand how it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=125.9277692307692)  [fits into the overall security framework](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=128.105)  [and why each one is important. The first](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=130.58249999999995)  [step is protecting your AWS credentials,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=133.56900000000002)  [which are what let you log into AWS,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=135.09600000000006)  [manage services, view and edit resources,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=137.9561538461538)  [and so on. Security in AWS begins with the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=140.71938461538448)  [foundation of identity. Who are you, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=145.29433333333338)  [what can you do to resources in a given](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=148.14806666666667)  [AWS account? Who you are and what you can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=150.97646666666668)  [do is tied to a set of credentials, which](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=153.53700000000006)  [we often think of as a username and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=155.986)  [password. The AWS service that provides](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=157.91399999999987)  [the foundation of identity is called IAM,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=160.62909090909088)  [short for Identity and Access Management.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=163.99914285714286)  [IAM, or IM, lets you centrally manage AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=166.406)  [users and what they can do on AWS. Again,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=170.0025000000001)  [for brevity, I will sometimes refer to IAM](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=174.03041666666667)  [as just IM. Now once we establish what a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=177.4817500000001)  [user can do, we then want to be able to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=180.00862499999994)  [track what they did or tried to do, but](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=182.063)  [couldn't. And we do that by capturing and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=185.7386)  [analyzing logs. This is more than just](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=188.94155555555554)  [flipping a switch and logging everything.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=191.35318181818175)  [We have to decide what services to log,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=193.289)  [how detailed we want those logs to be, how](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=195.8293076923078)  [to organize them, where to keep them, how](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=198.81871428571432)  [long to retain them, what events to alert](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=201.62214285714296)  [on, and then how to search logs for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=204.53625000000002)  [specific information. Some of the services](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=207.48725000000005)  [we'll use to do this include CloudTrail](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=209.8437692307692)  [and CloudWatch. Next, we want to protect](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=212.6766153846153)  [our network and host-level boundaries.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=215.65800000000004)  [Although identity is the foundation of AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=217.83)  [security, the fact is that you often want](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=220.26308333333327)  [to make data available to people who don't](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=223.05507142857147)  [have AWS credentials. One common way to do](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=225.8659285714287)  [this is via applications that run on EC2](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=228.96142857142854)  [instances. To secure your instances, you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=232.22771428571423)  [need to implement controls that don't](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=234.20509090909096)  [depend on identity. This includes network](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=236.088)  [access lists, security groups, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=238.94325)  [operating system-based controls. You also](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=241.6925)  [want to control what your instances](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=244.25545454545454)  [themselves can do. You may want to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=246.55181818181813)  [restrict their access to the internet and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=249.0977142857143)  [other AWS services. Again, security is all](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=251.54371428571432)  [about protecting data, and that data has](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=254.01542857142854)  [to live somewhere. When you store your](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=256.5064285714285)  [data on AWS, it's stored at rest sitting](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=259.13771428571425)  [on drives. There are two ways to protect](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=262.26514285714273)  [data at rest. You can encrypt it so that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=264.85900000000015)  [the only ones who can read it are those](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=267.01260000000013)  [that have the correct cryptographic key.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=268.884)  [To everyone else, the data looks just like](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=271.13199999999995)  [random gibberish. Another way to protect](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=273.7859999999999)  [at rest is by using permissions to prevent](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=275.6219999999998)  [unauthorized access, edits, and deletion.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=279.66483333333343)  [Once data leaves the safety and quiet of a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=282.334)  [drive, you want to ensure that it's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=285.19535714285723)  [protected while in transit to wherever](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=287.5554)  [it's going. Most of the time, this is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=289.8666)  [going to be over a public network, namely,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=292.41562500000015)  [the internet. To protect data in transit,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=294.78712500000034)  [we again use encryption because we don't](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=296.6833333333334)  [want unauthorized eyes seeing it, but we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=298.508)  [also don't want anyone changing it.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=301.43884615384616)  [Encryption ensures that the data retains](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=303.951)  [its integrity as it moves to its](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=306.3141428571429)  [destination. Lastly, we'll configure data](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=309.0711428571429)  [backup, replication, and recovery. NO](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=311.28849999999994)  [matter what we do, or how good our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=313.398)  [security is, there's always the risk of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=315.68600000000004)  [losing data. Remember the A is the CIA](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=318.0792307692308)  [triad is availability. If we have a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=321.93215384615394)  [catastrophic data loss, we have to be able](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=324.3540666666666)  [to make that data available again. To do](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=326.3081999999998)  [that, we back it up, keep copies in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=329.12253846153834)  [geographically separated areas, and when](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=332.453)  [the time comes, we restore that data and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=334.47299999999996)  [put it back in its proper place so that it can be available again.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=1&mode=live&start=336.9053333333332)

### [Understanding AWS Credentials](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live)

[AWS credentials are what lets you manage](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=1.414)  [AWS services and resources, so we'll begin](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=5.074363636363638)  [our discussion by briefly talking about](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=7.956909090909091)  [the two different types of credentials.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=9.538727272727273)  [When it comes to credential types, the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=12.136)  [terminology can get a little, shall we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=14.951750000000002)  [say, confusing. And what a specific term](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=17.71)  [means depends on the context. First,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=20.3245)  [you've got the root user. When you open up](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=22.492923076923077)  [an AWS account using your email address](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=25.20123076923077)  [and password, you become the root user for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=27.56514285714286)  [that account. The root user has full](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=30.48742857142858)  [access to the account, meaning it can do](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=32.686076923076925)  [anything, it has no restrictions.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=35.035)  [Thankfully there's only one root user per](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=37.35250000000001)  [account. Next, you've got IAM principals.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=40.921499999999995)  [Generally, a principal is any entity in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=44.676)  [AWS that can perform actions on AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=47.75833333333335)  [services and resources. It can represent a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=50.809599999999996)  [user, an application, or more generally,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=53.78319999999998)  [any sort of unique entity. What a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=56.50950000000002)  [principal can do is determined by the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=59.524166666666666)  [policies that are attached to it. Now,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=62.02025)  [technically the root user is a principal,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=65.00745454545454)  [but I use the term IM principal here to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=68.363)  [distinguish non-root principals from the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=71.36572727272723)  [root user. Don't be concerned if that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=73.09445454545455)  [doesn't make sense because by the time](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=75.57118181818184)  [you're done with this module, I promise](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=77.48500000000003)  [you the distinction will become crystal](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=79.53233333333333)  [clear. Okay, that's the high level](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=81.77433333333332)  [overview of credentials. For the rest of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=83.95300000000002)  [this module, you're going to learn how to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=85.84914285714285)  [secure the root user credentials, how to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=87.47542857142855)  [create principals, and how to create](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=89.99290909090907)  [policies and attach those policies to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=92.526)  [principals. Before we jump in, I must](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=96.1637142857143)  [issue a terminology alert. When discussing](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=98.81419999999999)  [AWS, be cautious and deliberate about](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=101.13833333333334)  [using the term account. We often use the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=104.02233333333332)  [term user account to refer to a particular](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=107.42592307692308)  [user, or service account to refer to an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=110.38776923076927)  [account that a service or application](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=113.02400000000002)  [uses. But this is not how AWS uses the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=114.96628571428575)  [term. You have an AWS account, which is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=118.59628571428567)  [the container that houses all of your](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=121.7448)  [resources. You can log into your AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=124.08560000000001)  [account using the root user. In this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=127.10309090909091)  [course, I'm going to avoid the term](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=129.94940000000003)  [account, except when referring](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=132.08580000000012)  [specifically to an AWS account. So instead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=134.02375)  [of saying root account, or user account, I'm just going to say root user or user.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=2&mode=live&start=137.3643846153846)

### [Locking Down the Root User](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live)

[If some naughty person gets a hold of your](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=1.47)  [AWS root user credentials, they can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=4.793076923076922)  [permanently delete everything of yours](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=7.1419999999999995)  [that lives on AWS. So the first order of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=9.322)  [business is locking down this user. To](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=12.861454545454547)  [lock it down, there's one thing we need to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=15.203933333333334)  [do, and one thing we don't need to do. Let](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=16.895333333333333)  [me explain. First, we'll enable](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=20.589999999999993)  [multi-factor authentication, or MFA. In](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=23.344999999999985)  [addition to using a username and password,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=25.702181818181813)  [this will require us to enter a one-time](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=28.863)  [passcode every time we log in. This](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=31.806999999999988)  [one-time passcode can come from a physical](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=34.5128)  [MFA device, which costs money, or a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=37.997399999999985)  [virtual MFA device, which is just a free](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=40.881928571428574)  [app you install on your smartphone. Next,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=43.90421428571429)  [we don't use the root user for regular](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=46.42676923076921)  [administrative tasks. Instead, we'll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=49.3621)  [create a non-root administrative user.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=51.09449999999998)  [This user will have almost unrestricted](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=53.26)  [access to AWS, but because it's not the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=55.96666666666666)  [root user, we can use policies to impose](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=59.36230769230769)  [some restrictions on what it can do. In](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=62.63)  [this demo, we're going to enable](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=65.12844444444445)  [multi-factor authentication. Using MFA is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=67.87311111111114)  [a double-edged sword because while it can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=69.81975000000001)  [make your root credentials much more](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=72.22716666666672)  [secure, it also carries the risk of you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=74.42566666666669)  [getting locked out of your own AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=77.447)  [account, so it's critical that you follow](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=79.31384615384617)  [the process carefully. Feel free to just](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=81.29681818181818)  [watch this clip first, and then come back](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=83.97654545454544)  [to it and follow along with the steps once](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=86.66250000000002)  [you're comfortable with how multi-factor](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=89.43)  [authentication works. Start out by going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=92.48714285714289)  [to the AWS sign-in screen and entering the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=95.12692307692306)  [email address you use to open your AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=97.9607692307692)  [account. Once you've got that in, go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=100.2873846153846)  [and click Next. Then, enter your top](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=103.11166666666666)  [secret password and click Sign In. Once](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=107.07950000000001)  [you're in, up at the top left, click on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=110.55314285714283)  [Services, and in the search box type iam,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=114.5427142857142)  [and it gives us one result for iam, Manage](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=117.82053333333333)  [User Access and Encryption Keys. Go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=121.49345454545455)  [and click that. And it takes us to the IAM](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=124.52763636363642)  [dashboard. Under Security Status, it gives](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=128.7877272727273)  [us a list of things to do. Delete your](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=131.10885714285715)  [root access keys, activate MFA, create](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=133.94321428571425)  [individual IAM users, and so on. Right now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=136.03700000000003)  [we're interested in the second item,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=139.11914285714286)  [activating MFA on the root account. Let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=141.47157142857142)  [go ahead and click that to expand it. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=144.1448888888889)  [then click the Manage MFA button. An](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=147.1427857142857)  [overlay pops up asking us to select the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=150.15828571428574)  [type of MFA device to activate, virtual or](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=153.6960909090909)  [hardware. I don't have a compatible](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=157.50845454545458)  [hardware MFA device. That's one of those](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=160.09124999999995)  [little things that displays a series of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=162.48633333333336)  [numbers, and you can attach it to your](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=164.46616666666677)  [keychain or keep it in your wallet or](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=166.13981250000003)  [purse. You can purchase these from Amazon](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=167.72931250000008)  [and they range from about $13 to $20 U. S.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=169.3744615384615)  [dollars. Alternatively, you can just](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=172.51375)  [install a virtual MFA device on your](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=174.93333333333328)  [smartphone, and that's free. So make sure](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=177.81871428571426)  [that virtual MFA device is selected and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=180.3533076923077)  [click Next Step. Now thoughtfully Amazon](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=183.31269230769234)  [tells us where to find a list of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=185.78721428571424)  [compatible MFA applications. Now, I'm](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=189.00378571428558)  [going to save you the trouble and just](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=190.61320000000003)  [tell you that as of this recording, the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=192.22600000000014)  [two applications that AWS supports for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=194.62763636363638)  [Android and iPhone are Google](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=197.41490909090913)  [Authenticator and Authy. So, if you're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=200.4479)  [following along and you don't already have](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=204.65570000000002)  [one of those apps installed, pause the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=206.91318181818187)  [video, go to the App Store on your phone,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=208.90271428571427)  [and download Authy or Google](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=212.01992857142844)  [Authenticator. Next, let's click Next](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=214.44375)  [Step. We now get a QR code, which we can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=217.905625)  [scan using one of those virtual MFA apps.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=221.60664705882357)  [I'm going to go ahead and do this using](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=224.281)  [Authy, and once I do, Authy is going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=226.4725000000001)  [give me a series of numerical codes 30](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=229.28771428571434)  [seconds apart. Okay, I've entered two](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=232.48314285714304)  [consecutive codes into the boxes on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=234.92100000000002)  [screen. Once you have those codes entered](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=237.78925000000004)  [in, go ahead and scroll down, and click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=239.82050000000004)  [Activate virtual MFA. If you entered the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=242.33145454545456)  [codes correctly, you should see a message](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=245.4445454545455)  [saying that your MFA device was](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=248.18275000000006)  [successfully associated with your account.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=250.40125000000012)  [Go ahead and click Finish. And now let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=252.4532222222222)  [refresh the IAM dashboard, and now we have](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=255.65699999999998)  [a nice green checkmark next to activate](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=258.59300000000013)  [MFA on your root account. All right, let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=261.1575555555556)  [go ahead and test this out. Let's log out](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=263.7983333333333)  [and log back in. Back at the login screen,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=266.4563999999999)  [I've got my email address and password in,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=269.5625999999997)  [and I will attempt to sign in. This time](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=272.7192500000001)  [instead of letting me through, it asks for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=276.3891538461539)  [an authentication code. I will refer to my](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=279.1897692307693)  [Authy virtual MFA app, and enter the code](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=281.73970588235306)  [that it gives me. Now, after I enter it,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=284.13923529411795)  [I'm going to click Sign In, and only after](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=287.70099999999996)  [I enter the correct code does it let me](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=291.9525999999999)  [in. So, MFA works great. Now, let's jump](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=295.2582307692308)  [back to the IAM dashboard. Now under](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=299.1488750000001)  [Security Status, take a look at the first](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=303.14171428571433)  [item on the list, Delete your root access](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=304.9805714285716)  [keys. Go ahead and click on that to expand](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=307.3245714285714)  [it. It says delete your root account](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=310.5298571428571)  [access keys because they provide](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=313.23363636363644)  [unrestricted access to your resources.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=315.19)  [Root access keys are credentials that you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=317.16777777777787)  [can use to make changes to your AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=319.91300000000007)  [account programmatically using the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=323.0143333333336)  [application programming interfaces, or](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=325.3265)  [APIs, provided by the various AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=327.686)  [services. Because these keys belong to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=330.296)  [root user, they provide unrestricted](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=333.153909090909)  [access to the account, and no, in case](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=335.173)  [you're wondering, multi-factor](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=338.5233999999998)  [authentication does not have any effect on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=339.7711111111111)  [these. Anyone with a root access key can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=342.64188888888896)  [make changes to your account without](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=345.66892307692314)  [having to go through multi-factor](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=347.912)  [authentication. So the obvious next step](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=349.9803333333334)  [is to delete these root access keys. Let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=352.45608333333337)  [go ahead and click on Manage Security](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=355.7967777777778)  [Credentials. And you may get an overlay](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=358.9732222222221)  [warning you that the account credentials](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=361.2660000000002)  [on this page provide unlimited access to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=363.105)  [your AWS account. Go ahead and click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=365.60260000000017)  [Continue to Security Credentials. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=368.9269999999999)  [you're presented with a rather](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=371.628875)  [plain-looking page. Right there in the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=373.86825000000005)  [middle, click on access keys, and yours is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=376.58246153846164)  [going to look a little different, but what](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=380.2193846153849)  [I have on my screen are three different](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=382.53349999999983)  [root access keys, two of which I've](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=384.77709999999996)  [already deleted. Go ahead and locate any](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=387.4657999999999)  [keys that are active, and under the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=389.81092307692313)  [actions column on the far right click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=392.01861538461554)  [Delete. It asks are you sure? Are you sure](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=395.5120000000001)  [you want to delete this? And yes, I'm](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=399.52849999999995)  [sure, so I'll click yes. And that key is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=401.7644999999998)  [now in a deleted status. Let's go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=404.13285714285706)  [and jump back to the dashboard. And now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=406.07457142857123)  [we've got MFA enabled and our root access](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=409.3786153846152)  [key is deleted. So, our root account is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=413.04492307692306)  [locked down and the next step is to simply](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=416.0683076923077)  [stop using it. But before we can stop](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=418.89499999999987)  [using it, we need to create a non-root](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=420.9989999999997)  [user that we can use for administrative tasks. That's what we're going to do next.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=3&mode=live&start=424.10959999999983)

### [Introduction to Principals and Policies](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live)

[Now that we've established multi-factor](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=1.304)  [authentication for the root user, we need](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=3.1834444444444445)  [to create a non-root IAM user that we'll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=6.0836875)  [use to perform administrative tasks. This](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=9.808187500000003)  [user will have full administrative access](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=12.573636363636362)  [to almost all services, including the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=15.199454545454541)  [ability to create other users. The user](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=17.729142857142858)  [we're going to create is a type of IAM](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=20.39333333333333)  [principal. If IAM is the foundation of AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=23.61683333333332)  [security, then principals are the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=26.69041666666666)  [foundation of IAM. Think of a principal as](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=28.63)  [any entity that can take an action on an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=32.064461538461536)  [AWS resource. The term principal is often](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=35.408)  [used synonymously with identity. The most](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=37.502750000000006)  [common and obvious example of a principal](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=39.75290909090908)  [is a user, and by a user I mean a unique,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=42.46328571428572)  [real person. But don't think of a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=46.5254285714286)  [principal as a synonym for user. A](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=48.65218181818181)  [principal can also be what's called a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=50.65107692307692)  [role, which can represent a non-living](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=52.982615384615386)  [being such as an application or an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=55.09688888888889)  [instance. The term role, as used in IAM,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=58.23911111111111)  [is a technical term. It does not refer to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=61.23281818181817)  [a job role or job function as it would in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=64.042)  [normal usage. We're going to cover roles a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=66.75200000000001)  [little later, but for now we're going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=68.76261538461542)  [focus on users. Now, all by itself, a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=71.00525)  [non-root principal can do nothing. It has](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=74.93349999999998)  [no permissions to do anything in AWS.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=78.096)  [Policies determine what permissions a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=80.973)  [principal has, that is, what actions it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=83.46688888888887)  [can take on a service or resource and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=86.45135714285716)  [under what conditions. Think of a policy](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=89.08964285714292)  [as a sophisticated access control list.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=91.79259999999998)  [You determine which permissions a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=94.363)  [principal has by associating the principal](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=96.1395)  [with one or more policies. If you don't](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=98.3390909090909)  [associate any policies with a principal,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=101.72381818181812)  [then by default the principal will have no](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=104.12076923076921)  [permissions. We have to create the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=107.22230769230765)  [principal and associate it with a policy](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=109.57192307692307)  [that grants administrative access. The](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=112.31861538461537)  [policy is really the key here, so we'll start with that.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=4&mode=live&start=114.461)

### [Understanding Policies](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live)

[You'll often hear the terms policy and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=1.311)  [permissions used interchangeably. Although](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=4.2048000000000005)  [they are related, they're not the same](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=5.805666666666667)  [thing. A policy consists of one or more](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=8.330333333333336)  [permission statements, and a permission](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=11.768666666666661)  [statement consists of at least four](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=13.897800000000002)  [elements. The first element is the effect,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=16.397400000000005)  [which can be allow or deny. This controls](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=19.258999999999993)  [whether to allow or deny an action on a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=22.375)  [service, and more specifically, on a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=25.394499999999997)  [resource within that service. For example,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=28.122777777777777)  [let's assume the effect is allow and the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=30.702384615384616)  [service we want to control access to is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=33.36392307692307)  [EC2. Each AWS service has a set of actions](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=36.49164285714286)  [or operations that it can perform on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=40.325)  [various resources that are a part of that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=42.813230769230785)  [service. Among other things, the EC2](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=45.578833333333336)  [service lets you create instances using](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=47.47733333333335)  [the RunInstances action. This is not how](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=49.51233333333334)  [you see it displayed in the EC2 web](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=52.20500000000001)  [console, but if you look at the API](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=54.722076923076926)  [documentation for EC2, RunInstances is the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=56.903)  [name of the action or operation that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=59.586090909090906)  [creates new instances. Naturally, the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=62.77720000000001)  [actions you can choose depend on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=65.1652)  [service. Depending on the action you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=68.03545454545456)  [choose, you may have to specify one or](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=70.19163636363639)  [more resources. For example, the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=72.58022222222218)  [RunInstances action uses network](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=74.87975)  [interfaces, security groups, AMIs,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=77.17275000000001)  [volumes, subnets, and so on. These are all](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=79.17437499999998)  [resources that are a part of EC2. The idea](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=82.6464)  [here is to let you restrict access on a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=85.89930769230769)  [per-resource basis. For example, you can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=89.07769230769229)  [specify an Amazon machine image ID so that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=91.32584615384617)  [the RunInstances operation can be](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=94.4095384615385)  [performed using only that image. In other](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=96.88522222222223)  [words, this permission statement would](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=100.08672727272729)  [allow someone to start an instance only](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=101.5585454545455)  [using this Amazon machine image ID. The](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=104.49600000000002)  [resource element gives you granular](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=108.3699)  [control over which specific resources an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=110.13939999999998)  [action can act upon. Last, but not least,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=112.46115384615385)  [we have the optional conditional element,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=116.08576923076922)  [sometimes called the request condition.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=118.42525)  [Here you can require other conditions to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=120.059)  [be met before AWS will allow the action.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=122.5813333333333)  [For example, you can require multi-factor](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=125.464)  [authentication, or restrict actions to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=129.48828571428572)  [users from a specific IP address range.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=131.60990909090913)  [You can even impose date and time-based](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=134.149)  [restrictions. All right, these are the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=137.859875)  [main elements of a permission statement,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=139.9909090909091)  [and as you can see, there are a lot of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=141.912)  [options here, and this is just one](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=144.423111111111)  [statement. As you'll see, when we get to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=146.18088888888872)  [the demo, the possibilities are endless. A](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=148.85238461538464)  [policy can have many statements, so as you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=151.3031818181818)  [might imagine, creating policies can get](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=154.31263636363624)  [complicated pretty quickly. So instead of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=156.901)  [jumping into creating policies from](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=159.37933333333334)  [scratch, let's start with an existing](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=161.2148888888889)  [policy that AWS has created for us. Amazon](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=163.67825000000002)  [has a collection of pre-packaged policies](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=167.1467)  [called AWS Managed Policies, and there are](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=170.34890000000007)  [currently hundreds of these that cover all](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=173.27872727272728)  [sorts of common scenarios. Not only are](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=175.604)  [they pre-packaged, Amazon also updates](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=178.70344444444436)  [them regularly to include new services. In](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=180.92000000000002)  [this scenario, we want to create a user](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=183.91441666666665)  [that has administrative access to our AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=186.57374999999993)  [account. Thankfully, there's a managed](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=189.12859999999998)  [policy that can do exactly that. It's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=191.07559999999995)  [called the administrator access policy. In](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=194.03681818181823)  [the next clip, we're going to look at this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=196.3692142857143)  [policy, and I'm going to show you how to use it to create an administrative user.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=5&mode=live&start=198.07214285714286)

### [Creating an Administrative User](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live)

[In this demo, we're going to take a look](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=1.299)  [at the AdministratorAccess managed policy](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=4.469250000000001)  [to understand exactly what it does. Next,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=6.35825)  [we'll create a new IAM user, and finally,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=9.293750000000001)  [we'll attach the AdministratorAccess](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=12.803750000000006)  [policy to the new user. Let's jump over to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=14.746666666666666)  [the IAM dashboard. In the IAM dashboard on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=19.76628571428572)  [the left side menu, click on Policies. Now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=23.899333333333335)  [you get a list of hundreds of policies,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=28.033142857142856)  [and it just so happens that the first](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=30.658285714285718)  [policy on the list is the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=33.59554545454545)  [AdministratorAccess policy. Notice under](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=36.188636363636355)  [type it says job function. Job function](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=38.05009090909091)  [policies are managed policies that align](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=41.53990909090911)  [with common job functions in the IT](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=44.06366666666667)  [industry. Now, go up to the filter](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=46.735333333333344)  [dropdown and click on policy type. Here](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=49.80699999999998)  [you can choose to see all, AWS managed,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=52.970636363636366)  [job function, or customer managed](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=56.7597272727273)  [policies. Let's click on job function. Now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=59.51933333333333)  [the first one on the list is still](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=63.4738)  [AdministratorAccess. But you can see we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=66.11220000000003)  [have others, such as](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=68.30100000000002)  [DatabaseAdministrator, DataScientist,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=69.78820000000005)  [NetworkAdministrator, and so on. Go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=70.87259999999999)  [please and click on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=74.891)  [AdministratorAccess policy. The](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=77.81100000000002)  [Permissions tab is selected by default and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=79.31625)  [underneath it is a list of services and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=81.67699999999998)  [resources that this policy grants access](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=84.5558181818182)  [to. Now, think back to the elements of a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=86.8505454545455)  [permission statement. Effect, service,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=90.11780000000005)  [action, resource, and condition. We've got](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=92.12133333333333)  [service, resource, and request condition](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=95.73155555555556)  [listed here, but the element's effect and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=98.34544444444444)  [action are not explicitly listed. We have](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=102.00750000000002)  [a column named access level, which shows](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=105.29630769230769)  [full access for each service, but what](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=107.64938461538463)  [does that mean? Well, directly under the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=110.18769999999998)  [Permissions tab, locate the button that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=112.973)  [says JSON. Click on that button, please.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=116.59325)  [This is what's called a JSON policy](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=119.99833333333333)  [document, JSON being JavaScript Object](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=123.076)  [Notation, which is just a structured data](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=125.25449999999998)  [format that IAM policies use. Notice here](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=128.421)  [that we do have the Effect, which is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=131.6682727272727)  [Allow. On the next line, we have the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=134.7773636363635)  [Action, which is an asterisk or wildcard,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=136.82930769230776)  [which indicates all actions, and one line](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=138.70659999999998)  [further down, the Resource is also listed](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=141.86779999999987)  [as an asterisk indicating all resources.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=145.1478181818181)  [So this is actually a really simple](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=148)  [policy. It allows access to all actions on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=150.953125)  [all resources. Now you might be thinking,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=154.3655555555555)  [wait a minute, what about the service?](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=156.85416666666663)  [Well, recall earlier I said that the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=159.142)  [actions you can choose depend on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=161.42120000000006)  [service. In the policy document, IAM](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=163.70040000000012)  [actually combines the service and action](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=166.3187272727273)  [together in the action element. Now that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=169.07)  [is not obvious or even necessarily](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=171.6839166666666)  [intuitive, but when we create our own](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=173.90855555555555)  [policy, which we will do shortly, you'll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=176.4114444444445)  [see exactly what I mean. Okay, next we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=178.8919090909091)  [need to create a new IAM user. To do that,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=181.6474)  [on the left side menu, click on Users. Now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=185.536)  [you can see here I already have a user,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=190.1086875)  [ccadmin, which I created awhile back. If](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=193.17487500000001)  [you've never created a user before, you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=195.54807142857143)  [should not see any users here. At the top,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=197.8515714285715)  [click the Add user button, and I'm going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=201.20835714285715)  [to create this user for myself, so I'm](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=204.8946428571429)  [going to name it Ben. Now under AWS access](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=208.1655)  [type, we can allow programmatic access via](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=211.71933333333337)  [the API, which is generally what you would](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=214.63366666666676)  [do for a developer or anyone who needs to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=217.28623076923068)  [interact with AWS using command-line based](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=220.736)  [tools. We can also allow access to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=223.80199999999996)  [web-based AWS management console, which is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=226.74327272727265)  [what we want to do here. So we'll go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=228.65453333333335)  [and click that. And then let's scroll down](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=231.26720000000006)  [a bit, and we can have AWS generate a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=233.90492857142857)  [password, or we can specify a custom](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=237.242)  [password. I'm going to let AWS generate a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=239.93612499999995)  [password, but I am not going to require](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=242.26450000000006)  [the user to change the password upon](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=244.47688888888888)  [login. So I will uncheck this box right](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=246.35911111111105)  [here. And now let's click on Next:](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=250.21480000000008)  [Permissions. Here we can optionally set](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=253.80160000000018)  [the permissions for this user using a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=255.93525000000002)  [variety of methods. For now I am not going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=258.205)  [to give this user any permissions](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=261.3285624999999)  [whatsoever. Let's go ahead and click Next:](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=263.4109374999999)  [Review. We're presented with a summary](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=265.9685000000001)  [screen that includes a big yellow warning](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=268.179)  [that says user has no permissions. And it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=270.7776153846152)  [tells us very directly that the user has](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=273.6352857142857)  [no access to any service or resource.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=276.1564285714286)  [That's fine because we want to grant](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=278.36881818181814)  [permissions in a separate step. Let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=280.5897272727272)  [ahead and click Create user. And here we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=283.5780909090909)  [can view the user's auto-generated](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=286.8605454545454)  [password by clicking Show, and I'm going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=288.6214545454544)  [to go ahead and copy this to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=290.97276923076913)  [clipboard. Okay, so far, so good. Let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=293.5623076923074)  [ahead and click Close. And there is our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=297.3427272727274)  [new user. Next, click on the username, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=301.28885714285707)  [under the permissions tab, there are no](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=305.23057142857124)  [permissions. Look over at the right-most](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=308.48766666666677)  [tab labeled Access Advisor and click on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=311.4393076923078)  [that. Now Access Advisor shows you what](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=314.9355384615387)  [services a user has access to and when the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=317.7505384615384)  [user last accessed each service. Once](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=321.211)  [again, this user has no permissions, so](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=323.48800000000006)  [this area is blank. All right, let's jump](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=325.99774999999994)  [back over to the Permissions tab, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=328.6424166666665)  [let's go ahead and click the button](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=330.8870000000001)  [labeled Add permissions. Now this looks](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=333.12)  [familiar, doesn't it? We saw the screen a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=336.376)  [moment ago. What we need to do now is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=339.19500000000005)  [attach the administrator access policy to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=341.3388000000001)  [this user, and to do that, we will click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=343.4738181818181)  [Attach existing policies directly. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=348.0218571428572)  [here we can select the AdministratorAccess](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=351.542875)  [policy. Go ahead and just click the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=354.49412499999994)  [checkbox next to it, and then let's scroll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=356.74442857142844)  [down a little bit until we see the Next:](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=359.089)  [Review button, and click that. It gives us](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=363.4167142857142)  [the summary of the policies we're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=366.74061538461547)  [attaching to the user, which in this case](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=368.57984615384635)  [is just one policy. This looks good, so](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=370.8950909090908)  [we'll click Add permissions. And just like](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=373.3467777777778)  [that, the AdministratorAccess policy is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=377.1672222222224)  [now attached to this user. Now, let's jump](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=379.6196666666668)  [back over to the Access Advisor tab, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=383.47853846153845)  [scroll down just a bit, and notice that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=387.4133076923077)  [this user has access to over 100 AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=391.1057999999999)  [services. Let's actually log in as this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=394.71753333333305)  [user. How do we do that, though? We've](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=397.0428461538461)  [been logging in using an email address and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=399.4709)  [password. This user we just created](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=401.40609999999987)  [doesn't even have an email address, so how](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=403.06345454545453)  [do we log in? Well, let's jump back over](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=405.6927142857143)  [to the dashboard, and look at the top](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=409.88092857142874)  [where it says IAM users sign-in link. This](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=412.85033333333325)  [is a specially crafted URL just for our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=415.5131818181818)  [IAM users. I'm going to go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=419.1946363636363)  [select this URL, and then right-click to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=421.7211538461538)  [open it up. This login screen looks](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=423.595)  [different because it has a field for an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=426.09884615384635)  [account ID or alias, which is already](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=428.86053846153845)  [populated, and instead of an email address](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=431.014923076923)  [field, it has an IAM user name field. The](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=433.4669999999999)  [IAM user name here is, of course, ben, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=437.01385714285715)  [I'll go ahead and paste in the password](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=439.63157142857136)  [that I copied to my clipboard a moment](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=441.92423076923086)  [ago. And then we'll go ahead and click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=444.18269230769255)  [Sign In. And bam! We're logged in. Now,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=446.0018888888887)  [let's jump back over to the IAM dashboard,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=448.2594615384614)  [and then once we're here let's go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=450.70225)  [and click on Users again, and I can see](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=453.27225000000016)  [the users, which is a good sign. Let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=456.9013846153847)  [ahead and click on Ben. Now to reiterate,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=460.9957692307692)  [this user has administrator access because](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=464.93484615384597)  [the AdministratorAccess policy is attached](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=468.3941428571428)  [to my IM user. Now this is fine here](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=471.3855714285714)  [because I am the administrator, and I only](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=474.522714285714)  [need this one policy, but in a large](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=477.05766666666665)  [organization, you may have many users who](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=479.339)  [need many different policies to address](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=482.5074545454546)  [many different levels of permission. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=485.00800000000004)  [attaching multiple policies to many users](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=487.2266)  [can become cumbersome and time-consuming. That is where groups come in.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=6&mode=live&start=490.1882000000001)

### [Using Groups](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live)

[On the left side menu, please click on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=1.242)  [Groups. Now if you've ever dealt with any](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=6.389555555555556)  [kind of directory service like Active](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=9.07175)  [Directory or LDAP, then you already know](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=10.897909090909092)  [what groups are. You create a group, give](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=13.487272727272734)  [it some permissions, and then place users](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=16.217)  [in that group. The users who are in the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=18.485)  [group inherit the permissions. The concept](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=21.709076923076918)  [of groups in AWS is no different. Go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=23.87622222222222)  [and click on the Create New Group button,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=27.01714285714286)  [and we are going to go ahead and name this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=29.3017142857143)  [one AWS-Administrators. Go ahead and click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=34.875)  [Next Step, and then attach the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=38.71200000000001)  [AdministratorAccess policy by clicking the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=42.25200000000003)  [checkbox next to it. Then click Next Step.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=44.594999999999985)  [And then finally, click Create Group. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=49.244000000000014)  [there it is. Now go ahead and click on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=54.02526666666667)  [Group Name and let's jump over to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=58.39793333333333)  [Users tab, and it says this group does not](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=61.36499999999999)  [contain any users. So let's click the Add](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=64.10549999999996)  [Users to Group button and let's go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=66.594)  [and add Ben to the group by clicking in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=69.11399999999998)  [the checkbox next to Ben, and then click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=72.4277692307692)  [Add Users. Excellent. Now on the left side](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=75.817)  [menu, let's go back to Users, and then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=79.85699999999996)  [let's go ahead and click on my username](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=82.94762500000003)  [here. And now check out the Permissions](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=85.90262500000007)  [tab. I still have the AdministratorAccess](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=88.8656363636364)  [policy attached directly to my user, but I](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=91.484)  [also have the same policy attached from](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=95.13999999999994)  [the group which I am now a member of. Now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=98.05139999999996)  [on the top-most policy, look over on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=102.11015384615385)  [right at the X. Go ahead and click that X](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=105.12738461538461)  [there, and it asks if we want to detach](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=108.97917647058821)  [the policy. We do, so go ahead and click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=112.49394117647054)  [Detach. And now the policy is no longer](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=116.05306666666668)  [directly attached to my user, but it's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=119.228)  [still attached by virtue of me being a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=121.70869230769232)  [member of the group, which itself has the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=124.79376923076923)  [AdministratorAccess policy attached. So](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=128.62884615384615)  [you can see how powerful this is and how](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=130.3402142857143)  [using groups can actually save you a lot](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=132.7991428571429)  [of time when you have many users who need](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=134.8831428571429)  [different levels of access using different policies.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=7&mode=live&start=137.11321428571443)

### [Denying Access with User Policies](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live)

[Right now we're using an AWS manage policy](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=1.193)  [to grant administrative access to a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=4.326818181818181)  [non-root user. But suppose we want to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=6.979249999999999)  [create another user who is still an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=10.426166666666667)  [administrator, but has some additional](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=13.771454545454544)  [restrictions. For example, you may want to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=16.13190909090909)  [prevent that user from terminating EC2](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=19.365846153846164)  [instances. We can do that by creating a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=22.127692307692328)  [new policy that uses the deny effect. You](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=25.39849999999999)  [can use the deny effect in a policy to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=28.546785714285715)  [selectively deny access to a specific](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=31.586857142857152)  [resource or action after you've granted](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=33.95400000000001)  [access to it using a different policy. For](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=37.002000000000024)  [example, the AdministratorAccess manage](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=41.020500000000006)  [policy grants access to pretty much](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=43.007)  [everything, including running and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=46.25179999999998)  [terminating EC2 instances. But you can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=48.415)  [create another policy that specifically](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=50.886400000000016)  [denies the TerminateInstances action,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=53.00077777777778)  [which is the action that allows you to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=54.86788888888889)  [terminate or delete instances. Let's call](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=58.396)  [this policy RestrictAdmin. If you apply](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=61.1708)  [both policies to the same user, the net](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=64.51219999999999)  [result is that the user can do everything](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=67.28028571428572)  [except terminate instances. The deny](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=69.486)  [effect always takes precedence over the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=73.1632222222222)  [allow effect. Okay, let's take what you've](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=77.03099999999999)  [learned so far and put it all together. In](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=79.07700000000001)  [this demo, we'll create a new user named](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=81.238)  [Phil. He will be an administrator, so](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=84.19)  [he'll have full access to AWS, but we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=86.55300000000003)  [don't want him to have access to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=89.2544)  [TerminateInstances. So, we'll create](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=91.73030000000003)  [another policy that denies the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=93.76819999999998)  [TerminateInstances action. We'll then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=96.57519999999994)  [associate that policy with the new user.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=98.68466666666667)  [Here we are at the IAM dashboard, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=102.138)  [we're looking at our users. We're going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=104.20261538461543)  [start out by creating a new user, so go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=106.09060000000001)  [ahead and click the Add user button, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=107.88340000000005)  [we're going to name this one Phil. We're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=111.0293333333333)  [going to go ahead and give Phil AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=114.97708333333333)  [Management Console access, and this time](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=118.01774999999998)  [I'm going to specify a custom password](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=120.03976923076924)  [because it's just easier for me to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=122.09723076923079)  [remember, and I do not want to require a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=124.22513333333332)  [password reset. Next, click Next](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=127.02893333333328)  [Permissions. Because we want Phil to be an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=129.10945454545455)  [administrator, we'll add him to the AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=132.996)  [administrators group so that he inherits](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=135.67700000000008)  [the AdministratorAccess policy. To do](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=138.481)  [that, we'll simply check the box next to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=141.16442857142857)  [the group name here, and I'll scroll up a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=144.26614285714282)  [little bit. This all looks good. Scroll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=146.93654545454552)  [down, and then click Next: Review. All](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=148.82425)  [right, so the only policy he has attached](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=152.63400000000004)  [is the AdministratorAccess policy via the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=157.28566666666663)  [Group AWS-Administrators. We'll go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=160.99766666666656)  [and click Create user, and then we'll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=163.86249999999998)  [click Close. All right, let's go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=167.6599999999999)  [click on Phil's username here. All right,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=170.7582727272728)  [Phil has administrative access via the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=173.41420000000002)  [AdministratorAccess policy. Next we need](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=176.34880000000007)  [to restrict his access by creating another](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=178.49045454545453)  [policy. To start out, we want to create a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=181.20518181818176)  [policy that applies only to Phil. To do](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=184.17185714285705)  [that, we're going to create what's called](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=186.663)  [a user policy. Unlike an AWS managed](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=188.61250000000007)  [policy, which you attach to one or more](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=191.2609230769231)  [users, a user policy applies only to a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=194.88676923076926)  [single user. In other words, it's an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=197.35075)  [inherent part of that user. A user policy](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=199.66823076923075)  [does not exist outside the context of a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=203.1931538461537)  [user. User policies are a specific](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=206.53791666666666)  [instance of a more general policy type](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=208.96541666666667)  [called an inline policy. If you look down](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=211.31340000000006)  [at the bottom right, you'll see the option](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=213.67299999999997)  [to add an inline policy, so let's go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=215.8009999999999)  [and click Add inline policy. And it takes](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=219.065)  [us to the visual policy editor. We want to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=222.29500000000004)  [create a policy that prevents Phil from](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=225.8027692307692)  [terminating EC2 instances. So for the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=228.50423076923065)  [service, we'll go ahead and click Choose a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=230.99261538461536)  [service and we're presented with a list of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=234.54092307692298)  [AWS services. In the search box I'll type](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=237.6674999999999)  [ec2, and the service we want is ec2, so](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=240.95114285714283)  [click that, and now it gives us some](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=244.874)  [options for actions. Notice it says](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=249.19399999999993)  [Specify the actions allowed in EC2. Now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=252.77799999999996)  [this is the opposite of what we want. The](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=256.96844444444446)  [AdministratorAccess policy already allows](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=259.649625)  [access to everything. What we want to do](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=261.97612500000014)  [here is deny access. So over on the right,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=265.33135714285703)  [let's click Switch to deny permissions.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=268.23)  [Now the text changes, and we can select](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=272.0741999999999)  [the specific actions we want to deny.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=276.10427272727276)  [Under access level, expand the write](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=278.672)  [section and you'll get a rather verbose](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=282.047)  [list of actions. Thankfully, we don't have](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=285.7308181818182)  [to sort through this list, we can simply](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=287.8925454545456)  [search for the action we want. So up here](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=290.0635454545454)  [in the filter actions box, I'll type](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=293.16799999999995)  [terminate, and there it is,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=296.9269999999998)  [TerminateInstances. Incidentally, if you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=299.3924)  [aren't sure what an action does, just](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=301.3208)  [click on the question mark next to it and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=303.55133333333333)  [a little slider will pop out telling you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=305.8307333333333)  [what it does. This action shuts down one](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=308.30719999999985)  [or more instances. All right, let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=311.2699999999999)  [ahead and close this out here, and let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=313.49799999999993)  [go ahead and check TerminateInstances.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=315.5419999999998)  [Fantastic! Now, we're not done yet.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=318.34874999999994)  [Remember that one of the required elements](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=320.6227500000001)  [of a permission statement is the resource.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=322.735)  [The editor says you chose actions that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=325.472)  [require the instance resource type. So, go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=328.50766666666675)  [ahead and click on this line of text here,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=331.2764)  [and this is where you can, if you want to,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=333.9782000000002)  [specify specific instances. Now the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=338.0690000000001)  [verbiage here doesn't really do justice to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=340.062)  [the level of granularity you have here. It](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=341.98)  [just says Add ARN to restrict access. But](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=345.16449999999986)  [if you click on that, add ARN, you see](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=348.81971428571427)  [that you actually can specify a region, an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=351.9491428571429)  [account number, or even an instance ID. So](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=354.84509090909097)  [let's say you want to prevent Phil from](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=357.8870833333333)  [shutting down instances just in the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=361.15174999999977)  [us-east 1 region. Well, you can just put](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=363.35400000000004)  [that in there, and then for the account](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=365.9620000000002)  [and instance ID fields, you select Any,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=368.62041666666676)  [and that will prevent Phil from](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=370.973)  [terminating instances only in the us-east](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=373.0724545454545)  [1 region. Now in this case, we actually do](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=375.21576923076924)  [not want this level of granularity, but I](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=378.7596923076924)  [just want you to see what our options are](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=381.20799999999997)  [here. So I'm going to go ahead and click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=383.48859999999996)  [Cancel here. And back in the Policy Editor](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=386.9404000000002)  [go ahead and click All Resources. Now this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=390.3655000000001)  [policy is going to prevent Phil from](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=393.993923076923)  [terminating any instances, period. Next,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=397.5041538461536)  [click on the line that says Request](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=399.80684615384615)  [conditions, and here you can set](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=401.8847692307693)  [restrictions on when this policy applies.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=403.92900000000003)  [We're not going to specify any request](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=407.289)  [conditions because we want this policy to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=409.4689166666667)  [apply regardless of what IP address Phil](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=411.5438461538461)  [is coming from or whether he's using MFA.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=413.3563076923075)  [So let's go ahead and click Review policy.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=416.74166666666673)  [For the name, we're going to call this one](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=421.441)  [RestrictAdmin, and then let's scroll down](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=427.2846999999998)  [and click on Create policy. And there is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=429.8120000000001)  [the new RestrictAdmin policy. Let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=432.7074999999999)  [ahead and expand that by clicking on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=434.7424999999998)  [arrow next to it, and then let's scroll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=437.8282142857143)  [down a little bit and click on the JSON](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=441.1373571428572)  [button, and this is what the policy](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=444.2218571428571)  [document looks like. Look at the action.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=446.55375000000004)  [Remember earlier I said that IM combines](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=448.855)  [the service and the action into the action](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=451.36449999999996)  [element. You see here that the action is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=454.16869230769225)  [listed as ec2:TerminateInstances, EC2](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=456.8665384615383)  [being the service followed by a colon and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=458.6608)  [then the action, TerminateInstances. It's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=463.14)  [possible to have multiple services and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=465.41888888888883)  [actions in a single permission statement.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=468.07675)  [The resource is just an asterisk because](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=470.581)  [we want this deny effect to apply to all](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=473.6297692307691)  [instances. Up at the top right, go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=477.23642857142863)  [and click the Simulate policy button, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=479.88557142857167)  [then up at the top, let's click Select](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=482.264)  [Service, and let's scroll down until we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=485.034)  [see EC2. There it is. Go ahead and click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=487.6006666666667)  [EC2. And then if we look under actions, we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=490.6329999999999)  [can select specific actions, or we can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=493.51683333333335)  [just click the Select All button. And it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=495.56375)  [lists all possible actions in EC2. Now,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=498.9928181818182)  [over on the far right, go ahead and click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=502.3405384615385)  [the Run Simulation button, and after a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=504.91038461538466)  [moment over under the right-most column it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=507.88133333333343)  [shows us the effective permissions Phil](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=511.58141666666694)  [has for each action. Next to Action](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=514.2583333333333)  [Settings and Results, it says 265 actions](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=517.5408181818182)  [allowed, 1 action denied. Can you guess](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=521.1897272727273)  [what the one denied action is? Let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=524.0860000000002)  [scroll down, and there in bright red](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=527.1193846153847)  [letters we see denied next to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=531.7280769230772)  [TerminateInstances action. And this is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=535.934)  [exactly what we want. We want Phil to be](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=538.2189999999999)  [able to do anything in EC2, except](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=541.8162307692306)  [terminate instances, and that is exactly what we just achieved.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=8&mode=live&start=544.2931538461535)

### [Denying Access with Group Policies](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live)

[Now, this is great, but what if we want to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=1.415)  [restrict access for many administrators.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=5.126333333333335)  [Do we have to create a separate inline](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=6.982)  [policy for each one? Well, no. Let's jump](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=10.195333333333336)  [back over to Phil's user in IAM. I'm going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=13.483454545454542)  [to go ahead and click on this tab over](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=16.773999999999997)  [here. And what I'm going to do here is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=18.339999999999993)  [highlight the text of the policy document,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=20.92200000000001)  [right-click it, and then copy it to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=23.145200000000003)  [clipboard. Now, let's go ahead and scroll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=26.48280000000001)  [up a little bit and click on the Groups](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=28.166799999999995)  [tab, and just to remind you, Phil is a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=30.067)  [member of the AWS administrators group.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=34.710400000000014)  [That's how he got the AdministratorAccess](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=37.806)  [policy. Instead of applying an inline](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=40.73914285714285)  [policy to Phil's user directly, we can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=43.315499999999986)  [apply a policy to the AWS-Administrators](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=46.24788888888889)  [group. So let's go ahead and click on that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=48.782555555555554)  [group, and then let's click on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=52.60641176470587)  [Permissions tab. Now, look down where it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=55.582647058823504)  [says inline policies. Go ahead and click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=58.39675)  [on that. And we have the option to create](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=60.79594117647058)  [one for this group. When you create an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=63.54305882352937)  [inline policy for a group, it's called a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=66.1422857142857)  [Group Policy. Again, an inline policy is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=68.89885714285712)  [embedded in the group itself. So we'll go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=71.69500000000002)  [ahead and click here at it says to create](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=74.88019999999999)  [an inline policy. And this looks new and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=78.11479999999993)  [different. We can use something called the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=80.95216666666666)  [policy generator to generate a policy, but](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=83.415)  [this is not the visual policy editor. It's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=85.88500000000003)  [actually a little less, shall we say,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=88.769)  [feature-rich than the visual policy](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=91.66700000000002)  [editor. So we're not going to use that.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=93.5828)  [Instead, click on Custom Policy, and then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=96.278)  [we'll go ahead and click Select on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=99.13750000000003)  [right. Now we get what looks like](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=102.20623076923076)  [something you'd use to compose an email.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=104.60076923076917)  [What we're going to do here is paste the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=106.94814285714284)  [JSON policy document into the policy](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=109.92071428571421)  [document section, and then we're going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=112.55463636363635)  [go ahead and name this policy](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=115.913875)  [RestrictAdmin. Then go ahead and click the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=119.48312500000002)  [Apply Policy button. And the new inline](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=123.27333333333337)  [policy we just created is applied to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=126.53007692307695)  [AWS- Administrators group, along with the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=129.84823076923078)  [AWS-Managed AdministratorAccess policy.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=133.778625)  [Now, check this out. On the left side](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=135.888)  [menu, click on Users. And let's jump back](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=140.12600000000006)  [over to Phil. Take a look at Phil here.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=143.47946153846158)  [Now look at this, Phil has no inherited](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=146.257)  [from the AWS-Administrators group, both](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=149.60536363636373)  [the AdministratorAccess and RestrictAdmin](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=152.1452857142857)  [policies, but he still has the inline](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=154.71385714285714)  [policy attached directly to his user. What](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=157.74450000000007)  [I want you to understand here is that the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=160.39683333333335)  [two RestrictAdmin policies are not the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=162.7713333333334)  [same policy. They have the same name, they](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=164.97427272727273)  [have the same content, but they are](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=168.31380000000001)  [different policies, one is an inline](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=171.16840000000008)  [policy attached to the user, the other is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=173.26571428571432)  [an inline policy attached to the group.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=175.82914285714295)  [So, as you can see, this has the potential](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=177.91000000000005)  [to get confusing. What we can do is remove](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=180.599)  [Phil's inline policy that we created](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=184.0639999999999)  [earlier. Just go ahead and click on the X](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=186.5232307692308)  [under the one attached to his user, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=190.324)  [then click Remove. And notice he still has](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=194.1501818181818)  [the two policies he's inherited from the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=196.99000000000004)  [group. SO now, if we want to add more](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=198.95700000000008)  [administrators, we can simply add them to the AWS-Administrators group.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=9&mode=live&start=201.86599999999993)

### [Summary](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live)

[Identity and access management is the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=1.361)  [foundation of AWS security. So we're going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=4.1450000000000005)  [to be seeing a lot more of it throughout](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=6.782071428571429)  [the course. What we've done so far is only](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=9.125285714285711)  [a small taste of what we will be doing](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=12.045444444444447)  [using IAM. Architecturing a secure AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=15.13044444444445)  [environment requires that you have a solid](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=17.45927272727273)  [understanding of IAM fundamentals, so](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=20.335)  [let's briefly review what those are.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=22.514545454545463)  [First, you always want to lockdown the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=25.13)  [root user by implementing multi-factor](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=27.72827272727272)  [authentication. You also want to avoid](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=29.6387)  [using the root user account for normal](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=32.192899999999995)  [administrative activities. Instead create](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=35.31800000000001)  [an IAM user and grant that user](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=37.1656)  [administrative permissions a policy, such](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=40.398199999999974)  [as the AWS Managed Administrator Access](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=43.12981818181818)  [Policy. The advantage of using AWS Managed](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=46.53454545454545)  [Policies is that they are provided by AWS,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=49.627)  [and they're updated as new services and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=53.13616666666667)  [operations are added. Speaking of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=56.58075)  [policies, a policy is a set of permission](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=59.10481818181819)  [statements. These are sometimes called](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=63.296090909090935)  [policy permissions. Each statement](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=65.52866666666667)  [contains at least four elements, the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=67.3338888888889)  [effect, which is allow or deny, the AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=70.18655555555559)  [service, the action or operation, which](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=73.6393333333333)  [depends on the service, and the resource,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=76.08833333333334)  [which is what the action acts upon. An](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=78.34466666666667)  [inline policy is a type of policy embedded](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=81.69033333333333)  [directly in a group or user. When an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=85.803)  [inline policy is embedded in a user, it's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=87.98699999999997)  [called a user policy, and when it's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=90.33000000000001)  [embedded in a group is called a group](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=92.79750000000006)  [policy. Another policy type we did not](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=95.5239230769231)  [look at is called a Customer Managed](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=97.77307692307699)  [Policy. It is just like an AWS manage](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=100.73433333333335)  [policy except you create it and you manage](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=104.729)  [it. It's a standalone policy that is not](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=107.71388888888892)  [an inline policy. It is not inherently](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=110.79040000000002)  [attached to any principal or group. With](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=113.56459999999998)  [Customer Managed Policies, you create the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=116.36281818181818)  [policy first and then you attach it to a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=118.6117272727273)  [principal or group. Again, it works just](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=121.3252307692308)  [the same as AWS Managed Policies, except](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=123.02515384615391)  [it's up to you to create and manage it.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=125.73039999999997)  [Now that we've got a couple of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=129.424)  [administrative users created, we want to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=131.78230000000008)  [keep track of what those new admins are](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=133.771)  [doing. In the next module, you're going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=136.37899999999993)  [learn how to capture logs from various AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=138.47923076923087)  [services and, perhaps more importantly,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=141.08120000000002)  [how to search and analyze those logs so](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=143.78420000000008)  [you can quickly find the information you're looking for. That's coming up next.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=90a90cf6-56db-4dcf-8895-e3c8ae046528&clip=10&mode=live&start=146.83009090909084)

## [Capturing and Analyzing Logs](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live)

### [Introduction to Capturing and Analyzing Logs](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live)

[Welcome back. In order know that you're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=0)  [effectively protecting your AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=4.052999999999999)  [environment and the data that it contains,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=6.125230769230769)  [you need some way of knowing what's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=8.471846153846153)  [happening in your environment. You need to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=11.016666666666666)  [have some way of verifying that your](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=13.557500000000001)  [security controls are working correctly](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=15.432333333333338)  [once you've set them up, and you also need](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=16.78792307692308)  [to keep track of changes that occur to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=19.247692307692315)  [your AWS resources. In this module, you're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=22.552)  [going to learn how to configure a few](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=25.152846153846156)  [different AWS services that give you a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=27.75653846153847)  [high level of visibility into the inner](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=30.36938461538461)  [workings of your AWS infrastructure. We'll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=33.038)  [start by logging in detail the individual](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=36.28490909090909)  [actions that take place against your AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=39.04927272727271)  [resources. To do this, we're going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=41.808909090909104)  [configure CloudTrain to capture every](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=44.565)  [event that occurs in our AWS environment](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=46.930909090909104)  [and store a record of those events in log](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=50.15345454545455)  [files. We'll then use CloudWatch Logs to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=53.60454545454548)  [browse and search those events. After](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=56.37436363636364)  [that, we'll set up CloudWatch Alarms to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=58.707499999999996)  [send us a notification whenever a change](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=61.11899999999997)  [takes place. We'll then look at how to use](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=63.667)  [Amazon Athena to search CloudTrail Logs](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=67.177)  [using SQL queries. And finally, we'll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=69.81387500000001)  [configure AWS Config, which is another](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=72.47845454545454)  [service that can help us keep track of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=75.1113636363636)  [configuration changes to our AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=78.05200000000002)  [environment and tell us exactly what](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=79.7711666666667)  [changed and when. Now, you might be](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=81.99884615384613)  [thinking that there's a lot of overlap](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=84.63623076923072)  [between these services. It sounds like](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=87.16900000000004)  [some of them do the same things, but as](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=88.94578571428572)  [you're going to see, each one is designed](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=91.04214285714288)  [for a slightly different use case. As an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=93.40950000000002)  [AWS architect, understanding the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=96.17633333333333)  [difference between these services is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=97.90699999999998)  [critical to ensuring that you select the right ones for your needs.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=0&mode=live&start=101.205)

### [Understanding CloudTrail](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live)

[CloudTrail can log most actions taken on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=1.124)  [resources in your AWS account. This](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=3.880833333333333)  [includes application programming](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=6.52075)  [interface, or API calls, actions from the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=8.533)  [AWS management console, and even actions](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=12.827300000000001)  [performed by other AWS services.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=16.049900000000004)  [CloudTrail logs these actions by default,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=18.426600000000004)  [but keeps that log only for a limited](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=21.186)  [period of time. If you want something more](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=24.372181818181808)  [permanent, you need to create what's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=27.213071428571432)  [called a trail. A trail can log two types](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=29.18835714285715)  [of events, management events or data](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=32.710307692307694)  [events. Management events are also called](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=35.244615384615386)  [control plane operations. These include](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=38.143875000000016)  [configuration changes to your AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=40.69625)  [services, such as creating VPCs and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=43.36187499999999)  [instances. Management events also include](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=46.5255)  [reading AWS resources. For example,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=49.156)  [enumerating a list of security groups, or](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=51.65950000000001)  [instances. Logging into the AWS web](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=55.137727272727275)  [console and assuming a role are also](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=58.06190909090911)  [management events. Data events include](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=61.67959999999999)  [object level access to S3, including gets,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=64.37409999999998)  [deletes, and puts. Data events also cover](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=68.30833333333335)  [lambda function executions. Now the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=72.1694285714286)  [difference between management events and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=74.44800000000001)  [data events is not very well defined, but](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=76.08800000000002)  [I'd say that data events generally are](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=78.90215384615382)  [high volume. For example, getting an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=81.530923076923)  [object from an S3 bucket is something that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=83.82766666666664)  [may happen multiple times a second. That](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=86.919)  [would be a data event. Contrast that with](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=89.3141666666667)  [logging into the management console, or](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=91.97736363636362)  [creating an EC2 instance, which you may do](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=93.88209090909085)  [only several times a day. Those would be](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=96.93554545454543)  [management events. So again, this isn't](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=100.1057)  [well-defined, but you kind of get the idea](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=102.41510000000001)  [here. Now, CloudTrail logs are stored in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=104.983125)  [S3, and S3 storage is not free. You have](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=107.6520769230769)  [to pay for it. Hints, you want to be](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=110.97364705882352)  [careful about how much you log. The more](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=113.54605882352934)  [you log, the more storage you're going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=115.93718181818181)  [consume, and the more you're going to pay.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=118.64190909090908)  [Therefore, you may want to limit how much](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=120.793)  [you log and how long you retain those](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=123.05790909090909)  [logs. Thankfully, CloudTrail lets you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=125.90154545454548)  [choose exactly which types of events to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=127.95966666666669)  [log. In the next clip, we're going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=130.9393333333334)  [configure CloudTrail, and I'll show you how all of this works.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=1&mode=live&start=133.13950000000003)

### [Configuring CloudTrail to Log AWS Service Operations](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live)

[In this demo, we're going to start by](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=0.939)  [looking at the events CloudTrail logs by](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=3.1316153846153836)  [default so that you can get familiar with](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=5.34523076923077)  [the log format CloudTrail uses to store](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=8.718153846153848)  [events. After that, we're going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=11.331)  [configure CloudTrail to log all management](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=13.352999999999998)  [write events. What is a write? Well,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=16.48)  [basically it's a change to an AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=19.228307692307684)  [resource. The idea here is that if](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=21.51353846153844)  [something changes, we want to know about](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=23.68285714285714)  [it. Sound good? Let's jump right in! Let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=25.83285714285714)  [start at the AWS console homepage, and in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=29.47153846153846)  [the search box we'll search for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=32.73984615384616)  [cloudtrail. You should get one result,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=35.10454545454545)  [Track User Activity and API Usage. The](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=37.2961818181818)  [purpose of CloudTrail is to track](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=40.28181818181819)  [activities, specifically actions or](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=43.11654545454547)  [operations that a principal takes on an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=45.098499999999994)  [AWS resource. Let's go ahead and click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=48.62066666666665)  [cloudtrail. And welcome to CloudTrail! The](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=52.137499999999996)  [first thing you may notice is the recent](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=55.01372727272727)  [events section. CloudTrail automatically](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=57.93954545454543)  [keeps a record of all management events](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=59.525)  [that occurred on your account within the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=62.513999999999996)  [last 90 days as of this recording. At the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=64.83976923076924)  [bottom left, let's click on View all](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=67.93757142857143)  [events, and here you can easily search for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=71.02657142857142)  [whatever you may be looking for. Next to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=74.51500000000001)  [the filter, click the dropdown that says](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=78.24281818181818)  [select attribute. Here you can choose to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=82.31618181818183)  [search by user name, event name, resource](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=85.3026923076923)  [type, or name, and so on. Think back to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=87.8544615384615)  [earlier when we looked at the events of an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=90.50128571428576)  [IAM policy statement. Those include](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=93.97940000000001)  [service, action, which is sometimes called](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=96.92340000000004)  [an operation, and resource. Now here event](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=99.70100000000002)  [name is actually the same thing as action](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=102.47330769230771)  [or operation. So far, we've only been](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=105.59946153846161)  [dealing with the IAM service, so let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=108.26407692307696)  [suppose that you want to find out all](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=110.9003846153847)  [events related to IAM. What you can do is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=113.986)  [click on event name, and then immediately](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=117.74649999999998)  [to the right click in the text box that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=120.84399999999995)  [says Enter event name, and you get an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=125.11653333333338)  [enormous list of actions for every AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=128.988)  [service. This is not very helpful unless](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=132.25175000000002)  [you already know at least part of the name](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=134.73871428571434)  [of the action you're looking for. But you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=137.72114285714287)  [can often take a wild guess and still be](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=140.02628571428585)  [right. For example, let's type in policy.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=143.13172727272732)  [Recall that earlier we did a lot of work](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=146.045)  [with attaching policies to IAM users. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=149.04440000000005)  [lo and behold, there is an action here](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=151.48127272727274)  [called AttachUserPolicy. Let's go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=154.97945454545456)  [and click on AttachUserPolicy. We've got](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=158.17171428571433)  [an entry that shows the root user](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=162.077)  [principal perform the AttachUserPolicy](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=164.9295)  [action, and if I scroll to the right, we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=166.5873076923077)  [can see that the root user performed this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=170.505076923077)  [action on the IAM user Ben and 1 other](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=173.797)  [resource. Let's go ahead and click on this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=177.37179999999998)  [event, and then let's scroll back to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=179.489)  [left here, and look at all the information](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=181.47733333333335)  [you get here. It shows the region, the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=183.6240000000001)  [source IP address, and of course, the date](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=186.6144545454545)  [and time of the event. And if we scroll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=189.79593333333335)  [down until we see resources referenced, we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=192.31113333333346)  [can see the resources on which the root](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=194.82674999999998)  [user performed the attached user policy.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=198.55408333333324)  [Now remember from earlier that when I was](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=201.3315)  [logged in as root, I created a user for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=204.33450000000002)  [myself and gave it the user name Ben. I](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=206.40900000000008)  [then attached the administrator access](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=209.59724999999997)  [policy to that user, and that is what this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=211.86349999999996)  [event shows. The IAM user and the policy](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=214.96255555555547)  [are both resources. Specifically, they are](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=218.9276666666667)  [IAM resources. Hints, they're both listed](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=221.7906666666667)  [under the resources referenced. So if you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=224.178)  [understand that, you understand what](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=227.50844444444445)  [CloudTrail actually logs. Now let's scroll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=229.8515)  [back up to the top, please. Look at the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=232.79300000000003)  [very top where it says create a trail.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=236.5756363636364)  [With a trail you can retain a record of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=238.396)  [events, create metrics, trigger alerts,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=241.05325000000008)  [run advanced queries, and so on. Now if](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=242.691)  [you want to do anything beyond just](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=245.5820769230769)  [browsing through 90 days of CloudTrail](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=247.80484615384603)  [events, you'll have to create a trail.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=249.64277777777778)  [Let's go ahead and do that. At the right,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=251.63)  [click on the Create trail button. When](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=254.9972)  [creating a trail, you need to have a clear](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=257.55057142857146)  [idea of exactly what you want to log. The](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=260.3277142857144)  [first thing it asks you do is give the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=262.7878823529413)  [trail a name. The name you choose should](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=264.9944705882357)  [be something descriptive. In this case, we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=267.48000000000013)  [want to log all writes; that is, all](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=269.72428571428577)  [actions that make any changes to our AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=272.11285714285737)  [infrastructure. So here in the trail name](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=275.1177142857144)  [box, I'm going to name this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=278.6620769230768)  [management-events-writes. Now we can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=281.80515384615364)  [choose whether to log events in all](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=283.2480714285715)  [regions or just the currently selected](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=285.39257142857167)  [region, which is northern Virginia,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=287.66575)  [us-east-1. We'll stick with all regions](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=290.2851249999999)  [here. And under management events, let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=293.0435000000001)  [select write-only. And you may be](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=295.7379090909091)  [wondering why there's an option for none](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=298.4973636363637)  [here. You would select none if you don't](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=301.3640714285715)  [want to log any management events. Now if](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=304.10292857142883)  [you don't log management events, what else](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=307.0945)  [is there? Well, let's scroll down three](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=309.8196)  [clicks. You can log data events. Data](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=312.4816999999998)  [events can log S3 and lambda actions, such](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=315.6852307692308)  [as creating or deleting an S3 object. If](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=319.265125)  [we click on the Lambda tab, you can also](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=321.64947058823526)  [log every invocation of a lambda function.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=325.08270588235285)  [So as you can imagine, tracking data](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=327.753)  [events can result in a huge amount of data](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=330.00592307692295)  [being logged. We're not going to log any](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=332.87369230769235)  [data events, but if you want to, it is as](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=335.3715384615386)  [simple as checking the appropriate box](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=338.39314285714306)  [under the Lambda or S3 tabs. All right,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=340.191)  [let's scroll down three more clicks. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=343.6664285714284)  [finally, we get to choose where to store](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=346.60427272727276)  [this CloudTrail. We're going to store it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=349.2544545454546)  [in an S3 bucket, and since we don't](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=351.10628571428566)  [already have one created, we will leave](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=353.00914285714276)  [the Create a new S3 bucket option set to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=355.44937499999986)  [Yes. Now when it comes to naming the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=358.75293749999963)  [bucket, keep in mind that you can have](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=360.9275000000001)  [multiple trails going into a single](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=363.0665)  [bucket. Also remember that S3 bucket names](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=365.05550000000005)  [must be globally unique, so I'm going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=368.66120000000006)  [make mine hopefully unique, I'm going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=372.74085714285724)  [name it benpiper-trails. Now, let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=376.0603571428574)  [ahead and expand the Advanced section.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=378.74499999999995)  [Scroll down a bit. In the log file prefix](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=381.269)  [field, we can specify a prefix to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=384.21328571428575)  [distinguish different trails in the same](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=386.7916666666667)  [bucket. Here I'm going to name this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=389.6196666666668)  [management-writes, move my mouse out of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=392.6305)  [the way there, and I'm naming it this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=395.17)  [because we are logging only](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=397.58846153846156)  [management-write events. The log file](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=399.1)  [prefix does not have to be globally](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=401.114090909091)  [unique, so you can actually make this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=403.8595384615385)  [pretty much whatever you want. Next we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=406.1593076923078)  [have the option to encrypt log files,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=408.32871428571434)  [which we are going to say no to for the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=410.17221428571446)  [time being because we're going to get into](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=412.72438461538457)  [encryption later on when we discuss](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=414.701)  [protecting data at rest. For enable log](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=418.1342000000001)  [file validation, we'll leave that set to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=421.6478181818182)  [yes. What this does is it causes](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=424.5057272727273)  [CloudTrail to create a cryptographic hash](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=426.71890909090894)  [of each log file it creates, and it stores](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=428.5641875)  [those hashes in a separate file. The](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=431.6348749999999)  [purpose of this is so that you can tell](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=433.92764705882354)  [whether a log file has been modified.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=436.13847058823524)  [Next, we can choose to generate an SNS, or](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=437.858)  [simple notification service notification](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=442.2957500000001)  [every time a new log file is delivered to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=444.0783846153846)  [the S3 bucket. This is useful if we want](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=446.8088461538463)  [to perform some sort of automated task on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=449.15214285714274)  [each log as it's delivered. For example,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=451.063)  [if you have a security and information](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=454.1769230769229)  [event management, or SIEM solution, that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=457.20154545454545)  [you want to use to analyze those logs, you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=459.33481818181815)  [could create a lambda function to do that,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=462.71315384615394)  [and then set up SNS to trigger that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=465.843)  [function every time there is a new log. We](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=468.1670000000001)  [are going to leave this set to no, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=470.74559999999997)  [then finally at the bottom, let's click on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=473.0369999999998)  [Create. And there we go, we've got one](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=475.86999999999995)  [trail. Now, under S3 bucket, go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=480.0299999999998)  [click on the bucket name, and CloudTrail](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=483.6556666666667)  [takes us straight to the S3 bucket and the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=486.47646153846154)  [folder where it will store the logs. Right](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=489.18753846153834)  [now there's nothing here. It can take up](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=492.055)  [to 15 minutes between the time an action](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=494.68442857142867)  [is performed and when the log file](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=496.923285714286)  [actually gets created in the bucket. So](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=498.94618181818174)  [don't expect to see anything here for at least about 15 minutes.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=2&mode=live&start=501.702)

### [CloudTrail vs. CloudWatch Logs](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live)

[All right, now that we've got CloudTrail](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=0.33)  [set up, we need a way to view the logs](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=2.1325000000000003)  [that it generates. Obviously we could just](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=5.121636363636364)  [download the logs from the S3 bucket once](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=7.890454545454548)  [they show up there. After all, they are](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=10.752545454545452)  [just text files. But CloudTrail generates](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=13.968799999999998)  [multiple files, so unless you know which](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=16.679)  [file has the information you're looking](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=19.284909090909082)  [for, downloading the logs from S3 just](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=21.59290909090909)  [isn't practical. So we need a better way.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=24.459090909090897)  [That is where CloudWatch comes in. People](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=27.42049999999999)  [often ask what is the difference between](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=29.994)  [CloudTrail and CloudWatch Logs? Well,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=33.010999999999996)  [CloudTrail logs actions in AWS and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=35.24514285714286)  [delivers those logs to an S3 bucket.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=38.30600000000002)  [CloudWatch Logs is a service that can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=41.877)  [aggregate log files from multiple sources,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=44.99327272727271)  [including CloudTrail, but also including](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=48.08266666666667)  [non-AWS sources. If you have an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=51.35433333333334)  [application that generates log files, such](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=53.910076923076915)  [as a web server like Apache or NGINX, you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=55.78069230769229)  [can dump those files into CloudWatch Logs.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=59.71046153846152)  [You can then use CloudWatch Logs to view](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=63.204)  [and search through all of those logs. This](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=65.47706666666664)  [lets you correlate your application logs](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=67.87445454545454)  [with your CloudTrail logs. In other words,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=70.32518181818182)  [CloudWatch Logs is a one-stop-shop for all](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=73.09992307692309)  [of your logs. This is great, not just for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=75.76207692307696)  [security, but troubleshooting as well. To](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=78.88790909090913)  [be able to view and search CloudTrail Logs](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=80.93658333333333)  [using CloudWatch Logs, we need to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=84.09324999999997)  [configure CloudTrail to deliver our logs](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=86.84125)  [to CloudWatch Logs. First, in CloudTrail](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=89.96975)  [logs, we need to create a log group. A log](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=92.74327272727272)  [group is nothing more than a container](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=96.50813333333333)  [that helps you organize the logs. Think of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=98.39859999999999)  [it as a folder. If you've got different](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=100.59228571428571)  [logs that are all related, you can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=102.88542857142852)  [aggregate those logs into the same log](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=104.96799999999999)  [group. Next, we're going to create an IAM](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=107.15199999999997)  [role for CloudTrail to use. Before I](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=110.41975000000004)  [explain this, let me warn you that what](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=113.03073333333333)  [I'm about to say is probably going to be a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=115.02966666666663)  [little confusing, but once we get into the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=117.83130769230769)  [demos, it will start to make a lot more](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=120.315)  [sense. Remember that an IAM role is a type](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=122.28420000000001)  [of principal. It usually represents an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=125.13899999999997)  [application or service. In this case, the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=127.53171428571426)  [role we're going to create will be for the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=130.22799999999995)  [CloudTrail service. This is called a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=133.36899999999986)  [service role. Attached to the service role](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=135.5146666666667)  [we'll create an inline policy that will](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=138.0480833333334)  [allow access to CloudWatch Logs. Also](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=141.0652727272728)  [attached to this role will be something](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=143.61175)  [called a trust policy, which allows](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=145.94800000000006)  [CloudTrail to assume this role. Why are we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=148.35671428571428)  [doing all this? Quite simply, the purpose](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=151.98369230769228)  [is to allow CloudTrail to send logs to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=154.1833076923076)  [CloudWatch Logs. Another way of thinking](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=158.21242857142857)  [about it is that we're creating an IAM](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=160.51200000000006)  [principal for CloudTrail to use to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=162.642)  [authenticate the CloudWatch Logs. Again,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=165.25860000000006)  [don't be concerned if that doesn't make](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=167.33008333333333)  [much sense because we are going to go over](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=169.61966666666677)  [all of this again when we configure](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=172.57261538461537)  [CloudWatch Logs, which happens to be right now.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=3&mode=live&start=174.8750769230769)

### [Configuring CloudWatch Logs](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live)

[In what promises to be an exciting demo,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=1.105)  [we are going to configure CloudTrail to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=3.5154615384615395)  [send trail logs to the CloudWatch Logs](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=5.9872)  [service. First, we'll create a log group](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=9.365399999999998)  [in CloudWatch Logs, and then we'll create](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=11.679)  [an IAM role for CloudTrail to use to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=14.019866666666667)  [deliver those logs into CloudWatch Logs.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=18.098800000000004)  [Once CloudTrail begins to deliver those](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=21.158)  [logs, we'll jump over to CloudWatch Logs](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=23.193090909090905)  [and look at how to browse and search](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=25.587666666666667)  [through them. That's a lot of cloud and a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=28.38233333333334)  [lot of logs, so let's jump right over to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=31.226266666666657)  [the CloudWatch dashboard. All right, if](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=34.29025)  [you're not already there, please make your](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=36.77523076923078)  [way on over to the CloudWatch dashboard.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=38.287769230769264)  [What we want to configure is a feature of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=40.42533333333333)  [CloudWatch called CloudWatch Logs. On the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=43.807700000000004)  [left side menu, please click on Logs. Like](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=46.22990000000001)  [I said, CloudWatch Logs are organized by](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=50.09141666666665)  [log groups, so please click the Create log](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=53.802)  [group button. And just as with CloudTrail](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=59.234799999999986)  [names, you want to make your CloudWatch](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=62.43258333333333)  [log groups descriptive. I'm just going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=65.008)  [name this one CloudTrail and then /logs to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=68.83827272727268)  [indicate that this group is going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=72.82006666666668)  [receive our CloudTrail logs. Next I'm](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=75.95793333333336)  [going to click Create log group. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=79.04750000000001)  [here's the group. Next, we need to jump](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=83.58525000000004)  [back over to CloudTrail and instruct it to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=87.14307692307695)  [deliver logs to this log group that we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=89.724)  [just created. So let's go up to Services,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=92.77119999999998)  [and then click on CloudTrail. Now over](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=98.03845454545454)  [here in CloudTrail, we want to click on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=102.53800000000001)  [Trails on the left side menu. And then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=105.51800000000003)  [click on the name of the trail that we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=108.19530769230768)  [created earlier, which was](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=110.18569230769224)  [management-events-writes. Now, let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=112.51222222222223)  [please scroll all the way down to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=115.33855555555559)  [bottom until you see CloudWatch Logs. Go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=120.61339999999998)  [ahead and click the Configure button, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=123.39478571428572)  [it prompts us to enter a new or existing](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=127.0472857142857)  [log group name. We've already created a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=131.20350000000002)  [log group called CloudTrail/Logs, so let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=133.5963333333334)  [go ahead and backspace over this default](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=136.17480000000003)  [log group, and we're just going to put in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=139.51736363636363)  [logs. Now let's go ahead and click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=144.0206363636363)  [Continue. We now get a rather cryptic](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=146.3966923076923)  [message saying in order to deliver](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=148.585)  [CloudTrail events to your CloudWatch Logs](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=150.92499999999995)  [log group, CloudTrail will assume the role](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=153.2268181818182)  [you are creating or specifying. Hmm, okay.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=155.82318181818187)  [Recall from our earlier discussion on IAM](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=158.5911111111111)  [principals that a principal can be a user](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=161.3404285714286)  [or a role. Let's go ahead and expand the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=164.34957142857152)  [View Details section. Now, recall also](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=168.48599999999993)  [that a role is generally going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=171.31675)  [represent an application, or in this case,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=174.41250000000002)  [another AWS service, namely CloudTrail. So](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=177.52850000000004)  [let's go ahead and expand where it says](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=180.25841666666665)  [View Policy Document. And then let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=184.2457499999999)  [scroll down until we can see the first](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=186.68725)  [statement. There it is. The first](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=189.21058333333332)  [statement grants access to create](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=192.30190909090905)  [something called a log stream in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=195.0778181818181)  [CloudWatch. Now, that's totally not](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=197.77981818181817)  [obvious, but if you look at the action,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=199.92663636363633)  [the logs is actually a reference to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=202.2709999999999)  [CloudWatch Logs, and the CreateLogStream](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=204.186)  [action is pretty self-explanatory, create](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=206.36100000000002)  [a log stream. Now, the resource indicates](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=208.74377777777778)  [the log stream should be created within](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=212.516)  [the log group that we created a moment](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=214.93476923076926)  [ago, which as you remember is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=217.96155555555558)  [CloudTrail/logs. Let's go ahead and scroll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=220.82222222222228)  [down a little bit more and take a look at](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=222.74966666666666)  [the next statement. By the way, if you're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=225.651)  [wondering about the sid here, this is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=228.4256666666667)  [called a statement ID. It's nothing more](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=230.4951538461538)  [than a unique identifier for a policy](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=232.08684615384607)  [statement. It's completely optional, but](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=234.712)  [if you have a large policy document, it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=236.906125)  [can be helpful to keep things organized.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=238.91512500000002)  [Anyway, this statement grants access to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=240.673)  [deliver logs to the CloudWatch Logs log](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=244.6035454545455)  [stream. If I go down one more, you can see](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=248.2578)  [a reference to the log stream right there.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=250.15180000000007)  [Now I've used the term log stream a couple](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=252.25153846153842)  [of times, and I haven't explained what it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=254.95759999999999)  [is. Basically it's where CloudWatch Logs](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=257.00239999999997)  [stores the logs. CloudTrail is streaming,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=259.8217499999999)  [if you will, those logs into CloudWatch](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=262.9080000000001)  [Logs. So CloudWatch Logs calls that a log](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=266.5200000000002)  [stream. Anyway, here is what I want you to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=269.83950000000016)  [remember from all this. What we're doing](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=272.2846666666667)  [here is creating a role. A role is a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=274.5311875000001)  [prepackaged set of permissions. But what](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=278.20375000000035)  [makes a role unique is that a service can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=280.6035714285714)  [assume a role. This means that CloudTrail](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=284.05764285714264)  [can assume or take on this role and get](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=286.60838461538464)  [these permissions listed in this policy](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=289.757)  [document right here. Again, I know this is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=292.5036666666667)  [all kind of hard to follow, so let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=295.1343333333333)  [ahead and finish creating this role so we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=297.39753333333323)  [can look at it. On the bottom right, let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=299.0852727272727)  [click the Allow button. This will actually](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=302.24211111111117)  [create the role. All right, and now let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=305.0297499999999)  [scroll down to the very bottom. And under](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=307.47974999999974)  [CloudWatch Logs we see that CloudTrail is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=310.8718333333333)  [going to deliver logs to CloudWatchLogs to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=313.95383333333336)  [the log group named CloudTrail/logs. Now,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=317.02625000000006)  [getting back to the IAM role. It's listed](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=320.20400000000006)  [here under this long name, which I am not](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=324.51342857142856)  [going to read, but keep that name in mind,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=327.1568571428569)  [and let's jump over to IAM. We'll go up to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=330.25800000000004)  [Services, and on the left I'll just click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=334.1533846153847)  [IAM. Now over on the left side menu,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=337.5041538461541)  [please click on Roles, and that's Roles,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=341.6514545454545)  [not the kind of rolls you eat, and let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=344.57678571428573)  [scroll down to the bottom, and there is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=346.961142857143)  [the role we just created. Let's go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=349.72300000000007)  [and click on that. Notice that we have an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=352.80319999999995)  [inline policy attached. And you already](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=356.4637999999997)  [know exactly what this policy is because](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=358.67025000000007)  [we just looked at it. Now let's click on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=360.97150000000016)  [the Trust relationships tab, which my](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=363.8696363636362)  [mouse is covering, but it's that second](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=365.9038461538462)  [tab from the left, and it tells us that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=368.54230769230793)  [the identity provider cloudtrail.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=372.3222727272728)  [amazonaws. com can assume this role.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=374.140090909091)  [CloudTrail can assume, or take on, this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=376.74284615384613)  [role in order to gain access to our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=379.7070769230769)  [CloudWatch Logs log group in order to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=383.0084615384617)  [deliver trail logs to that log group. Now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=385.872)  [to get a better idea of what's going on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=387.782857142857)  [here, let's click the Edit trust](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=390.8714545454546)  [relationship button. Oh, and here is yet](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=394.18236363636373)  [another policy document. Now this document](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=397.0291249999999)  [defines who may assume this role. Notice](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=399.30733333333325)  [that it includes a new element, the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=402.1635)  [Principal element. Nested under the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=404.90400000000005)  [Principal element is the word Service,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=406.8683333333333)  [followed by cloudtrail. amazonaws. com.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=409.231)  [This principal here is actually called a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=411.72850000000005)  [Service principal because it represents a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=415.3474545454545)  [service, namely CloudTrail. Under the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=418.7118181818181)  [action, we have sts:AssumeRole. STS stands](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=421.4574)  [for Security Token Service, which is an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=424.6476)  [AWS service related to IAM that can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=428.18391666666656)  [actually generate temporary credentials.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=431.646)  [The action AssumeRole causes STS to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=434.147)  [generate and then return temporary](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=437.5905)  [credentials to the CloudTrail service.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=439.94675)  [CloudTrail can then take those credentials](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=442.303)  [and use them to authenticate to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=444.18219999999997)  [CloudWatch, so that it can deliver the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=446.3848)  [logs. In other words, assuming a role](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=449.7090999999999)  [simply means getting a set of temporary](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=452.10614285714274)  [credentials. What you can do with those](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=454.3486428571426)  [temporary credentials is determined by the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=457.10299999999995)  [policy attached to the role. Let's click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=459.537)  [Cancel, and then back over to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=462.19466666666654)  [Permissions tab, and let's expand this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=465.4657272727273)  [policy, scroll down. Again, CloudTrail can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=469.5839090909091)  [assume this role. That is, it can grab a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=472.40457142857144)  [set of temporary credentials and then it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=474.68928571428586)  [can use those credentials to do whatever](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=476.7301818181818)  [we allow using this inline policy that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=478.9093846153846)  [we're looking at right here. Again, this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=481.28507692307704)  [is the policy summary, what we just saw a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=483.7238571428572)  [few moments ago was the JSON policy](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=487.0622142857144)  [document. The policy summary is a much](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=489.51566666666673)  [more user-friendly version. All right,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=491.8618333333335)  [does that make sense? I know there is a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=494.0334999999999)  [lot to digest there, but the good news is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=496.98062500000003)  [that we are done setting up CloudWatch](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=498.9797500000001)  [Logs, and so now we can sit back and enjoy the fruits of our labor.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=4&mode=live&start=501.24292857142854)

### [Reading CloudTrail Logs Using CloudWatch Logs](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live)

[Now that CloudTrail is delivering our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=1.815)  [trail logs to CloudWatch Logs, we should](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=4.367181818181818)  [be able to browse and search through those](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=7.071999999999999)  [logs easily using the CloudWatch Logs web](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=9.383999999999997)  [interface. Here we can see the log group](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=11.454733333333332)  [we created earlier. Let's go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=13.862199999999996)  [click on it. And there's the log stream](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=16.938599999999997)  [that CloudTrail created. It was able to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=21.285799999999984)  [create this stream by assuming the role](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=23.929999999999996)  [that we created for it. Let's go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=25.70449999999999)  [click the Log Stream name. And look at](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=28.81111111111111)  [this, we've got some log entries. Let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=32.08566666666667)  [ahead and click in the filter events](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=34.899153846153844)  [search box and let's search for something](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=37.9166923076923)  [interesting. Let's type in role-- again,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=41.157875000000004)  [not the kind of roll you eat-- and hit](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=44.091181818181816)  [Enter. Now let's locate the one that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=47.73781818181816)  [references CloudTrail and then go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=50.61457142857141)  [expand that. Now there is a lot of data](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=53.08614285714282)  [here, but what we're chiefly interested in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=56.080999999999996)  [is who did what. The principal ID is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=58.252)  [listed as a long string beginning with](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=61.800307692307676)  [AROA followed by a colon and CloudTrail.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=65.03733333333332)  [That long string is a unique principal ID](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=68.605)  [generated by IAM. Specifically, it's a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=72.16354545454543)  [role principal. Remember that a principal](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=74.43236363636366)  [can be a user or a role. Moving down a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=76.30109090909097)  [bit, you can see that there is an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=79.79647058823528)  [accessKeyId. That long string is an access](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=82.66894117647055)  [key. In fact, this is a temporary access](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=84.96369230769234)  [key generated by STS. And it was generated](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=87.71218181818182)  [when CloudTrail assumed the role that we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=91.63363636363641)  [created for it. Let's scroll down a bit](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=94.87328571428569)  [more until you see the eventSource logs.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=98.48814285714278)  [amazonaws. com, which is the endpoint for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=102.66654545454546)  [CloudWatch logs. One line down from that,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=106.53133333333334)  [the event name is CreateLogStream. So what](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=109.189)  [we can gather from this is that CloudTrail](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=111.86254545454548)  [assumed a role and used it to create a log](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=114.90607142857144)  [stream in the CloudWatch Logs service. Now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=118.48678571428579)  [if you want to get a little more advanced,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=121.02200000000002)  [you can search by specific log elements.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=124.3255)  [For example, let's say we want to see](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=126.996)  [every action taken on the CloudWatch Log](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=129.5018461538461)  [service. Up in the search box, let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=131.54550000000003)  [ahead and click in here, backspace over](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=133.45550000000011)  [this, { $. eventSource = logs. amazonaws.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=138.55415384615387)  [com and then }. CloudTrail Logs are stored](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=145.0237692307693)  [in JSON format, just like IAM policy](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=150.31599999999997)  [documents. The syntax here is specific to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=153.77257142857138)  [the JSON format. The dollar sign indicates](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=156.54557142857132)  [the root of the JSON document, and event](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=159.2816)  [source is the property that we want to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=162.20983333333334)  [search on. So this $. eventSource string](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=164.63716666666664)  [is called a property selector. Let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=167.80450000000002)  [ahead and hit Enter. And we have three](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=171.20383333333336)  [events here, including the one we were](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=174.55916666666678)  [just looking at. So if I expand this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=176.5819285714285)  [again, scroll down, you can, of course,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=178.47621428571412)  [see that the event source matches. So, the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=181.06300000000007)  [search function works pretty well. Let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=184.0851818181818)  [take another example. Suppose we want to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=186.1017272727272)  [find all events that were executed by a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=188.43861538461545)  [principal that assumed an IAM role. For](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=191.0958461538463)  [that, we can go up here, I'll just clear](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=193.66750000000008)  [all this out, and we can do { $.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=198.29100000000003)  [userIdentity. type = AssumedRole, and then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=205.44300000000007)  [}. Now if I scroll up just a little bit](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=209.00685714285717)  [right here, you can of course see under](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=212.93971428571442)  [userIdentity there is a type and it says](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=217.04149999999996)  [AssumedRole. So let's search on this, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=221.2221)  [of course, we get only one entry, which](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=224.5268000000001)  [again, is the same entry we were just](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=226.99875000000003)  [looking at. The point here is that there](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=229.03575000000006)  [are multiple ways to locate the data that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=231.77228571428563)  [you're searching for. All you have to do](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=234.742)  [is look at the structure of the JSON](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=236.65571428571437)  [document and find the property that you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=238.54761538461537)  [want to search on, so that should give you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=240.14576923076913)  [a pretty good idea of how to read and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=242.2657857142857)  [understand your CloudTrail Logs using CloudWatch Logs.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=5&mode=live&start=244.438)

### [Creating CloudWatch Alarms](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live)

[In this next demo, we will set up a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=1.228)  [CloudWatch alarm to trigger if CloudTrail](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=4.211500000000001)  [logs a management event. Remember that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=6.3616)  [CloudTrail is only logging changes, so](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=9.3172)  [these events should be few and far](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=11.93118181818182)  [between. Let's jump on over to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=14.582272727272732)  [CloudWatch dashboard. At the CloudWatch](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=17.565750000000005)  [dashboard on the left side menu, click on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=19.50025)  [alarms to get to this screen that you're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=22.343583333333335)  [looking at right here. Once you're here,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=25.04463636363636)  [up at the top left, click on the Create](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=27.83721428571429)  [Alarm button. And you're presented with](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=32.19385714285715)  [several metrics, which you can choose to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=34.864769230769234)  [alert on. Other than IAM CloudTrail and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=37.844615384615395)  [CloudWatch, we have not configured much of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=40.72372727272727)  [anything, so there aren't a whole lot of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=43.45276923076923)  [metrics to choose from, but under the Logs](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=45.81892307692308)  [Metric section, we have Log Group Metrics.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=49.01218181818182)  [Logs, as you might have guessed, is a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=52.53)  [reference to CloudWatch Logs. So, let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=55.323999999999984)  [ahead and click on Log Group Metrics. In](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=58.76219999999999)  [the top section, there is a list of Log](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=63.77453333333333)  [Group Metrics that we can choose, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=66.02033333333333)  [there we've got two metrics for our log](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=67.96883333333332)  [group named CloudTrail/logs. Let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=70.7721666666666)  [ahead and click the checkbox next to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=73.50672727272729)  [incomingLogEvents. Right there. This](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=78.25209090909097)  [metric measures the number of individual](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=80.36730000000001)  [events that are delivered to the log](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=83.24190000000003)  [group. Now down in the bottom section, we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=85.65853846153846)  [can play around with the graph to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=88.19253846153846)  [visualize how many log events were](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=90.10730769230771)  [delivered within a given time period. For](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=91.84899999999999)  [example, under Time Range, let's change](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=94.48338461538462)  [the from value to 1 hour ago, and then hit](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=96.82569230769234)  [Update Graph. And it plots the number of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=101.51969230769231)  [log events, which is along the Y axis](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=106.22307692307692)  [against the time, which is along the X](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=109.52174999999997)  [axis. This looks pretty good. Let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=112.61974999999993)  [ahead and click Next. Here we have to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=115.632)  [specify the details of the alarm,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=118.44639999999998)  [including the conditions that will trigger](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=120.043)  [it. We're going to go ahead and name this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=122.36585714285718)  [one Write access alarm. Underneath that,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=126.99166666666663)  [look where it says whenever](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=130.24588888888889)  [IncomingLogEvents is and so on, go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=133.08311111111112)  [and change that 0 to a 1, 0 to 1, right](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=135.98711764705877)  [there. So this way it reads whenever](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=139.87917647058808)  [IncomingLogEvents is greater than or equal](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=143.1430000000001)  [to 1 for 1 out of 1 datapoints. Now, what](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=145.91275000000002)  [on earth does that mean? Well, basically](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=149.36025000000006)  [it just means we're going to trigger this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=151.72266666666667)  [alarm when the number of incoming log](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=154.27733333333333)  [events is greater than or equal to 1](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=156.93635714285713)  [within a given time period. Now the word](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=160.16892857142855)  [datapoints there actually refers to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=163.05508333333327)  [number of periods. What is the period?](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=165.18200000000002)  [Well, look down in the bottom right](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=167.66)  [corner. The period is set to 5 minutes.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=169.7016666666666)  [Let's go ahead and click this dropdown.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=172.035)  [All right, so the period is currently set](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=173.9906923076924)  [to 5 minutes. Let's go ahead and change](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=176.33857142857144)  [this to 1 minute. Right there. Okay, so to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=179.0248571428572)  [translate this, whenever the number of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=182.75209090909087)  [IncomingLogEvents is at least 1 within a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=185.613)  [1-minute period, then we'll trigger the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=189.39533333333335)  [alarm All right, let's scroll down to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=191.7563076923077)  [bottom. And next we need to decide how to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=194.3169230769231)  [treat so-called missing data. Now here's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=197.67899999999992)  [what missing data means. Our time period](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=199.99527272727272)  [is 1-minute. If that period elapses with](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=202.77872727272728)  [no data from the metric, which is the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=205.09746153846154)  [IncomingLogEvents metric, then CloudWatch](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=207.535)  [assumes that there is some missing data.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=209.59354545454542)  [Now that's not accurate in this case,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=213.196)  [because if there are no log events for a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=215.185076923077)  [given period, then there are no log](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=217.59663636363632)  [events, nothing is really missing. It's a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=219.24545454545444)  [normal condition. So, let's change this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=221.74525)  [here to good (not breaching threshold).](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=224.6612)  [This way if there are no IncomingLogEvents](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=227.903)  [in a given time period, this alarm will](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=230.29408333333342)  [not get triggered. Moving down a bit, look](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=233.26615384615388)  [under actions. We can optionally configure](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=236.63723076923088)  [CloudWatch to send an email whenever the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=238.9807272727273)  [alarm gets triggered. We'll go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=241.607)  [click on New List, and the UI is a little](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=245.77900000000002)  [bit ambiguous here, it says Send](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=249.5536153846154)  [notification to, but then in the box it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=250.94423076923078)  [says Enter a topic name. So here we're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=253.21474999999992)  [going to type IncomingLogEvents-alerts.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=258.1985714285714)  [We'll just make it singular, it's just one](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=262.902)  [alert. And then in the email list field,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=264.7980000000002)  [I'm going to put logalert@benpiper. com.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=268.22107692307696)  [You, of course, will put whatever email](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=270.952)  [you would like to put there. And this all](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=272.87538461538446)  [looks good. Let's go ahead and click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=275.998)  [Create Alarm. And I get an overlay telling](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=279.4373333333333)  [me to confirm my email address. Okay, I](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=282.18200000000013)  [will do it later. I probably won't do it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=284.59242857142857)  [at all, honestly. And initially the alarm](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=287.51035714285706)  [is in an insufficient data status because](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=290.3086666666666)  [the first 1-minute period has not yet](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=293.5035833333332)  [elapsed. We have to wait at least 1 minute](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=295.8740000000001)  [until this alarm will go into either an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=298.5433999999998)  [alarm status or an OK status. Alarmt, bad,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=301.05333333333334)  [OK is good, as I'm sure you figured out.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=304.6799999999999)  [Now while we're waiting, let me ask you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=308.13649999999996)  [something. Once the initial 1-minute](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=310.1004999999999)  [period is up, what status will this alarm](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=311.90428571428583)  [be in? Now think about what we're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=315.0208571428575)  [monitoring here. CloudWatch is going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=317.2871428571428)  [alert on any CloudTrail Log event. But](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=319.71199999999993)  [what are we logging? We're only logging](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=322.8425555555556)  [changes. By creating this alarm, we made a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=325.54144444444466)  [change, and that change got logged by](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=328.4173846153846)  [CloudTrail, and CloudTrail sent it over to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=330.9469)  [CloudWatch Logs. That change should be](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=333.7112000000001)  [enough to trigger the alarm. And the alarm](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=336.1347777777778)  [is now in an OK status. So, what that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=339.2521250000001)  [tells us is that during that initial](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=342.4775000000003)  [1-minute period, CloudTrail delivered no](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=345.35850000000005)  [logs to the CloudWatch Logs log group. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=347.77100000000013)  [that's normal. That can take about 5](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=351.3152499999999)  [minutes before that actually happens. So](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=353.742)  [what we're going to do here is wait about](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=355.7006)  [3-5 minutes to see if this alarm does, in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=359.22499999999985)  [fact, move into an alarm status. Okay, so](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=363.0601999999999)  [it actually took about 8 minutes to get](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=366.5165714285714)  [into an ALARM status, but we can see that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=369.07885714285715)  [it is, in fact, in an ALARM status. Now if](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=371.59730769230777)  [we want to see specifically what changed,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=374.27358823529414)  [we have to go over to CloudWatch Logs. So,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=376.71164705882364)  [let's go ahead and click on Logs on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=379.9548461538461)  [left side menu. Click on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=384.0664615384613)  [CloudTrail/logs log group, and then click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=386.8453846153846)  [on the log stream. And then up at the top](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=389.6621538461538)  [right, let's go ahead and click on this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=393.32012500000013)  [dropdown here. We'll click a relative. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=395.6936250000003)  [let's select the last 15 minutes. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=399.3419999999999)  [we've got three events here. Let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=403.3908125)  [ahead and start at the top one here. Now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=406.0705)  [the event source here is monitoring.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=409.64941666666664)  [amazonaws. com, which is the endpoint for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=412.7479166666666)  [CloudWatch alarms. And the event name is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=416.47020000000003)  [PutMetricAlarm, which is the action that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=420.4609000000002)  [actually created the alarm. By the way,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=422.6054444444445)  [notice the eventTime, 1:51 Zulu. Now if we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=425.70325)  [scroll up, look at the timestamp on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=429.7355384615385)  [log entry. It's 21:58. Now, obviously](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=432.3183076923079)  [there is a time zone difference there, but](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=435.08872727272734)  [the point is that it took almost 8 minutes](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=439.12107142857144)  [between the time we created the alarm and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=441.94771428571426)  [the time CloudWatch Logs actually received](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=445.0876666666666)  [the event. And that aligns perfectly with](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=447.91316666666654)  [how long it actually took us to see that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=450.3707692307693)  [alarm trigger. Be that as it may, the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=453.1625)  [alarm is working. So let's jump back over](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=456.0944999999998)  [to Alarms and let's hit the Refresh](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=459.93976923076923)  [button, and we're still in an ALARM](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=463.7838461538461)  [status. So let's go ahead and click on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=465.83985714285706)  [alarm here, and down at the bottom let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=468.3647142857143)  [click on the History tab, and we can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=472.49042857142865)  [actually see the alarm history. Over at](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=476.05954545454546)  [21:59, it updated from OK to ALARM, and as](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=478.37081818181815)  [we can see, it is still in an ALARM](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=481.43433333333314)  [status. Now the question is, how long is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=484.5093333333329)  [it going to stay in an ALARM status? Well,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=486.6831333333333)  [it's going to stay in an ALARM status](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=489.1583846153846)  [until a 1-minute period elapses with no](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=492.2094615384614)  [CloudTrail Logs being delivered to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=495.06899999999996)  [CloudWatch. Now, obviously it's been over](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=497.2923333333332)  [a minute since we created the alarm, so](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=499.68325000000004)  [you would think that maybe the alarm would](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=502.66528571428574)  [go into an OK state, but again, this is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=504.7235714285716)  [dependent upon how quickly those logs are](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=507.3213333333333)  [getting streamed from CloudTrail to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=509.61616666666663)  [CloudWatch. All right, let's scroll up a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=511.56)  [little bit. Click on the Details tab. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=514.388)  [there's our nice little graph. So, not](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=517.921090909091)  [only do we have a tabular view of the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=520.9183076923077)  [alarm history, we can also take a look at](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=524.1866923076925)  [the graph to see how many](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=526.9015000000002)  [IncomingLogEvents have come in and when](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=528.6059285714289)  [they came in. If I refresh again, you can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=531.0520000000001)  [see that the alarm is now back in an OK](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=534.9436000000004)  [status, again, because we did not make any](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=538.7132000000003)  [subsequent changes after creating the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=541.6062499999999)  [alarm. The moral of the story here is the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=543.2768749999998)  [alarm is not real-time. It can actually](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=547.1089999999996)  [take several minutes between the time an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=549.7484999999999)  [event occurs and the time the alarm actually triggers.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=6&mode=live&start=551.8263333333332)

### [Searching Logs with Athena](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live)

[In this clip, we're going to step back](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=1.041)  [away from CloudWatch and learn how to use](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=3.4570000000000003)  [Amazon Athena to search CloudTrail Logs.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=6.089666666666667)  [Now you might be thinking, wait a minute,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=8.335)  [didn't you show me how to search](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=10.205857142857148)  [CloudTrail Logs using CloudWatch Logs?](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=12.3805)  [Yes, I did, but there are a couple of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=16.238)  [reasons you may want to use Amazon Athena.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=18.993058823529406)  [First, you may not want to use CloudWatch](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=21.442)  [Logs. You may not need to send all of your](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=24.851777777777777)  [CloudTrail Logs into CloudWatch. You may](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=27.88661538461537)  [simply need a way to search your](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=29.758000000000003)  [CloudTrail Logs every once in awhile.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=32.250000000000014)  [Athena lets you do that. Second, Amazon](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=34.386)  [Athena doesn't just search CloudTrail](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=38.08772727272727)  [Logs, it can search any file stored in S3,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=40.5536)  [provided that the file is in a compatible](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=43.709)  [format, which includes comma-separated](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=46.21922222222224)  [values, tab-separated values, text, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=48.56049999999999)  [JSON. As you remember, CloudTrail stores](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=51.592999999999996)  [its logs in S3 in JSON format. So being](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=54.60799999999998)  [able to use Athena to search CloudTrail](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=58.10341666666667)  [Logs is really just a nice coincidence.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=60.183)  [With Amazon Athena, you are not limited to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=62.93470000000002)  [searching logs, you can search pretty much](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=65.85566666666665)  [any file in S3, again, as long as it's in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=68.294)  [a compatible format. That sounds great!](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=71.2578461538461)  [Let's get started. Well, there's a catch.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=73.2603)  [Athena uses SQL, the structured query](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=75.858)  [language. That means you have to provide a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=79.13742857142856)  [structure or schema for the data you want](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=82.13199999999999)  [to search. Thankfully when it comes to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=84.89099999999999)  [CloudTrail Logs, Amazon has already](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=87.06800000000004)  [provided this for us. Let me show you what](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=88.85721428571428)  [I mean. In this demo, we are going to jump](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=92.35885714285712)  [into Athena and choose the S3 bucket](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=95.70499999999998)  [containing the objects we want to search.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=97.90712500000001)  [In this case, that is the bucket](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=99.84)  [containing our CloudTrail Logs. Next,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=102.41854545454548)  [we'll create a table in Athena. The table](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=104.29325)  [defines the schema or structure of the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=107.50325000000004)  [data that we're going to be querying.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=109.99863636363636)  [Again, AWS provides this force, and you'll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=112.259)  [get to see exactly what this looks like in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=114.37708333333332)  [a moment. Finally, we'll run some SQL](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=117.34384615384614)  [queries to search our CloudTrail Logs.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=119.8880769230769)  [Let's jump back over to the CloudTrail](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=122.38933333333334)  [dashboard. I'm looking at the event](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=125.4944166666667)  [history section in CloudTrail, and notice](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=127.88716666666664)  [we have a link that says Run advanced](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=130.2261666666667)  [queries in Amazon Athena. Let's click on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=133.67245454545449)  [that. And it prompts us to choose the S3](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=136.68350000000004)  [bucket that contains our CloudTrail Logs.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=140.47700000000012)  [Let's go ahead and click the dropdown, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=142.6236363636363)  [select the bucket, there it is, and notice](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=145.34846153846155)  [that it populates the Athena table name](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=148.89615384615394)  [with an automatically generated name.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=151.98362499999996)  [Again, Athena uses SQL, and as such, it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=154.173)  [has to create a table to store the log](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=156.82793333333325)  [data. That's what all this code is here.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=159.80180000000001)  [This is a long SQL statement that will](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=162.405)  [create the table. When you create a SQL](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=164.43409090909088)  [table, you have to specify the columns,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=166.61666666666667)  [which in this case correspond to the JSON](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=168.607)  [properties in the log file. For example,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=172.18115384615388)  [eventSource is a property we looked at](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=175.275)  [earlier. This SQL statement is going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=178.28500000000005)  [create in the table a column named](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=181.0622857142857)  [eventSource. In other words, we're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=183.8007857142857)  [basically translating the JSON format into](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=185.73054545454545)  [a SQL format, so that we can use SQL](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=188.0383636363636)  [queries to search it. Let's go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=191.00566666666668)  [click Create table, and it says the table](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=193.9442)  [has been created. And it gives us a nice](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=197.2386)  [button to take us to Athena. Let's go to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=199.7615)  [Athena. And on the left side, we can see](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=202.4622142857143)  [the table. Let's go ahead and expand it.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=206.70185714285722)  [And there are all those neat properties](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=210.4487692307693)  [from our CloudTrail Logs. Okay, how do we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=213.721)  [search this? I'm going to give you a crash](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=216.7385999999999)  [course on SQL queries. In the new query](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=219.328909090909)  [box, go ahead and position your cursor](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=221.73285714285709)  [there and type select *, or asterisk, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=224.103857142857)  [if you do a Ctrl+Space, it gives an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=228.15384615384616)  [auto-complete with the table name. Go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=233.008)  [ahead and hit Tab there to enter that in.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=235.21150000000006)  [Now let's jump to the end of the line, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=238.152)  [we're going to type the word where, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=240.60866666666664)  [then do another Ctrl+Space, and let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=245.58319999999995)  [arrow down to eventsource. Bam, right](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=249.66022222222222)  [there! And then, of course, you hit Tab to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=252.92488888888886)  [pop that in there, and there we go. Next,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=256.2384999999999)  [we're going to type the word like, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=259.4045333333333)  [then I'm going to do a single quote 'sns.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=262.57679999999976)  [amazonaws. com and then another '. Now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=267.9316666666666)  [this is the endpoint for SNS. All right,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=274.3345)  [now down at the bottom on the right, click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=277.94650000000007)  [on the Format query button, and that makes](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=281.36092307692303)  [this a little bit more readable. Now let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=283.6747692307691)  [go ahead and click Run query. Let's scroll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=287.7719999999999)  [down to the bottom. And there are the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=291.8531666666667)  [query results. Obviously the formatting is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=295.12183333333354)  [not very readable, but the data is there.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=297.39266666666674)  [Now the purpose of Athena is not to give](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=300.3)  [you a nice, easy-to-read table, but to let](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=302.66215384615384)  [you easily query the data that you have](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=305.17813333333334)  [stored in S3. There we can see the event](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=308.1104)  [name is Subscribe, and then we've also got](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=311.2896000000001)  [CreateTopic. Now if you want to export](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=314.0624000000003)  [your results into a nicer format, you can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=316.36800000000005)  [go ahead and click this button right here,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=319.1045384615385)  [which will download the results in a CSV](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=322.2146923076924)  [format, and then you can do with them as](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=324.8844374999999)  [you please. And there we go, that doesn't](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=327.5906249999997)  [look a whole lot better, but when it's in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=329.8698571428571)  [a spreadsheet, you can format it, move](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=332.32085714285716)  [things around, do a lot of things with it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=333.8178571428571)  [to get it looking the way you want. Pretty easy. So that's the power of Athena.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=7&mode=live&start=335.92027272727273)

### [Tracking Configuration Changes in AWS Config](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live)

[I want you to imagine a really possibly](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=1.329)  [terrifying scenario, maybe you've even](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=4.677)  [gone through this. Suppose that an IT](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=6.539999999999999)  [auditor comes to you one day and she says](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=8.934)  [please give me a record showing the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=11.991733333333332)  [current configuration state of all your](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=14.368)  [AWS services. How would you do that? Well,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=17.27725)  [you could go through each service and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=20.067307692307693)  [manually document the configuration, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=22.191)  [you would probably be doing that for a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=24.397499999999994)  [week straight. Okay, but now suppose that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=27.764)  [the auditor says, by the way, please also](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=30.470666666666666)  [give me a list of all changes that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=33.213285714285725)  [occurred in the AWS environment and when](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=35.839)  [those changes occurred. Now almost](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=39.357200000000006)  [reflexively, you might think I'll just](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=41.603)  [give her the CloudTrail Logs. And you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=43.817)  [could do that, but it actually would not](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=46.38016666666666)  [be enough. See, CloudTrail tracks who](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=49.25283333333331)  [accessed or made a change to a resource.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=51.726333333333336)  [For example, suppose that you created a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=55.237)  [CloudWatch alarm one month ago. Obviously](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=58.2995)  [that action caused the alarm to exist.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=60.966875)  [Today someone, not you, of course, someone](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=64.326)  [else, deleted that alarm, causing the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=67.54472727272724)  [alarm to cease to exist. Now CloudTrail](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=70.20984615384616)  [would log these events. It would tell you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=73.10030769230771)  [the actions that took place, who performed](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=75.94300000000001)  [the actions, and when. But suppose the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=78.02725000000007)  [auditor asks you about the state of the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=80.89354545454547)  [alarm as of two weeks ago. Now CloudTrail](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=84.15507692307693)  [Logs would not explicitly tell you when](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=87.1446153846154)  [that alarm existed. Two weeks ago, there](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=89.94762499999999)  [were no actions that took place against](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=92.49466666666667)  [the alarms, so there was nothing for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=94.79358333333336)  [CloudTrail to log. You would have to sort](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=96.848)  [through the logs to correlate the events](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=99.43830769230767)  [that took place with the state of the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=101.85653846153842)  [CloudWatch alarm configuration two weeks](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=104.78123076923082)  [ago. Now that is not too difficult to do](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=106.62353846153854)  [for one resource, but it's pretty much](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=109.30971428571426)  [impossible with hundreds or thousands of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=111.45183333333334)  [resources unless you automate it. And that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=113.87483333333337)  [is where AWS Config comes in. Config](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=116.86769230769232)  [tracks what a service configuration looked](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=120.27561538461543)  [like at a point in time. Whereas,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=122.87925)  [CloudTrail is concerned with the specific](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=125.26922222222223)  [activities that occurred with a service,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=127.79655555555559)  [AWS Config is concerned with the end](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=130.36233333333337)  [result of those activities. Think of AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=133.37816666666674)  [Config as a time machine. You can use it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=135.77263636363628)  [to see what a configuration looked like at](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=138.59585714285708)  [some point in the past versus what it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=140.96957142857127)  [looks like now. Now AWS Config does three](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=143.62099999999992)  [basic things. As I said, it monitors for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=146.23846153846156)  [changes to resources, and you can choose](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=148.78)  [to monitor all resources or specific ones.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=151.82249999999993)  [It keeps a record of those changes in an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=154.865)  [S3 bucket, and it can optionally send SNS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=157.71928571428583)  [notifications when a resource changes.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=161.094125)  [Sounds pretty good. All right, enough](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=164.076)  [talking about it. Let's go set this up.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=166.11333333333337)  [I'm here at the AWS Config welcome screen,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=169.357)  [which you can get to by searching under](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=172.03414285714283)  [the services menu. Let's go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=174.58083333333335)  [click on the Get started button. And it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=176.46675000000005)  [immediately takes us into a wizard which](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=180.34833333333333)  [asks us to select which resource types to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=184.651)  [record. Now let's go ahead and uncheck](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=187.65988888888882)  [record all resources supported in this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=190.98707692307693)  [region. And under specific types, let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=193.93815384615385)  [ahead and put our mouse in here, and let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=196.23646153846153)  [enter CloudWatch. And we've got one](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=199.4986)  [option, Alarm. Let's select Alarm. And now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=202.96240000000006)  [let's scroll down three clicks. And for S3](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=207.508)  [bucket, we will select create a new](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=211.91535714285712)  [bucket, and we'll stick with the default](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=214.28685714285706)  [name that it gives us there. Let's scroll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=216.73799999999997)  [all the way down to the bottom. And we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=219.5428888888889)  [optionally can stream configuration](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=222.65644444444445)  [changes to SNS. We'll leave that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=224.59333333333336)  [unchecked. And lastly, AWS Config needs to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=227.12399999999997)  [assume a role to grant it permissions to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=229.63933333333324)  [read configuration from the CloudWatch](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=232.1562)  [service, as well as write its logs to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=233.75266666666667)  [S3 bucket. We will go ahead and let AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=237.3316666666668)  [create the role for us. Let's go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=240.39908333333327)  [click Next. Now it prompts us to select a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=243.7462666666667)  [config role. This step is optional, but](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=247.62586666666684)  [these ready-made config rules offer a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=250.43936363636365)  [baseline against which you can check your](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=252.781)  [configuration. We are only interested in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=256.13662500000004)  [tracking configuration changes at this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=258.11600000000004)  [point. We're not comparing our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=259.6160000000001)  [configuration against a baseline. So we're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=261.9025)  [going to go ahead and scroll all the way](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=264.34646666666663)  [down to the bottom, find the nice button](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=266.4050666666664)  [that says Skip, and we're going to click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=268.8261538461539)  [Skip. And then it gives us the once over](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=271.8384615384617)  [here. Again, we are only going to track](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=274.85499999999985)  [CloudWatch Alarms, that is the only](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=277.5570909090909)  [configuration state we want to track using](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=279.9096363636362)  [AWS Config. Of course, as you saw, we have](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=282.1673571428571)  [the option to track everything, but right](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=284.2354285714284)  [now we're just getting warmed up to this,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=286.5670833333333)  [so we want to keep this clean and simple.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=289.4389)  [Let's go ahead and click Confirm. After a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=291.697)  [moment, it takes us to the dashboard. On](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=294.80153333333317)  [the left side menu, click on Resources.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=298.208375)  [And then under the Resource type dropdown,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=303.041)  [we're going to go ahead and type alarm,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=305.66115384615387)  [and Alarm pops up there. Let's go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=308.6496153846154)  [and click the checkbox next to it. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=311.6200769230771)  [then click the Look up button. AWS Config](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=314.7653636363636)  [has discovered the CloudWatch Alarm that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=318.14954545454543)  [we created earlier. Under config timeline,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=320.9891818181818)  [we can click on the name of the alarm,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=323.34350000000006)  [which is write access alarm. Here it shows](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=326.147)  [us the current configuration information,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=330.7040909090911)  [and it even gives us a timestamp when this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=333.2668)  [configuration was discovered. Now, up at](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=337.1241)  [the top right, go ahead and click on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=339.7766999999999)  [Manage resource, and it takes us over to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=342.34942857142846)  [the resource, which is our CloudWatch](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=344.343714285714)  [Alarm. At this point, AWS Config is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=346.864111111111)  [tracking changes to this alarm. So if we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=349.848)  [make any change to this alarm, AWS Config](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=352.79692857142857)  [should notice it. Let's go ahead and click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=355.4740714285714)  [on the Actions button, and then Modify.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=359.13466666666676)  [And we'll do something really innocuous,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=362.854)  [like add a description, You can't hide](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=365.9085999999999)  [from AWS Config, and then let's click on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=369.8783846153846)  [Save Changes. Okay, now let's tab back](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=375.03407692307695)  [over to AWS Config, and it's going to take](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=378.6922857142856)  [by my timing about 4 minutes to actually](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=382.957)  [pick up the change. Your mileage may vary,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=385.4870000000002)  [but we'll wait about 4 minutes and then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=388.17946666666677)  [refresh the page. Over on the right, click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=391.0344000000003)  [the Now button, and we get a new timestamp](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=394.6699999999999)  [indicating that two changes took place.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=399.287)  [Click on Changes right next to that badge](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=402.05463636363635)  [there, and it takes you down to the bottom](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=405.21779999999995)  [of the page where it compares the previous](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=407.78819999999985)  [configuration with the new one. As you can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=410.60949999999997)  [see there, the old alarm description was](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=413.6820909090909)  [blank. The new one says "You can't hide](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=416.2676363636363)  [from AWS Config. " Fantastic! All right,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=418.70772727272714)  [believe it or not, that is all there is to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=420.8380769230769)  [tracking configuration changes using AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=423.995)  [Config. Now that's a lot easier than sorting through CloudTrail Logs, isn't it?](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=8&mode=live&start=426.7999999999999)

### [Summary](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live)

[Thanks for sticking with me through](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=1.22)  [another module. I know we covered a lot,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=3.2247500000000002)  [and at times it probably seemed like we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=5.246199999999997)  [were sort of doing the same things over](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=7.050466666666661)  [again. Part of being a successful AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=10.082461538461535)  [architect is understanding the subtle](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=13.029625)  [differences between services that on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=15.737749999999998)  [surface appear to do very similar things.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=18.203909090909097)  [First, we looked at CloudTrail. CloudTrail](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=20.624)  [tracks events that occur on your AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=23.515999999999995)  [resources. Basically, reads and writes.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=27.110874999999997)  [You create a trail to choose what specific](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=29.889)  [events you want to track and CloudTrail](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=32.66623076923078)  [saves those events to log files in an S3](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=35.17400000000001)  [bucket. Next, we configured CloudWatch](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=38.64800000000003)  [Logs. CloudWatch Logs aggregates log files](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=41.455777777777776)  [from multiple sources, including](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=45.11216666666667)  [CloudTrail. It gives you the ability to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=47.62883333333335)  [browse and search those logs easily from](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=49.849384615384615)  [the AWS web console. CloudWatch Alarms](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=51.706)  [lets you create alerts that trigger based](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=55.15763636363636)  [on some specific log activity. In our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=58.842571428571425)  [case, we configured an alarm to trigger on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=61.56892307692308)  [every event that CloudTrail logged. After](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=64.38861538461539)  [that, we configured Athena, which lets you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=66.86410000000001)  [run SQL queries against objects stored in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=70.173)  [S3. This includes CloudTrail Logs, text](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=73.00625000000005)  [files, CSV, TSV, or JSON formatted files,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=76.41236363636362)  [and more. Of course, because SQL is the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=80.4150909090909)  [structured query language, you have to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=83.6238181818182)  [provide the data structure. Lastly, we set](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=86.25399999999998)  [up AWS Config, which tracks configuration](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=89.50224999999999)  [states over time. Unlike CloudTrail, which](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=92.34274999999998)  [tracks events, Config acts more like a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=94.96163636363639)  [time machine, which lets you go back and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=97.75845454545461)  [see what a configuration looked like at a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=100.26791666666668)  [particular time. All right, my friends, in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=102.89939999999999)  [the next module you're going to learn how](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=105.11746153846155)  [to protect network and host-level](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=107.467)  [boundaries in AWS. You're going to learn](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=109.903875)  [how to really lock down access to and from](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=112.66999999999999)  [your AWS resources, particularly those](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=115.60399999999993)  [that are facing the public internet. That's coming up next.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=7c9f1450-958b-49e4-a74d-260eae17fc18&clip=9&mode=live&start=117.86840000000001)

## [Protecting Network and Host-level Boundaries](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live)

### [Introduction to Protecting Network and Host-level Boundaries](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live)

[Welcome back. In this module, you're going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=0)  [to learn how to protect network and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=3.17625)  [host-level boundaries in your AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=6.52375)  [environment. That, of course, raises the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=9.220624999999998)  [question what networks are we protecting](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=11.901818181818182)  [and what is a host-level boundary? Well,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=14.472)  [as usual with AWS, the terminology can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=17.34327272727273)  [sometimes be a little ambiguous. To get](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=20.408625000000004)  [some clarity, let's take a look at the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=23.46516666666667)  [network infrastructure we'll be building](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=26.193833333333338)  [out on AWS. We're going to start by](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=28.02692857142857)  [creating a VPC, a virtual private cloud.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=31.09607142857142)  [This is a virtual network that is by](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=33.603615384615395)  [default isolated from all other networks,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=36.316846153846186)  [including other AWS networks in the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=39.1485)  [internet. Inside of this VPC, we'll have](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=42.1395)  [one subnet, which is going to hold an EC2](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=44.769285714285694)  [instance, which is going to run a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=48.12027272727273)  [tic-tac-toe web application, and yes,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=51.68518181818184)  [that's the game tic-tac-toe. We're going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=53.84063636363637)  [to configure a security group, which is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=55.72354545454548)  [essentially a firewall for the instance.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=58.58060000000001)  [This is the host-level boundary as AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=61.454)  [calls it. That's a little confusing](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=64.66933333333333)  [because in AWS parlance, a host can also](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=67.49866666666665)  [refer to the physical machine that an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=71.32)  [instance runs on, but in this context, a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=73.54115384615385)  [host-level boundary is a security group.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=76.38649999999998)  [When you create a VPC, AWS automatically](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=79.211)  [creates a security group for you. You can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=82.44284615384612)  [modify this, and we are going to modify](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=85.90193333333332)  [and use it to control network traffic to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=88.65766666666661)  [and from the instance. Now, when we create](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=91.39049999999999)  [a subnet, we also get a default network](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=94.08516666666664)  [access control list, or NACL, or Nacl, if](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=98.06316666666667)  [you like that. This controls traffic into](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=101.89899999999999)  [and out of the subnet. This is one network](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=104.78066666666662)  [level boundary. Remember the defense](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=108.87020000000001)  [in-depth approach I mentioned at the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=111.40920000000003)  [beginning of the course. Having both a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=113.48477777777777)  [security group and a network ACL gives you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=115.86953846153848)  [layers of security around your instance.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=118.88430769230776)  [Now let's talk about the application,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=121.63359999999997)  [which we'll be running on this instance.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=124.627)  [As I said, the application is a web-based](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=126.32730000000004)  [tic-tac-toe game for two players. The](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=129.74349999999998)  [tic-tac-toe application uses DynamoDB to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=133)  [store the games, as well as the player](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=135.84499999999994)  [information. You do not need to know](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=139.27507692307697)  [DynamoDB. All you need to understand is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=141.68738461538473)  [that DynamoDB is an AWS service, and our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=144.40399999999997)  [application needs access to it in order to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=147.37107692307694)  [store game data. DynamoDB lives outside of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=149.75138461538467)  [the VPC, so in order to get to it we have](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=152.04376470588238)  [two options. The first option is to simply](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=155.89311764705892)  [go over the internet, which will require](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=158.9865384615384)  [us to use an internet gateway. To reach](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=161.779)  [this gateway, we'll need to modify the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=163.79992307692305)  [main route table for the VPC. That's one](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=165.9920909090909)  [option. The other option is to use a VPC](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=169.70845454545457)  [endpoint, which gives us a private](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=173.19928571428568)  [non-internet based connection to DynamoDB.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=175.469)  [Notice that some of the text here is blue](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=177.96650000000005)  [and some of it is gray. The items in blue](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=181.56080000000003)  [are things that we are going to create](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=184.3028000000001)  [from scratch. The VPC subnet, instance,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=186.89399999999992)  [VPC endpoint, and web gateway are all](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=189.48066666666668)  [things that we are going to create. The](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=192.84883333333335)  [items in gray are the things that will get](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=195.40849999999998)  [created automatically for us, but we are](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=198.32899999999998)  [going to configure them. This is primarily](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=201.27599999999993)  [in the interest of time, so that we can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=203.87135714285714)  [focus on the security-related aspects of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=206.60542857142852)  [this setup, rather than the intricacies of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=208.60100000000003)  [networking. However, I'm not going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=211.38666666666666)  [leave it at that. If you are interested in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=213.32307142857138)  [a VPC networking deep dive, let me](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=215.863)  [recommend my own course, AWS Networking](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=218.51599999999993)  [Deep Dive: Virtual Private Cloud. In that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=221.0614285714286)  [course, I show you how to create route](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=224.25445454545456)  [tables, security, groups, network ACLs,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=226.73227272727286)  [and so on, rather than just using the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=228.37615384615387)  [defaults. I also cover how to connect your](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=231.0444615384616)  [VPCs to on-prem networks using a VPN,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=234.7854999999999)  [connecting VPCs together, and so on.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=238.193)  [Again, that's a deep dive that goes above](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=240.18499999999997)  [and beyond protecting network and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=243.00744444444442)  [host-level boundaries, but you may find it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=245.08355555555548)  [interesting, particularly if you're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=248.19127272727278)  [focused on implementing AWS solutions and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=250.013090909091)  [not just architecting them. All right, we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=252.95449999999997)  [have a lot to do in this module, and that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=255.7746666666667)  [means a lot of demos. So I hope you like](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=258.40688888888894)  [demos. First, we're going to create the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=261.09657142857156)  [VPC and what's called a public subnet. A](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=263.01957142857174)  [public subnet is simply a subnet that has](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=265.9289999999999)  [access to the internet. We're also going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=268.98946153846157)  [to modify the VPC's default security group](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=271.4410769230771)  [and main route table to allow access to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=273.9855)  [our instance, so that we can manage it and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=277.0348333333334)  [access the tic-tac-toe web application.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=281.3439999999999)  [Next, in order for the web application to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=283.799)  [work, it needs permissions to DynamoDB. To](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=287.39328571428587)  [grant it these permissions, we're going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=290.4553846153846)  [create an IAM instance profile. We're also](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=293.02007692307694)  [going to create the instance that the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=295.51446153846155)  [application will run on. After that, we'll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=297.83307692307704)  [look at how to secure shell, or SSH, into](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=299.866)  [the instance, and we'll configure the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=302.3188)  [tic-tac-toe web application. We'll then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=305.70759999999996)  [create a VPC endpoint and look at how to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=308.01646153846156)  [use it. And last, but not least, we'll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=310.7815384615386)  [learn how to use network access control](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=313.8478571428572)  [lists. All right, we've got a lot to do here, so let's get started.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=0&mode=live&start=316.70835714285727)

### [Creating a Public Subnet](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live)

[In this demo, we're going to create a VPC](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=1.162)  [and subnet to house our instance which](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=5.308428571428571)  [will run the tic-tac-toe web application.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=8.451749999999999)  [We'll create an internet gateway and add a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=10.971)  [default route to the VPC's main route](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=13.493461538461542)  [table with the internet gateway as the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=15.919799999999999)  [target. That is going to make our subnet a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=18.894100000000005)  [public subnet. We'll then reconfigure the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=22.649399999999996)  [default security group to allow access to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=24.563090909090903)  [our instance only from our IP address.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=26.455)  [Let's jump over to the VPC dashboard. Here](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=30.215)  [at the VPC dashboard, make sure you've](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=34.37253846153846)  [selected your VPCs on the left side menu,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=37.15530769230768)  [and click the Create VPC button. We're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=41.08633333333333)  [going to name this one tic-tac-toe. The](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=45.573)  [IPv4 CIDR block is going to be 172. 27. 0.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=49.77300000000001)  [0/24. We're not going to use IPv6, and for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=55.104375000000005)  [the tenancy we will stick with Default and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=59.50143750000001)  [then click Yes, Create. And there is our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=63.20681818181819)  [VPC. Now, over on the left side menu,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=66.60066666666665)  [click on Subnets, and we are going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=69.712)  [create a new subnet. So, click Create](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=73.85799999999996)  [subnet. Now for the nametag, we are going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=77.44923076923075)  [to name this one web-public, and for the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=81.4978461538461)  [VPC we are going to go ahead and select](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=85.009)  [the tic-tac-toe VPC, which we just](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=89.07674999999999)  [created. For the availability zone, I'm](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=93.49124999999997)  [going to stick with no preference. You can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=95.58381818181816)  [choose your own availability zone if you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=97.8716923076923)  [like, but by choosing no preference,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=100.18061538461534)  [Amazon will pick one for us. All right,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=102.40225000000001)  [under the IPv4 CIDR block, I'm going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=106.08649999999999)  [put in 172. 27. 0. 0/24. It is the same as](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=109.99649999999995)  [the VPC's CIDR, and that's okay because](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=114.78185714285712)  [we're only going to have one subnet. Go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=117.37585714285709)  [ahead and click Create. And once the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=121.40080000000003)  [subnet's created, just click Close. Next](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=125.17062500000002)  [we need to create an internet gateway. On](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=128.18075000000002)  [the left side menu, scroll down until you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=131.22066666666666)  [see Internet Gateways. Click on Internet](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=134.4980000000001)  [Gateway, which is right here up at the top](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=136.5562857142857)  [for me, and then Create internet gateway.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=139.04414285714282)  [Now for the nametag, we're going to name](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=141.6503333333333)  [this one web-igw for web-internet gateway,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=145.36646153846155)  [and then click Create, and Close. Now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=150.41523076923082)  [let's go up to the Actions menu, and then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=156.0292142857143)  [select Attach to VPC. And then we're going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=161.1161428571429)  [to go to the drop-down here, and we will](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=164.40757142857143)  [select the tic-tac-toe VPC. And then click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=166.72635714285713)  [Attach. All right, the internet gateway is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=172.46457142857142)  [attached to the VPC. Next, we need to add](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=175.75459999999993)  [to the VPC's main route table a default](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=178.7982857142857)  [route pointing to the internet gateway.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=181.13314285714281)  [This will effectively make the web-public](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=183.27)  [subnet a public subnet and allow access to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=185.55176923076925)  [and from the internet. So, on the left](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=189.0459230769232)  [side menu, let's go to Route Tables, right](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=192.63328571428576)  [up here, third one down, click on Route](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=196.31385714285727)  [Tables. And we want to locate the main](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=199.52369230769224)  [route table for the tic-tac-toe VPC. If I](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=202.5)  [expand this out a little bit here, you can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=204.94000000000005)  [see here is the main route table for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=209.03571428571425)  [tic-tac-toe. I'm going to click on this,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=213.63685714285705)  [and then let's go down to the Routes tab,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=216.93239999999992)  [and I'm going to bring this up a little](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=221.013)  [bit so we can see it better. Click on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=222.6408750000001)  [Edit button, and then add another route.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=225.9149)  [Now in the destination, we're going to do](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=230.6)  [0. 0. 0. 0/0, and the target is going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=234.07299999999995)  [be web-igw, which is that internet gateway](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=238.68783333333334)  [we just created, and there we go. Click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=242.68425000000008)  [Save. And now the web-public subnet is a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=247.1533333333333)  [public subnet. Next, we're going to modify](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=251.5634666666666)  [the default security group for the subnet](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=254.49558333333331)  [to allow SSH and HTTP access from our IP](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=257.057)  [address. Over on the left side menu, click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=261.4417999999998)  [on Security Groups, right under Security,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=264.30409999999983)  [right here, and we want to select the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=267.08325)  [default security group for the tic-tac-toe](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=271.77991666666674)  [VPC, and we can see that as this one right](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=274.65969230769235)  [here. Highlight that, and then click on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=279.49215384615377)  [the Inbound Rules tab. Click Edit. Add](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=283.56669230769205)  [another rule. And here in the drop-down,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=287.7313)  [we're going to look for HTTP right here,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=292.016)  [and then for the source, I'm going to put](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=295.8123076923079)  [my own IP address, 24. 96. 154. 172/32,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=300.6148666666666)  [and in the description I'll just put me.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=305.47459999999984)  [Now we want to click Add another rule. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=309.4362307692307)  [here we're going to select SSH for secure](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=313.3313846153846)  [shell, and same IP address, and I'll do](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=317.1104615384615)  [the same description, this is me. All](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=320.17959999999994)  [right, now when we go to launch the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=322.2995)  [instance, we are going to apply this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=325.1035000000001)  [security group to the instance, and that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=327.6803076923077)  [will allow us to access it, but will](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=330.5653846153846)  [prevent everyone else from reaching the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=333.8463636363636)  [instance. So go ahead and click the Save button. And that's it.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=1&mode=live&start=336.294909090909)

### [Creating and Using an IAM Instance Profile](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live)

[In this demo, we're going to create an IAM](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=1.171)  [role to allow our tic-tac-toe web](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=4.084230769230768)  [application access to DynamoDB. This role](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=6.763)  [will contain the appropriate permissions](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=10.16988888888889)  [that the application needs for DynamoDB,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=11.767111111111113)  [and it will also contain a trust policy to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=14.189636363636362)  [allow EC2 instances to assume this role.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=18.34388888888889)  [When we create this role, IAM is going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=21.959)  [quietly, behind-the-scenes create](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=25.907545454545463)  [something called an instance profile. When](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=27.28933333333333)  [we go to launch our instance, we will](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=30.194833333333335)  [attach this instance profile to it. Now,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=33.26550000000002)  [you're probably wondering what exactly is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=35.748272727272735)  [an instance profile and what's the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=37.745181818181834)  [difference between a role and an instance](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=40.013000000000005)  [profile? Well, the short answer is, not](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=42.72200000000001)  [much, actually. They're mostly the same](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=45.43475)  [thing, but, well, it will make more sense](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=47.396461538461544)  [if I just show you. So let's jump over to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=49.76938461538463)  [the IAM dashboard. We're going to start by](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=53.86249999999999)  [creating a policy to grant permissions to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=57.471846153846165)  [DynamoDB. So over on the left side menu,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=60.7532307692308)  [click on policies. And then Create policy.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=64.9005)  [Now under Service, click on Choose a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=69.65166666666667)  [service. And we're going to go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=75.20733333333334)  [type in dyna, just stop there, dyna, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=77.62349999999995)  [we want to select DynamoDB. Click on that.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=80.07411111111111)  [Next it prompts us to select some actions](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=86.699)  [allowed in DynamoDB. Now, what we want to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=90.17318181818182)  [do here is under list, I'm going to go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=92.69443749999996)  [ahead and expand this, we want the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=94.8876249999999)  [ListTables action. Under Read, scroll down](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=98.67291666666665)  [a little bit, we want the DescribeTable,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=102.63041666666663)  [GetItem, and Query actions, and then under](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=109.3386)  [Write, let's expand this out, we want](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=114.8840909090909)  [CreateTable, DeleteItem, PutItem,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=118.41463636363635)  [UpdateItem, and last, but not least,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=121.04433333333334)  [UpdateTable. There we go. Okay, now let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=127.42033333333337)  [scroll down a little bit more, and under](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=131.27300000000002)  [Resources it says You chose actions that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=134.7877142857143)  [require the table resource type. So, let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=137.32421428571433)  [go ahead and click on this, and then under](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=139.77184615384616)  [Resources we're just going to go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=142.63315384615387)  [select all resources, and there we go. We](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=145.67315384615387)  [don't want any request conditions here, so](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=148.89906666666667)  [let's go ahead and click Review policy.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=151.8465333333333)  [And I'm going to scroll up a little bit.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=154.794)  [Under the name, we're going to do](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=156.3690000000001)  [tic-tac-toe-app, and for the description](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=159.40854545454545)  [we'll just say Allow Tic-tac-toe app to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=162.55172727272725)  [use DynamoDB. Excellent. All right, scroll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=169.88275000000004)  [down and click on Create policy. And it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=175.37133333333335)  [says tick-tac-toe-app has been created.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=179.79828571428573)  [I'm going to go ahead and click on this up](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=181.644)  [here, click on the name of the policy.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=185.09455555555547)  [Excellent. Now, right now this is just a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=187.855)  [stand-alone policy called a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=191.47566666666668)  [customer-managed policy. It's not attached](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=193.286)  [to anything, but it is there for us to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=194.994)  [use. So next we need to attach this policy](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=198.02200000000005)  [to a role. In order to do that, we need to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=200.99200000000016)  [create the role. So on the left side menu,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=203.32454545454542)  [click on Roles, and then Create role. Now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=208.2010769230769)  [under Choose the service that will use](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=213.56807692307692)  [this role, we want to select EC2 because](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=215.42361538461535)  [we want our instance to actually assume](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=218.072)  [this role. So we'll click EC2. And then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=221.15900000000002)  [down at the bottom right, click on Next:](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=225.30540000000008)  [Permissions. And here we need to choose a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=229.65793333333352)  [policy. Under the filter, go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=232.50799999999995)  [select Customer managed, and here select](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=234.814)  [the tic-tac-toe-app policy. This is the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=241.07399999999993)  [one we just created. There we go. And now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=245.38600000000002)  [click Next: Review. For the role name,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=249.2669230769231)  [we're going to call this tic-tac-toe-app,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=253.1971538461539)  [same name. And notice under trusted](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=256.4703333333333)  [entities, it says ec2. amazonaws. com. The](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=259.5523333333333)  [trust policy on this role will allow only](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=263.4564615384614)  [EC2 instances to assume this role, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=267.8073076923077)  [that's exactly what we want. So let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=270.57446153846166)  [click Create role. And there's the role.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=273.95588888888886)  [Now, behind the scenes, as soon as we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=278.873)  [created this role, IAM also created an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=282.39809090909097)  [instance profile. What is an instance](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=285.6472727272728)  [profile? Well, let's go spin up an EC2](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=288.538181818182)  [instance and I will explain it to you.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=291.0854666666668)  [Let's jump over to EC2. All right, I have](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=293.446)  [skipped on over to the EC2 dashboard. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=297.43187500000016)  [what we want to do here is click Launch](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=301.05636363636364)  [Instance. We're going to go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=305.7756363636366)  [launch a Linux-based instance, and go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=308.6760000000001)  [ahead and select the Amazon Linux 2 AMI.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=311.49739999999997)  [Here you can select whichever instance](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=316.447)  [type you would like. I'm going to go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=318.57939999999985)  [and stick with t2 micro, and then click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=321.38314285714296)  [Next: Configure Instance Details. Now,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=323.5945714285717)  [under Network, go ahead and hit the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=326.08554545454547)  [drop-down there, and we want to select the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=329.961)  [tic-tac-toe VPC that we created. Of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=333.3437692307691)  [course, there's only one subnet in that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=335.7869230769231)  [VPC, so we can't really select anything,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=338.0893846153844)  [that's all we have. Under Auto-assign](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=340.4898)  [Public IP, we're going to select Enable](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=342.75720000000007)  [because we do want a public IP so that we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=344.8296666666666)  [can actually connect to this instance via](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=347.463)  [the internet. Now, let's click on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=350.67055555555555)  [drop-down next to IAM role. Here we get to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=354.2715)  [the instance profile. The first thing you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=358.08153846153857)  [may notice is that this doesn't even say](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=360.05123076923104)  [instance profile, it says IAM role. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=363.3685000000001)  [notice we have only one role here, which](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=366.503)  [is the tic-tac-toe-app. But technically](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=369.54299999999995)  [what you're looking at here is not a role,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=371.2687142857143)  [it is an instance profile, which is just a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=373.9044285714286)  [container that holds a reference to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=376.89114285714277)  [role. And yes, the instance profile gets](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=379.35064285714265)  [the same name as the role. What's the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=381.8035000000001)  [point of that? I have no idea. Amazon has](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=384.5706666666666)  [never, to my knowledge, explained it, but](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=387.56616666666656)  [what you need to know is that practically](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=389.9006923076922)  [an IAM role and an instance profile are](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=392.635)  [the same thing. So, having said that,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=395.827)  [let's go ahead and select this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=399.3094545454545)  [role/profile, and then let's click Next:](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=402.7376363636363)  [Add Storage. We'll stick with the defaults](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=405.85828571428567)  [for storage. Click on Next: Add Tags. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=409.4272857142856)  [we're going to add a tag here. Click the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=412.8876153846153)  [Add tag button. And the key is going to be](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=416.4007333333334)  [Name with a capital N, and the value will](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=419.7294000000003)  [be web1. You can, of course, put whatever](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=423.2630000000001)  [you like here, but I'm going to name this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=426.4611428571428)  [web1 just to be consistent with our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=429.4452857142855)  [diagram. Click Next: Configure Security](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=432.5768)  [Group. Now here go ahead and select an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=435.2478)  [existing security group, and then check](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=439.00199999999984)  [the box next to the default VPC security](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=441.8380000000001)  [group, and as you can see, we scroll down](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=445.72066666666694)  [a bit, there are the rules that we created](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=448.0345000000001)  [a few moments ago. All right, let's click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=450.32283333333334)  [Review and Launch. All right, we get one](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=454.0015)  [last chance to make any changes before we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=456.8049285714285)  [hit the blue button. Everything looks](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=459.0832142857141)  [good, so let's click on Launch. Here it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=461.77800000000013)  [asks us to select a key pair so that we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=465.29519999999997)  [can secure shell, or SSH, into the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=468.4211999999997)  [instance. If you already have one, you can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=470.5692857142856)  [use it, but if you don't, select Create a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=472.9898571428569)  [new key pair from the drop-down. Now under](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=476.9474615384616)  [key pair name, I'm going to do ben-ec2,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=480.672)  [and then I'm going to click Download Key](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=484.076)  [Pair. Now your browser should download the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=488.5943333333332)  [key pair, which is just the name of the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=493.52291666666633)  [key pair. pem, so in my case, ben-ec2.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=496.9139333333334)  [pem. Make sure you actually get this key](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=499.87990909090905)  [before proceeding. If you need to, you can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=504.7991818181816)  [click the Download Key Pair button again](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=507.7270000000001)  [if the download didn't work the first](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=509.7080000000002)  [time. Once you have the key, go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=511.7484999999999)  [click on Launch Instances, and if all went](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=515.3165000000001)  [well, your instance should launch. Let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=520.1445000000006)  [go ahead and click on the instance ID. I'm](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=523.3718461538464)  [going to go ahead and close this little](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=527.7800000000001)  [bar down here, and please make a note of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=529.4600000000004)  [the instance's public IP address, which I](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=532.6841818181821)  [have right here. You can of course copy it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=535.2915714285714)  [to the clipboard, which I am going to do](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=537.2966428571426)  [because we are going to use it in a moment](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=539.2754705882356)  [to SSH into the instance, which we're going to do in the next clip.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=2&mode=live&start=541.459588235295)

### [Using SSH Key Pairs](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live)

[In this demo, we're going to SSH into the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=1.433)  [instance using the OpenSSH client. If](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=5.443785714285715)  [you're using Linux, you already have the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=8.148818181818182)  [OpenSSH client installed, and if you're a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=11.486545454545453)  [Windows 10 user as of the April 2018](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=14.409923076923077)  [update, Windows 10 also comes with OpenSSH](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=17.39576923076923)  [installed. That means whether you're using](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=21.44014285714286)  [Windows or Linux, you can use the OpenSSH](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=23.697000000000003)  [client, and that makes following along](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=26.359583333333333)  [with this demo super easy. So, please join](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=28.517083333333332)  [me at the command-line as we secure shell](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=31.652062499999996)  [into our new EC2 instance. Okay, I'm in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=35.217562499999985)  [the Downloads folder here because that's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=38.41745454545455)  [where I downloaded the SSH key pair. So if](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=40.360363636363644)  [you're not already there, go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=43.38418181818181)  [please browse to that folder. I'm going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=45.378857142857136)  [go ahead and do an ls ben-ec2. pem. There](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=47.07714285714284)  [is my key pair. Now, I'm going to go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=51.35000000000001)  [and type a command in here and then I will](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=55.269999999999996)  [explain it. Ssh ec2-user@ and I'm going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=57.76333333333332)  [go ahead and paste in the IP address of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=60.8942857142857)  [the instance, -i and then ben-ec2. pem.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=64.96615384615384)  [Now, let me explain this command, number](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=68.90123076923078)  [one, so you understand what it does, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=72.3395)  [number two, so that you can use this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=74.84949999999999)  [information with a different SSH client if](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=77.95499999999998)  [you're using one. The ec2-user is the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=80.846)  [username to log into the instance. This](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=84.02884615384619)  [user gets created automatically when you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=87.2278)  [launch the instance. The IP address, of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=90.05259999999998)  [course, is the public IP address of the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=92.66869230769228)  [instance, the -i, followed by the file](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=95.07607692307684)  [name, ben-ec2. pem, specifies the SSH key](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=98.62161538461537)  [pair file we use to authenticate to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=102.407)  [instance. And that really is all there is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=105.96166666666666)  [to it. Pretty simple. Let's go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=107.94090909090907)  [hit Enter. And because this is our first](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=110.13923076923079)  [time connecting, it says the authenticity](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=112.78169230769238)  [of the host cannot be established. This is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=114.3888181818182)  [normal. So we're going to go ahead and say](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=116.46313333333335)  [yes, we are sure, we want to continue](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=118.90273333333337)  [connecting. And we're in! All right, so](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=122.61699999999999)  [our next step is to download, install, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=126.53935714285716)  [start the application. To do this, we're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=129.9856428571429)  [going to do sudo yum -y install git](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=134.384)  [python2-pip. noarch. And hit Enter. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=140.59599999999998)  [all this does is it downloads some](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=144.2216666666667)  [dependencies for the app. Next, we're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=147.8488333333334)  [going to grab the app itself using git,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=149.9339230769231)  [git clone, and the URL is https://github.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=152.441)  [com/benpiper/ and this part is a little](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=158.43236363636356)  [bit long, but it is easy to type,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=164.50474999999997)  [dynamodb-tictactoe-example-app. Okay,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=171.56808333333325)  [dynamodb-tictactoe-example-app. Go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=173.5002857142857)  [and hit Enter. And git will go out and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=176.6481428571428)  [grab the application files. Next, we're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=182.0177999999999)  [going to install a couple more](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=184.5061111111111)  [dependencies, sudo pip install flask, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=187.5274444444444)  [then boto, I think that's how you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=190.05641666666662)  [pronounce it, and there we go. Next, we're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=192.892)  [going to go ahead and enter into the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=196.32707692307685)  [directory the app is in, so cd](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=199.97164285714285)  [dynamodb-tictactoe, and so on. And then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=203.46614285714287)  [once you're in that directory, we're going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=205.90084615384617)  [to go ahead and launch the app by doing a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=207.4333076923078)  [sudo python application. py. Okay, now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=212.49519999999998)  [let's jump back over to Chrome, browse to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=215.75292307692308)  [the public IP address of the instance, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=217.6206153846154)  [if all works well, we should see the web](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=220.08200000000005)  [application. All right, I'm back at](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=223.25180000000015)  [Chrome. I'm going to go ahead and just](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=224.40292857142853)  [paste in the public IP address and hit](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=225.68121428571416)  [Enter. And it works! All right, now this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=229.4867272727273)  [app is designed for two players. Each](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=232.76719999999995)  [player has to log in with the username. So](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=234.89499999999998)  [in the top right here where it says i. e.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=237.80556249999998)  [John, I'm going to put Ben, and then click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=240.3511874999999)  [Log In. And then it says table has not](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=243.91849999999997)  [been created yet. So, we'll go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=249.0811249999999)  [click the big Create Table button. Now, a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=253.03245454545456)  [couple of things here. First, notice that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=256.5954)  [the app itself has 0 security. I just](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=259.6977999999999)  [typed in my name to log in, and it let me](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=262.8134285714286)  [in. I then clicked the Create Table](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=265.3237857142856)  [button, and it created the table. Now, I](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=267.49699999999996)  [intentionally chose this app to highlight](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=270.207)  [the importance of the defense in-depth](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=272.50199999999995)  [strategy that we talked about at the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=274.63738461538463)  [beginning of the course. Even though this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=276.7562307692309)  [application is dreadfully insecure, it's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=279.34781818181824)  [not as bad as it could be because we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=281.649181818182)  [locked down the security group so tightly.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=285.0113846153845)  [If we left the security group wide open to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=287.323)  [anyone on the internet, then anyone could](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=290.6073076923079)  [get in here and start playing tic-tac-toe](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=293.381)  [using our DynamoDB table. So, if you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=296.4469999999999)  [wanted to open this app to everyone on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=299.1086923076923)  [internet, you would have to implement some](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=301.8377692307692)  [kind of authentication within the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=303.9055454545456)  [application, as well as some kind of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=305.376)  [encryption because right now we're using](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=308.05509090909084)  [HTTP and not HTTPS. Anyway, let's go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=310.5989333333333)  [and click the Create button. And now we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=314.65066666666655)  [have to enter the name of an opponent.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=318.0194545454545)  [Now, this is just another user name, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=320.25)  [we can make something up here. So let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=322.4334285714285)  [ahead and play against Kay. All right,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=324.871076923077)  [we're going to play a game of tic-tac-toe](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=326.73792307692327)  [against Kay, click Create Game, and here](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=330.90899999999993)  [is our tic-tac-toe board. And it's Kay's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=334.9928)  [turn. Okay, this is where things get a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=337.48760000000004)  [little strange. I'm going to pretend to be](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=339.88722222222214)  [Kay, so to do that, I need to open another](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=342.4794999999999)  [browser session and log in as Kay. Okay,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=345.827)  [so I've got these windows lined up](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=348.44607692307704)  [side-by-side. I, Ben, am on the left, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=351.0556666666667)  [Kay is on the right. Kay has an invitation](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=354.94633333333337)  [from Ben to play a game. So she will click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=358.98800000000006)  [Accept, and now we'll play a quick game of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=364.49414285714283)  [tic-tac-toe. And Kay won the game. Okay,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=371.44921428571416)  [yeah, I've just played tic-tac-toe against](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=374.9612307692307)  [myself. All right, now what does](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=377.70046153846147)  [tic-tac-toe have to do with security?](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=379.7797272727272)  [Well, all that back-and-forth game data](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=381.727)  [was being stored in a DynamoDB table. But](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=384.62823076923064)  [how did the application get the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=388.50745454545455)  [permissions to access DynamoDB? Well,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=391.474181818182)  [let's jump back to our SSH session. Now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=393.981375)  [we're back in the SSH session, and as you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=397.84658333333334)  [can see, the application has generated a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=399.2828333333333)  [lot of output. I'm just going to hit Enter](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=401.7082499999999)  [here to get our prompt back. And what I'm](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=404.5630000000001)  [going to do here is change directories to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=406.76899999999995)  [the root, just to give ourselves a little](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=408.4089999999998)  [bit more room on the prompt. And I'm going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=410.45350000000013)  [to type curl 169. 254. 169.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=416.6441)  [254/latest/meta-data/iam/security-credentials,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=425.7562999999998)  [you can see where I'm going with this,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=427.275)  [/tic-tac-toe-app. That is the name of the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=432.041222222222)  [instance profile. I'm going to hit Enter](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=434.51414285714276)  [here. What is this? Well, what we're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=436.70414285714264)  [looking at is part of the instance](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=439.0851538461538)  [metadata, which is basically the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=441.498)  [configuration information for the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=443.655)  [instance. Specifically what you're seeing](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=445.38059999999996)  [here are credentials generated by the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=447.7356000000001)  [security token service, or STS. These](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=450.621)  [credentials are what the tic-tac-toe app](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=453.3312000000001)  [is using to authenticate to DynamoDB. How](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=456.44924999999995)  [did these credentials get generated? By](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=460.7392727272727)  [virtue of the instance profile, which](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=462.87690909090895)  [again is essentially the role that we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=465.274)  [created earlier. Both the role and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=468.67599999999993)  [instance profile, as you recall, have the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=471.57261538461546)  [name tic-tac-toe-app. Notice also that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=474.9406923076925)  [there is an expiration date. These](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=477.35237499999994)  [credentials get rotated, so even if](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=480.0348461538461)  [someone gets a hold of them who shouldn't](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=481.6359230769229)  [have them, any damage they can do will be](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=483.94716666666665)  [limited because the credentials expire, in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=487.14291666666645)  [this case, after about six hours. Okay,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=489.4552727272728)  [this is great. We've got our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=492.2424444444444)  [tic-tac-toe-app working, and even though](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=494.873111111111)  [the app itself is woefully insecure, at](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=496.8586153846154)  [least we can take some comfort knowing](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=499.4453846153847)  [that we are the only ones who can get to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=501.6793333333334)  [it. But there's something else we can do to make it even more secure.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=3&mode=live&start=504.4926666666669)

### [Using VPC Endpoints - Part 1](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live)

[As I mentioned at the beginning of the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=1.068)  [course, there are two ways that our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=3.262857142857142)  [application can connect to DynamoDB. Over](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=5.4013333333333335)  [the internet, which is the way it's doing](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=8.355333333333336)  [it now, or using a VPC endpoint. This is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=11.623692307692313)  [what the connection path looks like now.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=15.066222222222223)  [Traffic from the instance goes to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=17.79)  [internet gateway and off to the DynamoDB](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=20.549166666666668)  [public endpoint. And this is perfectly](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=23.460666666666665)  [fine. There's nothing wrong with this. But](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=26.28266666666666)  [suppose that we want to block all outbound](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=28.80300000000001)  [internet access from our instance? Now,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=31.697857142857146)  [why would we want to do that? Well, if](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=34.059200000000004)  [this instance were to get compromised by](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=36.30200000000002)  [an attacker, we wouldn't want them to be](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=38.23507692307693)  [able to turn our instance into a source of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=40.98338461538465)  [malicious traffic. So by blocking outbound](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=44.373500000000014)  [traffic, we can prevent that. However,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=47.07022222222221)  [blocking outbound traffic to the internet](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=49.91844444444444)  [would obviously break connectivity to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=52.681111111111086)  [DynamoDB, and hence, break our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=54.98866666666667)  [application. That's where VPC endpoints](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=57.299777777777784)  [come in. When we configure a VPC endpoint,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=59.32563636363636)  [traffic from the instance to the DynamoDB](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=62.629999999999995)  [endpoint no longer traverses the internet.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=66.60599999999998)  [Instead, it traverses a private link via](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=69.90576923076924)  [that VPC endpoint. We completely bypass](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=73.62923076923079)  [the internet gateway and the internet at](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=76.6069090909091)  [large. This lets us block outbound](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=79.83136363636368)  [internet access from our instance without](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=82.58563636363637)  [interfering with connectivity to DynamoDB.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=85.338)  [So it's a win-win. Cool! All right, in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=87.72188888888891)  [this demo, we are going to block outbound](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=90.94766666666668)  [internet access from our instance. That,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=93.585)  [in turn, is going to break our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=95.95249999999997)  [connectivity to DynamoDB. We will then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=98.73745454545454)  [create a VPC endpoint, which will let us](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=101.24218181818182)  [route our traffic to DynamoDB over what is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=104.14215384615383)  [called a private link connection. Again,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=106.60246153846148)  [this is not over the internet, but over a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=109.06590909090906)  [private internal AWS link that bypasses](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=112.98445454545457)  [the internet. Let's jump back over please](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=115.64736363636369)  [to our SSH session. The application is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=119.71944444444445)  [designed to connect to the DynamoDB](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=123.47245454545455)  [endpoint for the region, which in this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=125.88336363636367)  [case is us-east-1. So, let's go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=128.68392307692307)  [do an nslookup dynamodb. us-east-1.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=131.879)  [amazonaws. com. And it resolves to a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=138.6754285714285)  [particular IP address. And there are many](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=143.419625)  [different IP addresses that this could](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=145.8316666666667)  [resolve to. Now, if we do a sudo netstat](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=147.62666666666678)  [-tp and then I'm going to do a grep for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=151.56894117647064)  [python, which is, again, what is running](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=156.346)  [our app, I currently have no connections](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=159.2730769230769)  [to the DynamoDB endpoint, and that is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=162.09145454545455)  [because I actually closed the browser](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=164.25763636363635)  [window. So let's go ahead and jump back](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=166.01053846153843)  [over to our application, and I'm going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=168.20930769230756)  [go ahead and try to create another game](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=171.20540000000003)  [here. And we'll go ahead and invite Kay to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=174.46726666666675)  [play a game again. All right, we're not](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=177.33966666666674)  [actually going to play a game, I just did](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=179.53628571428567)  [this so that the application would at](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=181.70592857142842)  [least connect out to DynamoDB. I'm going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=184.06554545454537)  [to go ahead and close this, and then back](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=186.4712857142857)  [in our SSH session, I'm going to go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=189.3525714285714)  [and run that netstat command again, and we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=192.38199999999995)  [can see now that the application is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=195.12053846153847)  [connected to this IP address, which is the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=197.46392307692315)  [DynamoDB endpoint for the region. Now,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=201.01099999999997)  [what do you notice about this address?](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=204.231875)  [Well, it's a public IP address. That means](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=207.458)  [when our app connects the DynamoDB, it is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=210.00015384615395)  [traversing the internet gateway, and after](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=212.69989999999996)  [that, we really don't know where it's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=214.92169999999987)  [going before it reaches the public](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=217.28584615384617)  [endpoint. Now, that's not necessarily a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=219.27969230769233)  [big deal. As you can see, it is using](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=221.37628571428573)  [HTTPS, so that traffic is at least secure.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=224.552)  [But perhaps we want to prevent this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=227.967)  [instance from accessing the internet. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=230.9344166666666)  [like I said, doing so would break the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=233.3816)  [application. So, we are going to create a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=236.0023999999999)  [VPC endpoint. Let's jump back over to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=238.83650000000006)  [VPC dashboard, and creating a VPC endpoint](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=241.75116666666665)  [is super, super easy. Over on the left](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=244.60833333333326)  [side menu, just click on Endpoints. Go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=249.18139999999997)  [ahead and click on Create Endpoint. Now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=254.09775000000002)  [when you create an endpoint, you have to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=257.638)  [do so for each service that you want to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=260.7318571428572)  [use. So under service name, let's go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=263.14128571428597)  [and select the DynamoDB service, and then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=266.77281818181814)  [let's click on it. And once you click on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=269.6095384615384)  [it, the screen may jump, and that's okay,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=272.3531538461537)  [that's normal, I think. The screen jumps](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=275.83154545454545)  [down, and now we need to select the VPC to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=278.61964705882355)  [create the endpoint in. So, under VPC I'm](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=281.8684705882354)  [going to go ahead and select the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=284.93261538461536)  [tic-tac-toe VPC. It says a rule with](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=288.02069230769223)  [destination, and then it gives a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=290.69383333333326)  [destination, and a target with this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=292.84283333333315)  [endpoints' ID will be added to the route](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=295.1006153846155)  [tables you select below. This is going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=298.14)  [modify the main route table so that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=300.89199999999994)  [traffic sent to the DynamoDB public](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=303.52933333333334)  [endpoint gets routed over a private link](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=306.2813333333333)  [instead of the internet gateway. We're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=309.26725000000005)  [going to look at the route table in a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=311.4013333333333)  [moment, and this will make a lot more](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=313.3393333333332)  [sense once you actually see the route](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=315.4608571428572)  [entry that it creates. Go ahead for now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=317.89885714285737)  [and click the checkbox next to the route](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=320.68338461538457)  [table. And it warns us that any existing](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=323.46615384615376)  [connections will be interrupted. So,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=326.554181818182)  [obviously don't do this during business](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=328.47)  [hours in a production environment. Let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=330.57000000000016)  [scroll down. Next it volunteers to create](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=332.94616666666667)  [a VPC endpoint policy. Now it doesn't come](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=337.3293333333334)  [right out and say that this is a VPC](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=341.0374285714285)  [endpoint policy, but that is what it's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=343.74514285714264)  [called. This policy controls what actions](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=345.9878181818181)  [we can perform on DynamoDB using the VPC](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=348.1453)  [endpoint. Now this may seem a little](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=352.4597000000002)  [redundant because the IAM role we created](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=355.1059230769232)  [earlier controls what permissions our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=357.564)  [instance has in DynamoDB. But this VPC](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=360.16177777777773)  [endpoint policy is another policy that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=363.60999999999996)  [controls what can be done via the VPC](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=366.34999999999985)  [endpoint. We're going to go ahead and let](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=369.56285714285724)  [AWS create the full access policy, which](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=372.5114285714288)  [does not further restrict our access to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=375.4823636363635)  [DynamoDB. Just keep in mind that the IAM](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=378.48484615384615)  [role we created still applies; this VPC](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=381.8202307692307)  [endpoint policy does not override that.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=385.0194)  [Okay, go ahead and click Create endpoint.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=387.942)  [And then Close. Now, over on the left side](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=393.99980000000016)  [menu, click on Route Tables. Select the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=399.63854545454535)  [Main Route Table for the VPC. And then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=403.0824)  [click on the Routes tab. And the bottom,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=406.7160000000001)  [you can see the route that it just](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=410.018)  [created. The destination is pl followed by](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=412.76733333333317)  [some numbers and letters. Pl stands for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=416.4211999999999)  [prefix list. It is literally a list of IP](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=419.9362307692308)  [prefixes. We cannot view these in the web](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=423.86092307692326)  [console, as far as I know, but we can view](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=426.12531250000006)  [them using the AWS CLI. So, let's jump over to a Command Prompt.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=4&mode=live&start=429.476)

### [Using VPC Endpoints - Part 2](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live)

[Now I'm here on my desktop. This is not](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=1.048)  [the SSH session, this is just my own](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=4.354)  [desktop. You do not need to follow along](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=7.037076923076922)  [with me here. I just want to show you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=8.953384615384616)  [something. Aws ec2 describe-prefix-lists.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=14.321400000000004)  [Using the AWS CLI tools, which I have](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=17.421)  [installed, I can look at the current](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=20.358142857142845)  [prefix list for DynamoDB and S3. Notice](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=22.987166666666667)  [under the prefix list name for DynamoDB,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=25.970333333333336)  [there are two IP prefixes. The IP address](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=29.327625000000005)  [of the DynamoDB public endpoint that our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=33.144499999999994)  [app is connecting to is 52. 94. 1. 118.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=35.623666666666644)  [That IP address first squarely within the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=39.59292307692306)  [first IP subnet listed in this prefix](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=42.846333333333334)  [list. Keep these two prefix lists in mind,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=46.054666666666684)  [and let's jump back over to the VPC](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=49.257875)  [console. Mentally, just replace this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=52.394875)  [prefix list designation with those IP](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=54.950999999999986)  [subnets. Any traffic destined for any IP](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=58.19699999999997)  [address in those subnets will go through](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=61.376000000000005)  [the VPC endpoint. That's what that vpce](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=64.47579999999999)  [target is. What this also means is that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=67.70839999999997)  [said traffic will not go out via the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=70.66637499999999)  [internet gateway. And that's how VPC](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=73.37887499999997)  [endpoints keep this traffic off the dirty](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=75.78633333333333)  [pipes of the internet. But let's take this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=78.81266666666666)  [further. Let's go to our security groups](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=82.01633333333334)  [and prevent this instance from accessing](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=84.59641666666667)  [the internet. On the left side menu, let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=87.58642857142856)  [go down until we see Security Groups,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=90.69899999999997)  [right there. We're going to select the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=93.10699999999993)  [default security group. And this time we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=96.13374999999998)  [want to select the Outbound Rules tab.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=99.43045454545452)  [Click Edit. And then we're simply going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=102.744)  [over on the right under Remove click the X](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=106.67692307692309)  [to remove this rule. And then click Save.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=111.76599999999999)  [If we leave this be, then the instance](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=117.028)  [cannot get to anything, including the VPC](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=120.85199999999996)  [endpoint. So we need to add an entry to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=123.79461538461537)  [allow access to the endpoint. So let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=126.88646153846149)  [ahead and hit Edit again, and under Custom](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=129.91158333333334)  [TCP Rule we're going to go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=133.59169230769228)  [select HTTPS, and then over in the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=138.29753846153838)  [destination, notice that it gives us the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=141.21976923076926)  [option to select the prefix list for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=143.66384615384624)  [DynamoDB, right here. So we'll just click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=146.06099999999995)  [that. Isn't that cool? All right, so we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=148.60999999999999)  [don't actually have to type in those IP](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=151.45528571428576)  [prefixes ourselves. Under Description,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=154.0958571428573)  [we'll do DynamoDB, and then click Save. At](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=156.6571111111111)  [this point, we have only one outbound rule](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=163.69376923076925)  [allowing access to the DynamoDB endpoint](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=166.75592307692318)  [IPs. We removed the outbound rule that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=169.2134)  [allows access to the internet. That means](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=172.4558)  [our instance can initiate outbound](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=175.2873636363636)  [connections only to the DynamoDB](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=177.261)  [endpoints. So here's the question, will we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=180.86849999999995)  [still be able to access our web](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=183.6934285714285)  [application? Well, let's jump back over to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=186.1474285714284)  [the Inbound Rules tab. We have an inbound](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=188.70780000000002)  [rule that allows HTTP traffic into the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=191.96233333333336)  [instance from our IP address. Security](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=195.07966666666672)  [groups are what's called stateful because](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=197.90849999999998)  [they track the state of the connections to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=200.60261538461538)  [and from your instance. What this means is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=203.08753846153837)  [that if you allow traffic into your](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=205.6723333333333)  [instance, which is what we are doing here](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=208.02141666666654)  [with this rule, the security group will](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=210.25076923076915)  [automatically allow the instance to reply](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=212.4759)  [to that traffic, even if there is no](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=216.0873)  [corresponding outbound rule. All right,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=219.77675000000005)  [let's jump back over to the Outbound Rules](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=221.55790909090908)  [tab. Again, there is no rule explicitly](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=224.16154545454535)  [allowing an outbound connection to our IP](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=227.0817272727272)  [address, but because the inbound rule](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=229.97716666666665)  [allows traffic in from our IP, the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=232.1766666666666)  [stateful nature of the security group will](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=234.66600000000003)  [allow the reply traffic to go out. This is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=237.05300000000008)  [a very important point when it comes to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=239.61071428571424)  [security groups, so please make sure you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=241.657)  [understand this. All right, let's jump](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=244.85055555555547)  [back over to our SSH session. Super! All](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=247.20059999999998)  [right, let's verify that we cannot get to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=250.11116666666666)  [the internet. Let's try to ping 8. 8. 8.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=253.1278333333333)  [8, and it does not work. We have no](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=256.9722307692307)  [outbound internet access. All right, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=260.48799999999994)  [that's what we expect. Now, let's jump](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=262.22199999999987)  [over to Chrome, and I'm going to go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=264.3952)  [and pop in the public IP address of the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=267.4468)  [instance and attempt to browse to it, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=270.1255384615385)  [yes, indeed, we are able to browse to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=272.4338181818182)  [app. Why is that? Well, again, it's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=275.7621818181818)  [because those security group rules are](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=278.33353846153835)  [stateful. Even though we removed the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=280.5350769230767)  [outbound rule allowing internet access, we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=282.6985000000001)  [still kept the inbound rule that allows](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=284.92858333333334)  [connectivity into the instance. Excellent.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=287.96366666666665)  [All right, we are still logged in as Ben.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=290.1328)  [Let's go ahead and try to create a game](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=294.046)  [here, and we'll go ahead and try to play a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=295.9695999999999)  [game against Kay again. And this works.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=298.8265454545454)  [So, this tells us that we also have](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=301.582)  [connectivity to DynamoDB, this time via](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=306.1340000000001)  [the VPC endpoint. Excellent. All right,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=309.146)  [let's go back over to our SSH session](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=311.7330909090909)  [again. All right, I had left that ping](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=315.12145454545436)  [running, and I had to break out of the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=317.1646250000001)  [ping, so that's what that funny-looking](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=319.247)  [stuff is there. All right, so what we're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=321.52566666666684)  [going to do is we're going to do another](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=323.1342857142857)  [sudo netstat -tp grep python. The app is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=323.979)  [still connected to DynamoDB, and it's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=329.9689999999998)  [still using one of the public IP addresses](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=333.6594285714286)  [of the DynamoDB endpoint. But this time](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=336.4411428571429)  [it's going over the VPC endpoint](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=338.95039999999995)  [connection, it's going over that private](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=341.18719999999985)  [link instead of the internet. From the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=343.3254999999999)  [point of view of the instance in the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=345.703)  [application, nothing has changed in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=348.15099999999984)  [regards to DynamoDB. The VPC endpoint is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=350.217)  [essentially transparent. Just from looking](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=353.55300000000005)  [at this, there's really no way to tell](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=355.5244615384615)  [that we're actually going over a private](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=358.09369230769215)  [link versus the internet because we're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=360.04509090909085)  [still connecting to the public IP address,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=361.616)  [but because of those changes we made in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=363.6790909090911)  [the main route table, that traffic going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=366.522)  [to the DynamoDB endpoint is traversing the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=369.43399999999997)  [VPC endpoint rather than the internet. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=372.59918181818193)  [again, we know that because we have blocked outbound internet access.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=5&mode=live&start=376.399)

### [Network Access Control Lists](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live)

[Before closing out this module, there's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=1.389)  [one important VPC resource you need to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=4.2342)  [know about, and that's the Network Access](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=7.433250000000001)  [Control Lists, or NACL, or Nacl, if you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=10.471833333333336)  [like to say Nacl. Now recall from the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=13.472571428571431)  [beginning of this module that the default](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=16.316)  [network access control list sits at the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=18.959900000000005)  [border of the subnet. A single NACL can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=21.65207692307693)  [actually be applied to multiple subnets,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=24.77023076923079)  [but here we have just one. Also, recall](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=26.66818181818181)  [that I said that having both a security](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=29.36969230769231)  [group and a NACL is good for our defense](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=32.93646153846155)  [in-depth strategy because it gives us](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=36.104)  [multiple layers of security. But that's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=37.934)  [not the whole story. There are some](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=40.85480000000001)  [important differences between security](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=44.05500000000001)  [groups and Network Access Control Lists.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=45.72566666666668)  [I'm going to show you a high-level list of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=47.72972727272727)  [some of those differences, but we're going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=50.333000000000006)  [to dig into the details in the demo. As I](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=52.28600000000003)  [mentioned, you apply a security group to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=56.07640000000002)  [an instance. An NACL, on the other hand,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=59.19653333333338)  [is applied to a subnet. Security groups](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=61.98836363636362)  [are stateful, while NACLs are stateless.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=64.72825)  [I've already explained stateful. Stateless](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=68.197)  [is another technical term that warrants](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=70.51144444444442)  [some in-depth explanation and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=73.70785714285714)  [demonstration, so rather than trying to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=76.39757142857141)  [explain these now, just go ahead and hang](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=78.68269230769228)  [on and I'll get to those in the demo.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=81.263)  [Lastly, security groups are not numbered;](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=83.3953076923077)  [that is, the order of rules doesn't](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=85.34760000000001)  [matter, whereas NACL rules are numbered,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=88.86370000000005)  [and hence are evaluated in a certain](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=91.34946153846153)  [order. In many respects, security groups](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=94.12630769230766)  [and NACLs are opposites. In this demo,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=97.20855555555558)  [we're going to focus on the structure of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=100.4293846153846)  [NACL rules, and how NACLs differ from](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=103.28907692307689)  [security groups. As we do that, we'll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=106.38328571428569)  [reconfigure the default NACL in various](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=109.06576923076919)  [ways to see how the order of rules affects](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=111.14269230769223)  [the behavior of the network ACL, and I](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=114.57253846153846)  [promise I will not say Nacl again. Let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=117.8335882352941)  [jump over to the VPC web console. On the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=121.49194117647052)  [left side menu, locate and click on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=125.60914285714286)  [Network ACL menu item. In the list, click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=129.27371428571428)  [on the Network ACL that corresponds to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=132.17066666666665)  [tic-tac-toe VPC, which is this one right](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=134.3)  [here. Next, click on the Subnet](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=139.11950000000004)  [Associations tab. Now the network ACL is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=142.7315714285714)  [similar to a security group, except](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=145.5075384615385)  [instead of being applied to an instance,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=147.4353846153847)  [the way a security group is, an NACL is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=149.90390909090905)  [applied to a subnet. In this case, it's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=153.15492307692304)  [associated with our web public subnet,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=155.98138461538448)  [which contains our instance. Every VPC](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=158.70849999999996)  [gets created with a default NACL, as you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=161.50885714285715)  [can see by the default Yes indicator here.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=164.62828571428582)  [When you create a subnet, the default NACL](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=167.83466666666664)  [gets associated with that subnet. Okay, so](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=171.27637500000003)  [what is the network ACL do? Well, let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=174.40087499999998)  [click on the Inbound Rules tab. Like a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=177.67637499999995)  [security group, an NACL controls inbound](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=180.97572727272726)  [and outbound traffic. But as I said, the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=183.503909090909)  [rules here apply at the subnet level. That](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=186.2738333333333)  [means they apply to all instances within](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=188.7817)  [that subnet. The way the rules work in an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=191.57959999999997)  [NACL is also a little different than a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=194.76929411764706)  [security group. First, the rules in a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=197.50105882352943)  [network ACL are numbered; they are](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=199.8878461538462)  [processed or evaluated in ascending order.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=201.93246153846164)  [So, let's take a look at rule 100. This is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=204.48133333333337)  [the lowest numbered rule, and in fact,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=208.66323076923078)  [it's the only numbered rule, so it gets](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=210.22853846153848)  [evaluated first. It allows all traffic](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=212.84466666666668)  [using any protocol and from any source.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=215.42716666666672)  [Now let's take a look at the next rule](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=217.90233333333336)  [down. This is the default rule, and it's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=220.8081333333334)  [designated by an asterisk. This is a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=223.59372727272722)  [catch-call rule that applies to all](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=226.1056923076923)  [traffic not matching any of the numbered](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=228.31507692307687)  [rules. It denies all traffic. It's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=231.23549999999997)  [basically the opposite of rule 100. Now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=233.96416666666667)  [this is a key difference between NACLs and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=236.1773333333334)  [security groups. In a network ACL, you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=239.45066666666662)  [have to explicitly specify allow or deny](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=242.67899999999995)  [in each rule. Security groups do not have](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=245.79259999999985)  [an explicit allow or deny action. When you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=249.0333636363636)  [create a rule in a security group, you are](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=252.0060769230769)  [allowing that traffic and all other](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=255.08892307692298)  [traffic that is not in the security group](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=256.9091428571429)  [is denied. In a network ACL, having to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=259.17942857142873)  [specify an explicit allow or deny action](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=262.33576923076913)  [makes the order of rules very important.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=265.356)  [To understand why, we'll add another rule.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=268.2448999999998)  [Go ahead and click on Edit. Notice that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=271.2025999999999)  [there is no way to remove or modify the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=274.38153846153847)  [default rule, and it doesn't even show up](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=277.07946153846166)  [here. But we can add another rule. So](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=279.53207692307694)  [let's click on the Add another rule](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=282.17833333333334)  [button. And we're going to go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=285.5686666666666)  [number this one 200. For the type, we're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=288.91536363636374)  [going to go ahead and hit this drop-down,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=292.089)  [and I'm going to allow all traffic. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=295.165)  [then for the source, I'll do my IP](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=299.5169999999999)  [address, 24. 96. 154. 172/32, and under](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=304.5176666666666)  [allow/deny, I'm going to go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=309.46083333333326)  [select deny for the action. Now this rule](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=312.0788181818181)  [all by itself will deny all traffic from](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=314.9105714285715)  [my IP address. Let's go ahead and click on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=318.21342857142866)  [Save. Now at first glance, it may look](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=322.34571428571417)  [like that this NACL is going to deny all](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=326.204)  [connections from my IP address. But, in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=330.34978571428553)  [fact, that's not what's going to happen.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=333.2874444444444)  [The first rule, rule 100, allows all](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=335.508)  [connections, including connections from my](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=338.80674999999997)  [IP address. Therefore, the second rule,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=341.45720000000006)  [rule 200, has no effect. Let's jump back](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=344.726)  [over to our SSH session with the instance.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=348.40649999999994)  [I'm going to hit Enter a couple of times,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=352.087)  [and notice that I am still connected.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=354.5192499999998)  [Okay, so that NACL is not denying traffic](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=356.411)  [from my IP. All right, now let's jump back](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=360.01463636363627)  [over to the network ACL and change the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=363.1501428571429)  [order of the rules. Now to do this, I'm](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=365.529)  [going to go ahead and hit the Edit button](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=367.5444374999998)  [again, and I'm simply going to transpose](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=370.1284285714286)  [rule 100 and rule 200. So, rule 100](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=373.68592857142875)  [becomes 200, 200 becomes 100, and then I'm](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=377.5347999999999)  [going to click Save. Now the first rule](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=381.0222666666664)  [denies access from my IP address, and the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=384.23584615384624)  [second rule allows all traffic. So if I](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=387.1755384615387)  [try to connect to the instance from my IP,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=389.70799999999986)  [it will not work because as soon as the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=392.589)  [NACL denies the traffic based on rule 100,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=395.81100000000004)  [it stops looking at the other rules. Let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=398.99318181818177)  [go back over to the SSH session, and after](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=402.3651538461538)  [hitting Enter a couple of times, I get no](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=405.1475384615383)  [response. And after a few more moments, I](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=408.67807692307696)  [get disconnected. Bummer. All right, but](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=412.191)  [that's what we expect. Let's jump back](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=415.04699999999997)  [over to the network ACL. Now I'm going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=418.0546250000001)  [hit Edit again, and I'm going to remove](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=421.4025333333334)  [the deny rule that I created. So I'll just](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=424.4196000000002)  [go over to the right here and click the X](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=426.78540000000004)  [under Remove, and then click Save. So now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=429.11033333333336)  [we are back to where we started, except](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=432.8970000000002)  [the first rule is rule 200 instead of 100,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=436.415)  [but the specific rule number does not](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=439.466)  [matter here because there is only one](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=441.62841666666674)  [numbered rule. All right, next let's take](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=443.80623076923075)  [a look at the Outbound Rules tab.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=446.0225384615384)  [Everything I just mentioned about the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=448.89070000000004)  [inbound rules applies here, except instead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=452.09410000000014)  [of dealing with source IP addresses, we're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=454.9690000000001)  [dealing with destination IP addresses. The](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=458.1865714285714)  [outbound rules control traffic leaving the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=460.879125)  [subnet. And again, unlike a security](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=463.885875)  [group, an NACL is stateless. It does not](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=466.4899999999999)  [automatically allow reply traffic. So if](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=470.1504285714286)  [we were to remove this allow rule here,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=472.83399999999995)  [then it would absolutely break our web](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=475.26199999999983)  [application and stop us from being able to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=477.7036)  [SSH into the instance. Let's go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=480.9772)  [hit the Edit button, and I'm going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=484.3321333333333)  [remove this rule. And then click Save. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=487.7683999999999)  [now we are left with the default deny](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=491.06128571428576)  [rule. All right, let's go ahead and try to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=494.26814285714295)  [SSH to the instance again. And it does not](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=498.0573076923075)  [work. Our inbound NACL allows all traffic](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=501.9473076923078)  [and our inbound security group allows](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=505.0488461538464)  [traffic from our IP, but because the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=507.71936363636365)  [outbound NACL does not allow outbound](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=510.842)  [traffic, the reply traffic from the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=513.885090909091)  [instance cannot leave the subnet. Hence,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=516.751090909091)  [we're not able to establish an SSH](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=518.7316363636365)  [connection. Again, this is due to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=521.1570909090908)  [stateless nature of an NACL. But if we go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=523.735636363636)  [back to the NACL, and then we hit Edit,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=527.3129999999999)  [add another rule, and we'll give this rule](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=531.1585454545454)  [number 100, and under type we will go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=536.2509090909086)  [ahead and select ALL Traffic, and the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=539.556909090909)  [destination will be 0. 0. 0. 0/0, and we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=542.4176666666667)  [will allow this traffic, hit Save, okay](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=547.6676666666671)  [let's go ahead and try that SSH connection](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=551.6644999999999)  [again. And now it works. The moral of the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=556.1004999999996)  [story is to make sure you understand not](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=559.7972857142861)  [just how network ACLs work, but also how](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=563.0303333333334)  [they differ from security groups. If these](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=566.5356666666669)  [things are misconfigured, it can cause you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=569.0492727272728)  [a lot of headaches, so please make sure you understand how these things work.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=6&mode=live&start=572.014)

### [Summary](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live)

[How you protect network and host-level](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=1.571)  [boundaries really comes down to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=4.3175)  [architecture. How you secure your](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=6.606249999999999)  [instances and subnets is going to be](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=8.455076923076923)  [informed by what AWS services you'll be](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=10.88946153846154)  [using, how you'll be accessing those](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=13.755454545454544)  [services, and who needs to access your](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=16.36)  [instances. If you want an instance to be](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=19.584375)  [reachable from the internet, you will](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=21.79881818181817)  [place that instance in a public subnet. A](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=23.51744444444444)  [public subnet is simply a subnet whose](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=26.360461538461536)  [route table has a default route to an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=28.708692307692296)  [internet gateway. If your instance, or](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=31.706818181818182)  [more specifically, the application running](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=34.348454545454544)  [on your instance needs access to an AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=36.211090909090906)  [service, such as DynamoDB, you will need](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=38.83)  [to create and apply an instance profile,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=41.89716666666667)  [which of course entails creating a role](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=44.99215384615385)  [with the appropriate permissions. Many AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=48.15669230769231)  [service endpoints are publicly accessible](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=50.8702)  [over the internet. If you decide for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=53.13319999999998)  [whatever reason that you don't want to use](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=55.612428571428566)  [a public endpoint over the internet, you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=57.8552857142857)  [can create and use a VPC endpoint, which](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=60.71016666666665)  [uses a private internal AWS link and does](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=64.34183333333333)  [not traverse the internet with its dirty](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=67.70049999999996)  [pipes. Lastly, be sure you know the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=70.35672727272727)  [differences between security groups and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=72.801)  [network ACLs. Both serve the same basic](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=75.04814285714285)  [purpose. They either block or allow](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=78.16033333333334)  [traffic. But that's where the similarities](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=80.81633333333335)  [end. Some differences include security](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=83.72511111111108)  [groups are stateful and NACLs are](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=86.20662499999999)  [stateless. Security groups operate at the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=89.25837499999996)  [instance level, while network ACLs operate](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=92.09549999999999)  [at the subnet level. Again, there's a lot](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=94.76783333333334)  [of overlap here, but make sure you know](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=97.51850000000003)  [the differences. All right, are you ready](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=100.3961111111111)  [for more? In the next module, you're going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=102.78569230769232)  [to learn how to protect your data stored at rest in the AWS cloud.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=63cd5a7a-36d7-4a69-9019-2896305d0b0b&clip=7&mode=live&start=105.21953846153848)

## [Protecting Data at Rest](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live)

### [Introduction to Protecting Data at Rest](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live)

[Welcome one, welcome all, welcome back! In](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=0)  [this module, which I promise is not going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=4.0568888888888885)  [to be too long, you're going to learn how](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=6.92857142857143)  [to protect data at rest. As I said](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=9.560666666666666)  [earlier, data at rest is data sitting on a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=12.349999999999998)  [drive somewhere. This is as opposed to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=15.717923076923077)  [data in transit, traveling across a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=18.695076923076932)  [network. There are two ways to protect](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=20.985000000000003)  [data at rest. You can restrict access to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=23.182333333333332)  [data via access permissions, which either](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=26.242000000000008)  [allow or deny a principal the ability to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=28.722833333333337)  [read, write, or delete that data. How you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=31.83016666666668)  [do this is very specific to the service.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=34.826999999999984)  [The simple storage service, or S3, for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=37.787)  [example, lets you use bucket policies,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=40.02233333333333)  [user policies, or access control lists to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=42.2607)  [restrict access to data stored in S3. The](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=46.7526)  [other way to protect data is by encrypting](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=49.902)  [it with a key. S3 and the elastic block](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=52.39)  [store, or EBS services, let you encrypt](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=56.02253846153847)  [data using what's called a customer master](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=58.918545454545445)  [key, or CMK, which you create and manage.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=61.90881818181815)  [Encryption prevents anyone who doesn't](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=65.56554545454547)  [have access to that key from reading the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=67.736)  [data. The corollary to this is that if the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=70.33600000000003)  [key is gone, so is the data. And that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=72.93513333333334)  [gives us enough context to talk about what](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=75.5595)  [we will do in this module. First, we're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=78.09750000000001)  [going to create a customer master key](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=80.7595)  [using the Key Management Service, or KMS.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=83.41425)  [We'll then use this key to encrypt the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=86.17900000000002)  [data on the existing EBS volume attached](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=89.433)  [to the instance that we created earlier.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=92.35399999999998)  [Why would you want to encrypt an EBS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=95.275)  [volume? Well, one reason is simple. You](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=97.87328571428569)  [can't create a snapshot of an encrypted](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=100.1235)  [volume and then make it public. The](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=102.23400000000004)  [snapshot will remain encrypted. That's one](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=104.51287500000001)  [reason. Next, we'll learn the different](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=107.33212500000002)  [ways to restrict access to data in S3.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=109.68046153846153)  [Access control lists, bucket policies, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=112.686)  [user policies. We'll then look at how to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=115.59975)  [use object ACLs and bucket policies to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=118.52376923076923)  [selectively make objects in S3 accessible](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=120.802)  [to everyone on the internet. There have](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=123.98636363636366)  [been some rather ugly examples of people](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=127.36540000000001)  [accidentally making an entire bucket](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=129.90429999999995)  [publicly available when they intended to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=131.80154545454542)  [do this for just a few select objects.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=134.10336363636355)  [You, of course, are not going to make this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=136.5065)  [mistake. Lastly, we'll learn how to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=139.46566666666666)  [encrypt objects in S3 so that only those](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=142.28466666666662)  [with access to the customer master key can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=145.94615384615383)  [decrypt and read those objects. This is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=149.51046153846153)  [going to be a fun module. Let's get started!](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=0&mode=live&start=151.82200000000003)

### [Creating a Customer Master Key with KMS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live)

[In this demo, we'll create a customer](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=0.786)  [master key using the Key Management](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=3.7645)  [Service, KMS. First we'll give the key an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=6.3341)  [alias, which is just a friendly name.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=9.8709)  [We'll then define the key administrators,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=12.491545454545454)  [those who can modify the key and grant](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=14.609538461538461)  [permissions to use it. And finally, we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=17.02984615384615)  [will define who can use the key. The Key](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=19.3233)  [Management Service is available under the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=22.751800000000003)  [IAM dashboard, so let's jump over there.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=25.454200000000014)  [In IAM, on the left side menu, go to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=28.255)  [Encryption keys, and then click on Get](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=31.805500000000006)  [Started Now. Notice that AWS has already](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=34.77757142857143)  [created some keys for us. One that looks](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=38.27607142857143)  [particularly interesting is the key named](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=42.47240000000001)  [aws/ebs. Let's click on that. Now this is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=45.867200000000025)  [the AWS managed customer master key, or](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=50.46015384615382)  [CMK, that you can use to encrypt volumes.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=54.245888888888885)  [Of course, you don't have to use this one.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=56.917)  [We're actually going to create our own](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=58.724615384615355)  [customer managed master key. So let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=61.19942857142857)  [back to our encryption keys and at the top](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=64.7088125)  [click on Create key. Now for the alias,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=68.55124999999994)  [we're going to name this CMK](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=73.10045454545455)  [app-instance-volumes. Now if you expand](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=77.36263636363638)  [Advanced Options, you have the option to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=79.92561538461537)  [let KMS provide the key material, or you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=83.16769230769228)  [can provide your own. The key material is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=85.78720000000001)  [essentially a bunch of secret random data.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=88.19163636363635)  [You may want to provide your own key](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=90.424)  [material if you need to know how that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=92.81485714285716)  [material was generated. For example, you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=95.257)  [may need to prove that the key data is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=97.20400000000001)  [sufficiently random. If you let KMS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=100.28623076923074)  [generate the key material, you cannot](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=102.42730769230764)  [actually see it, and so you cannot make](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=104.3493076923077)  [any such assertions about the key. In this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=106.7659230769231)  [case, we are going to stick with KMS and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=108.86807692307688)  [then click Next Step. For the key we'll go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=111.6765714285714)  [ahead and put the tag here as name and we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=115.47328571428562)  [will call this app-instance-volumes, same](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=121.05500000000005)  [as the alias, then click Next Step. Now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=123.85157142857143)  [here we get to define the key](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=127.27214285714284)  [administrators. Something really important](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=130.1398)  [to note here is that making a principal a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=131.59940000000003)  [key administrator does not give them](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=134.5462727272727)  [permissions to use the key. But it does](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=136.331)  [give them permissions to manage the key,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=139.10700000000006)  [which includes making changes to it, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=141.3870909090909)  [yes, that includes giving themselves](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=143.46863636363628)  [permissions to use it. I know that's a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=145.90699999999995)  [little strange, but that's how it works.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=148.8403636363637)  [Let's go ahead and select Ben, that's me,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=150.227)  [as the administrator, and if we scroll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=154.63936363636358)  [down we will also allow key administrators](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=157.68066666666667)  [to delete this key. Let's click Next Step.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=160.10733333333332)  [Next we define who may use the key. This](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=163.03633333333332)  [controls which principals may encrypt and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=166.54941666666667)  [decrypt data using the key. Once again, we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=169.11991666666665)  [will select Ben, and this time I'm also](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=172.20169230769227)  [going to select our friend Phil. Okay, now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=174.70753846153832)  [let's scroll down here. Look under](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=177.86479999999995)  [External Accounts. Click on Add an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=180.7258)  [External Account. Here you can allow](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=184.24720000000008)  [principals from another AWS account to use](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=187.0182307692308)  [this key. We're not going to do this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=189.8133846153847)  [because this is an advanced configuration](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=191.88399999999993)  [that's beyond the scope of this course,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=193.156)  [but just remember that it is possible.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=195.29600000000002)  [We'll click on Next Step. And finally, we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=197.436)  [get to see the key policy. And yes, in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=200.77714285714282)  [case you haven't noticed, AWS loves the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=204.42115384615386)  [JSON format for these policy documents.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=207.07684615384622)  [We're going to look over this document in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=208.944)  [a moment, but first let's click Finish.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=210.88799999999995)  [And there is our new key. Go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=215.17000000000004)  [click on the alias name,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=221.05499999999998)  [app-instance-volumes. And under the key](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=224.1316666666666)  [policy, it gives us a user friendly view](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=225.78350000000006)  [of the key policy. But if you want to view](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=227.85650000000015)  [the policy document, look over to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=230.51300000000006)  [right and click on Switch to policy view.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=232.40300000000013)  [Now let's scroll down to the statement](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=235.54515384615388)  [labeled Allow access for Key](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=238.5838888888889)  [Administrators, right there. Notice that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=241.46833333333342)  [my IAM user principal is specified here.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=244.13233333333335)  [This type of policy is called a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=247.399)  [resource-based policy because instead of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=249.53781818181827)  [being associated with my IAM user, it's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=251.201)  [actually associated with the key resource.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=254.288)  [If you look down under the action element,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=256.69481818181816)  [notice that the statement grants me](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=259.585)  [several permissions to the KMS service.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=261.9684999999999)  [Okay, why is this necessary? Recall from](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=264.352)  [earlier in the course that I am an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=267.1000833333333)  [administrator. I already have](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=270.317)  [administrator access to KMS. So, what is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=271.98900000000003)  [this policy really giving me? Well, let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=274.84674999999993)  [go take a look at my user principal. On](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=277.37519999999995)  [the left menu, we'll go to Users, click on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=280.237)  [Ben, that's me, of course. And then let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=286.1140000000002)  [click on the AdministratorAccess policy.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=291.92487499999993)  [Now you may recall from earlier that my](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=296.168)  [user principal has administrative access](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=298.8930909090908)  [to all AWS services, including KMS via](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=300.9714)  [this AdministratorAccess policy. This is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=304.6687999999998)  [called an identity-based, or a user](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=307.30754545454545)  [policy. But this is not enough to grant me](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=310.4733636363636)  [permissions to use the key that we just](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=313.2052666666666)  [created, my principal must also be listed](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=315.55192857142856)  [in the encryption key's resource policy.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=318.4774285714284)  [What I want you to remember is that what a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=320.985)  [particular principal can do is determined](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=323.2714285714286)  [not only by the policies associated with](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=325.0826)  [that principal, but also by the policies](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=328.22070000000014)  [that are associated with a resource, which](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=331.01772727272737)  [in this case a key. All right, so we've](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=333.69776923076927)  [got the customer master key created. Next, I want to show you how to use it.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=1&mode=live&start=336.95023076923087)

### [Encrypting an Unencrypted EBS Volume](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live)

[Earlier in the course, we created one](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=0.931)  [instance with an unencrypted EBS volume.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=4.012615384615385)  [In this demo, you're going to learn how to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=6.654)  [convert an existing unencrypted EBS volume](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=9.549749999999998)  [to an encrypted EBS volume. Right now we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=12.035625000000003)  [have an instance named web1 running our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=15.886750000000003)  [tic-tac-toe application. First, you need](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=18.959166666666675)  [to stop the instance. We're going to be](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=20.949250000000003)  [snapshotting the root volume, so we don't](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=23.91525000000001)  [want any activity occurring while we're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=25.97950000000001)  [taking the snapshot. Now in the interest](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=27.673)  [of time, I have already stopped the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=29.700666666666656)  [instance. If you're following along, you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=31.762999999999998)  [can go ahead and perform this step on your](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=33.60500000000001)  [own. Next, we will take a snapshot of the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=36.34085714285714)  [instance as a root volume, as I said. We](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=39.055)  [will then make an encrypted copy of that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=41.415571428571454)  [unencrypted snapshot. This is the step](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=43.942)  [where the encryption actually takes place.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=46.37200000000001)  [After that, we'll create an Amazon machine](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=48.980000000000004)  [image, or AMI, of the encrypted snapshot.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=52.231)  [We will then launch another instance using](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=56.109)  [that image and the root volume of this new](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=58.380500000000005)  [image will be encrypted. As you can tell](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=61.354)  [from looking at these steps, there's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=64.079)  [currently no one-click way to convert an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=66.14000000000003)  [unencrypted volume to an encrypted volume.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=68.61018181818184)  [We've got to jump through a few hoops](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=70.75)  [here. So, let's start jumping. Let's jump](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=73.40599999999995)  [over to the EC2 dashboard. At the EC2](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=75.78584615384617)  [dashboard on the left side menu, go to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=78.66523076923082)  [Volumes menu option. You should see the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=81.99366666666668)  [volume for the web1 instance. The web1](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=84.6397777777778)  [instance is already stopped, but the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=87.34116666666668)  [volume shows in use because it is still](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=89.73866666666672)  [attached to the instance. Go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=92.88349999999998)  [make sure this is selected, then go up to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=95.20207142857144)  [the Actions menu and click on Create](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=97.51828571428575)  [Snapshot. We're going to describe this as](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=101.33175000000001)  [web1 snapshot, and then click on Create](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=105.95)  [Snapshot. Great! Now let's click Close.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=111.71012499999998)  [Now on the left side menu, go to Snapshots](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=114.38572727272725)  [right down here, and notice that the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=118.23963636363635)  [snapshot, like the volume, is unencrypted.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=122.04445454545451)  [To encrypt the snapshot, we need to make a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=124.77716666666664)  [copy and encrypt the copy. Once the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=128.57333333333332)  [snapshot is complete, let's go up to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=131.133)  [Actions menu and then select Copy. Here we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=134.94090909090914)  [can select the destination region, which I](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=138.9265)  [will leave as Northern Virginia, and I'm](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=141.49025000000006)  [going to change the description to web1](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=144.6726363636364)  [encrypted snapshot, and then I will tick](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=148.319)  [the all-important checkbox next to Encrypt](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=152.39859999999993)  [this snapshot. Now we're prompted to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=156.02800000000002)  [select a master key. Click on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=159.79000000000008)  [dropdown, and select the key we created](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=163.72790909090912)  [earlier, which is app-instance-volumes.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=167.06436363636374)  [Now let's click on Copy. And the snapshot](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=169.79212499999997)  [copy operation has been initiated. Let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=174.44625)  [click Close. And here is our snapshot](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=176.82454545454544)  [currently in progress. Now this process](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=182.94636363636363)  [takes awhile because we are copying and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=186.90418181818183)  [encrypting 8 GB of data. So if you're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=190.01727272727277)  [following along, now would be a good time](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=191.9147333333334)  [to pause the video, get something to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=193.575)  [drink, use the facilities or do something](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=195.73530769230774)  [else, but this is going to take about 5](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=197.9163846153846)  [minutes to complete. This snapshot has](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=200.8808461538461)  [been copied, and as you can see, down at](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=202.77992857142854)  [the bottom it has also been encrypted, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=205.51271428571417)  [there is the KMS key ID right there. Next](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=209.25199999999995)  [we need to create an Amazon machine image](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=213.76814285714286)  [or AMI from this snapshot. To do that,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=216.48928571428578)  [let's make sure that the copied snapshot](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=219.43650000000002)  [is selected. Click on Actions, and then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=222.34500000000008)  [click on Create Image. Notice that the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=227.016)  [root volume for this image is going to be](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=231.03923076923073)  [encrypted. If the snapshot is encrypted,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=233.89292307692293)  [then the volume is also going to be](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=235.61115384615385)  [encrypted with the same key. We will name](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=237.853)  [this one web1 encrypted, and set the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=241.91633333333328)  [virtualization type to Hardware-assisted](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=245.87137499999997)  [virtualization because that was the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=248.43587499999992)  [virtualization type the original image](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=250.98260000000005)  [used. And now let's click on Create, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=253.3646000000001)  [then Close. Now on the left side menu](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=258.42988888888897)  [under Images, click on AMI, and here's our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=263.25442857142855)  [nice new image. Make sure it is selected,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=267.939)  [and then click on Actions. Launch. We'll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=272.0196153846152)  [go ahead and stick with t2 micro. Click on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=275.8102222222222)  [Next. For the network, we are going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=280.7246666666667)  [select the tic-tac-toe VPC, and under](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=283.01933333333335)  [Auto-assign Public IP, click on Enable for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=286.45700000000005)  [this. Make sure we set the IAM role to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=291.4690000000001)  [tic-tac-toe-app. And then let's scroll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=296.1764999999998)  [down and click Next. Now notice that our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=298.5212307692308)  [root volume is encrypted. Again, this is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=302.32369230769234)  [because we created this image from an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=305.4968181818183)  [encrypted snapshot. Let's click on Next,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=308.96809090909096)  [add a tag, and we're going to give this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=312.63736363636383)  [one a name of web1-new. Excellent. All](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=317.10218181818186)  [right, click on Next. We will select an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=320.1896363636364)  [existing security group, which is the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=323.77218181818205)  [default VPC security group, and then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=327.28444444444455)  [Review and Launch. And then finally,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=331.034)  [Launch. I'll select the same key pair I](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=334.928)  [used earlier and then click Launch](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=339.1579999999999)  [Instances. All right, so now we've](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=342.2274285714284)  [launched a new instance with the encrypted](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=344.71861538461525)  [volume. Let's click on the instance ID,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=347.49007692307663)  [and here is our new instance backed by an encrypted EBS volume.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=2&mode=live&start=350.11114285714274)

### [S3 Access Permissions - Part 1](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live)

[In this demo, you'll learn how to set](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=1.634)  [access permissions on S3 buckets and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=4.5748)  [objects. First, we're going to do the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=6.780400000000002)  [obvious, create an S3 bucket. Next, we'll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=9.198363636363634)  [look at bucket access control lists, or](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=11.684999999999999)  [bucket ACLs, which are the Legacy way of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=14.407999999999994)  [setting permissions on a bucket. Although](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=17.110909090909093)  [bucket ACLs are Legacy, they are not](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=19.147333333333332)  [deprecated, so you still need to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=22.17366666666666)  [understand how they work. After that,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=24.440466666666666)  [we'll create and test a bucket policy.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=26.052866666666667)  [This doesn't sound like very much to do,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=27.934)  [but as you're about to see, this is going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=29.896857142857133)  [to be the longest demo in this module.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=32.226727272727274)  [Let's jump over to the S3 web console.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=34.514)  [Here at the S3 web console, let's click on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=38.23)  [Create bucket. And we are going to name](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=43.27818181818183)  [this one benpiper2019. And there's no](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=47.35733333333335)  [significance to this name, it just has to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=49.80892307692307)  [be unique. We will keep this in Northern](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=52.4033846153846)  [Virginia and then click Next. Let's click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=56.46545454545453)  [Next again. The options on this screen set](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=60.62854545454546)  [the permissions for the bucket access](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=65.90272727272728)  [control list, or ACL, which is a Legacy](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=68.41449999999998)  [method for setting S3 permissions. Now by](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=71.38422222222222)  [default, the root user of the account will](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=74.0177777777778)  [be the bucket owner. The bucket owner has](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=76.4984545454545)  [full access to the objects in the bucket](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=79.07385714285712)  [that we are creating, as well as full](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=81.81957142857138)  [access to change the access list for those](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=84.27400000000003)  [objects. The user ID, coastalcarolina, is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=86.6313333333334)  [the alias of my AWS account. If you have](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=89.31236363636367)  [not specified an alias, you may see a long](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=93.24935714285714)  [string called the canonical ID.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=96.46942857142854)  [Regardless, this is the root user. We're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=98.491)  [going to leave this entry alone. If we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=101.40091666666666)  [delete this rule, then the root user is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=103.78424999999999)  [not going to be able to read or write to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=105.93487499999998)  [objects in the bucket. The root user will,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=108.44862499999994)  [however, be able to give himself](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=111.31692307692312)  [permissions to objects in the bucket. I](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=113.56)  [know that sounds strange and confusing,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=114.81474999999998)  [and that's exactly why we're going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=116.01083333333334)  [leave this entry alone. Now notice that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=118.10966666666671)  [you can optionally grant other AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=120.72899999999998)  [accounts the same sort of access to this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=123.56899999999996)  [bucket. AWS recommends against doing this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=126.84036363636368)  [using an ACL. If you want to grant other](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=129.062)  [accounts access to your bucket, you should](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=130.6466923076923)  [do so using a bucket policy. Scroll down a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=132.72766666666664)  [bit. Now we do not want this bucket to be](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=136.2708571428571)  [publicly accessible by anonymous people on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=138.9037142857141)  [the internet, but if we did, we would just](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=141.63927272727273)  [click this drop-down and select grant](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=145.77224999999996)  [public read access to this bucket. As you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=148.10474999999988)  [might have guessed, AWS also recommends](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=150.8364545454545)  [against using a bucket ACL for this, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=152.715)  [encourages using a bucket policy instead.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=156.1367142857142)  [So we're not going to grant public access](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=158.703)  [using a bucket ACL. Lastly, we can grant](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=162.0930000000001)  [the S3 log delivery group access to our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=165.04953846153842)  [bucket. This is the one use case for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=167.57261538461523)  [bucket ACLs that AWS recommends. Server](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=170.9890000000001)  [access logging records every request](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=173.567)  [someone makes for an object and stores](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=175.382)  [that request information in a format very](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=177.99063636363636)  [similar to a web server log. When you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=180.6894545454545)  [configure server access logging, which we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=183.56827272727276)  [have not done, you must specify a bucket](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=185.64299999999997)  [to store those logs in. You then must](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=188.24299999999988)  [grant permissions to the S3 logging group](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=190.99578571428572)  [in the bucket ACL. That's what this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=193.62728571428573)  [setting does. We will leave this set to do](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=196.06976923076925)  [not grant, and then click Next, and then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=198.886076923077)  [finally we will create the bucket. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=202.4157692307693)  [there is our new bucket. Let's go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=205.51446666666666)  [and click on the bucket name. All right,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=208.24619999999996)  [that was the easy part. Now comes the less](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=210.9263846153846)  [easy part. I'm logged in as the IAM user](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=213.7676153846153)  [Ben. Let's click on Create folder, and we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=218.4385384615385)  [will name this new folder test. Now we are](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=222.48425000000003)  [not going to set up encryption yet; we'll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=225.10887500000013)  [get to that a little later. Click on Save.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=227.38700000000003)  [And it lets me create the folder. Now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=230.43580000000003)  [something to keep in mind is that S3](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=234.02633333333335)  [doesn't actually store folders, it stores](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=236.4530000000001)  [objects, but to make it easier to use, the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=238.25185714285715)  [S3 web console gives you a nice button to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=240.9184285714286)  ["create a folder. " What it actually](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=244.7004545454545)  [created here was an object named test/,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=247.9207)  [and that object appears as a folder. So](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=251.182)  [the bottom line is that creating an object](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=253.5598461538461)  [and creating a folder require the same](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=256.1876363636364)  [permissions. How did I get permission to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=258.85145454545477)  [create this so-called folder? Well, let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=261.39440000000013)  [click on the Permissions tab, and here is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=264.10661538461545)  [our bucket ACL, which lists the canonical](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=269.1890769230772)  [ID of my account, which is that long](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=272.0639230769232)  [string. But the ACL does not grant any](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=274.00176923076947)  [permissions, so I'm not getting](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=277.288)  [permissions here. Let's click on Bucket](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=279.4622857142857)  [Policy. And well, this is blank, so this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=282.2976)  [obviously isn't helping me. Now think back](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=285.75184615384615)  [to what I said earlier about](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=287.5223076923077)  [resource-based policies and identity-based](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=289.79485714285715)  [policies. A bucket policy is a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=292.3165714285715)  [resource-based policy. We do not have such](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=295.3398571428573)  [a policy attached to this bucket. But my](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=297.9674545454545)  [user principal does have an identity-based](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=300.8558181818182)  [policy and you remember what that is, it's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=303.50727272727295)  [that AdministratorAccess policy, which](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=307.32987499999996)  [gives me access to almost everything in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=309.21155555555555)  [AWS. So let's make this interesting. Let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=311.89644444444457)  [log in as a different user who does not](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=314.27984615384617)  [have full access to S3. Let's go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=317.3177142857143)  [open up IAM, but this time we'll open it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=320.48892857142874)  [up in a different tab. Now under Users,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=324.10527272727285)  [let's go over here to users, and then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=327.4641428571428)  [let's click on Phil, and let's go over to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=330.73385714285695)  [Groups, and we are going to detach Phil](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=335.42199999999997)  [from the AWS-Administrators group. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=340.038)  [this is going to detach the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=343.7007272727273)  [AdministratorAccess policy from his](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=348.096)  [principal. So as you can see, he has no](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=350.2775999999999)  [permissions now. Next, let's go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=353.5333999999999)  [add permissions, and we will attach](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=356.67433333333327)  [existing policies directly, and then under](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=359.63033333333317)  [Search, let's search for s3read, all 1](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=363.3460000000001)  [word, and we will select the AWS managed](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=367.58790909090914)  [policy, AmazonS3ReadOnlyAccess. Now if we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=371.6635454545456)  [expand this policy and go down a little](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=374.07081818181814)  [bit here, we can see that it grants](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=377.9426923076923)  [permissions to perform any S3 actions that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=382.34823076923084)  [begin with Get or List. This will give](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=385.59453846153843)  [Phil access to read buckets and objects in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=388.3773076923076)  [S3, but not write to them. Let's click on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=391.626)  [Next. And then Add permissions. All right,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=396.49275)  [in the next clip we are going to log in as Phil.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=3&mode=live&start=402.349)

### [S3 Access Permissions - Part 2](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live)

[Okay, we are now logged in as Phil and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=1.41)  [we're looking at the S3 dashboard. We can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=4.294199999999998)  [see the bucket we just created, so let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=7.2914615384615376)  [click on it. And there is the test folder.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=11.58930769230769)  [Excellent. Now, let's descend into this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=16.380999999999997)  [folder and let's try to create a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=19.63811111111111)  [subfolder. Let's go ahead and name this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=23.887888888888902)  [subfolder phil, scroll down and click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=27.219923076923084)  [Save. And, oh, failed to create a folder](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=29.944846153846168)  [named 'phil. ' And that is to be expected.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=33.0079)  [So, let's do this. We're going to give](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=36.81820000000001)  [Phil some limited access to this bucket,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=39.91726666666668)  [but not full access. We'll grant Phil](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=42.19973333333336)  [permission to write only to the test](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=44.663)  [folder without giving him permission to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=47.36733333333333)  [write to the root of the bucket. To do](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=49.176)  [that, we need to create a bucket policy.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=51.4734)  [Let's go ahead and switch back over to my](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=53.411)  [user principal. And here we are back in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=57.247454545454524)  [S3. We are logged in as Ben, and we are](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=59.973874999999985)  [looking at the Bucket Policy. Now down at](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=63.097)  [the bottom, look where it says Policy](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=65.56346153846154)  [generator. Let's click on Policy](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=68.69250000000001)  [generator. And here we're going to use](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=72.66125000000002)  [this to generate a bucket policy. Under](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=74.90450000000003)  [type of policy, we'll select S3 Bucket](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=76.88733333333333)  [Policy. The effect is going to be allow,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=80.62066666666665)  [and for the principal we need to put in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=83.2955333333333)  [the ARN of Phil's principal. So let's jump](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=86.137)  [over to IAM and grab that. We'll go back](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=89.28900000000004)  [to IAM, and Phil's user ARN, or Arn, is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=92.80092857142857)  [right here, we'll just copy this to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=96.24471428571427)  [clipboard. And now let's jump back to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=98.74485714285719)  [policy generator, and then just go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=101.058)  [and paste this in. And there we go. Now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=103.23181818181814)  [under Actions, we're going to select All](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=106.36707692307694)  [Actions. And the Amazon Resource Name](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=109.01738461538464)  [we're going to specify is the ARN of the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=111.55369230769233)  [bucket followed by the key. Let me put](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=115.24264285714285)  [this in first and then I will explain it.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=117.13578571428569)  [Now the first part of the ARN is pretty](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=120.19242857142858)  [self-explanatory. Benpiper2019 is the S3](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=124.40764285714287)  [bucket name, and /test indicates the test](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=127.74909090909088)  [folder, which is actually just an object;](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=132.777)  [/* is a wildcard. So this ARN indicates](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=135.95118181818182)  [all objects in the bucket that begin with](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=139.71361538461542)  [test/. Again, remember that S3 doesn't](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=143.6108461538463)  [store folders, it just stores objects with](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=145.93618181818184)  [the / in the name. Now let's click on Add](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=148.66825)  [Statement. And then Generate Policy. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=153.93075000000005)  [here is the bucket policy. By the way, if](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=157.09749999999997)  [you wanted to grant this same access to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=160.84679999999997)  [Phil using an identity-based policy, you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=163.06439999999992)  [could copy this exact same document,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=165.84033333333335)  [remove the ID, and the principal elements,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=169.729)  [and paste it into an inline policy on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=172.50153846153844)  [Phil's IAM user principal. Keep in mind](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=175.4470769230769)  [that you only need to do one or the other.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=177.43884615384613)  [If you do an identity-based policy, don't](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=180.48199999999997)  [do an overlapping bucket policy. In this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=182.65966666666668)  [case, we are creating a bucket policy, so](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=184.56833333333344)  [we are not going to make any policy](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=186.7487142857143)  [changes to Phil's user principal. Okay,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=188.92814285714292)  [let's go ahead and highlight all of this,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=191.13663636363634)  [copy it to the clipboard, and now let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=194.53623076923077)  [back to S3. And then we're going to paste](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=198.93030769230768)  [in this policy document. Excellent. So](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=203.03620000000004)  [this bucket policy will give Phil full](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=205.484)  [access to the test folder object and all](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=207.88850000000005)  [objects within it. All right, let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=211.21962500000004)  [ahead and hit Save. And now let's jump](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=214.2528571428571)  [over to Phil's session and test that this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=217.5585714285713)  [works as expected. Okay, so here we are as](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=219.8963333333333)  [Phil again. We're still trying to create](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=222.54920000000004)  [this folder. So, we've already got the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=224.7626000000001)  [folder name populated in here. I'm just](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=226.83000000000004)  [going to try to click Save again. And that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=229.1443333333333)  [works. Excellent. Okay, of course you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=233.10133333333317)  [could further restrict the policy to allow](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=235.03281818181816)  [Phil to only read and write objects, but](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=237.17658333333333)  [not delete them, but at any rate, this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=240.0052500000001)  [works great. Next, let's look at two](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=242.7821538461538)  [different ways to grant public access to objects in our bucket.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=4&mode=live&start=245.1847692307691)

### [CloudFront Origin Access Identity](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live)

[[Autogenerated] In this demo, you'll learn](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=1.09)  [how to grant a cloudfront origin access](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=2.26)  [identity access to an s three bucket. This](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=4.81)  [is useful when you want to make objects in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=8.19)  [an s three bucket available on Lee via a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=10.16)  [cloudfront distribution. But you don't](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=12.71)  [want to make those objects accessible](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=15.1)  [directly from the bucket itself. We'll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=17.11)  [start by creating an s three bucket that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=19.6)  [will serve as the origin for the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=21.8)  [cloudfront distribution. Next, we'll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=23.7)  [create a cloudfront origin excess identity](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=26.15)  [and granted read only access to the S](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=28.91)  [three bucket finally will create the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=31.45)  [cloudfront distribution and test it all](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=33.82)  [out for this particular demo. I'm gonna be](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=36.15)  [using the eight of US command line](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=38.73)  [interface. You can follow along using the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=40.56)  [course exercise files available in my get](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=42.68)  [hub depository at the girl you see here in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=45.21)  [my visual studio code editor. I have three](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=50.73)  [files loaded. Cli dash commands up. Shh.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=53.09)  [Bucket policy dot Jason and dissed dash](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=56.39)  [config dot Jason for the eight of us. See,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=59.27)  [Ally, I have a named profile already](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=62.2)  [configured someone a load that up first to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=64.38)  [start off, I'm gonna create a bucket named](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=67.92)  [ben piper dot com dash cloudfront.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=69.98)  [Remember that by default this bucket and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=75.44)  [any objects we put in it or not publicly](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=77.84)  [accessible. Next, we'll create a simple](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=80.63)  [hello world index dot html file and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=83.08)  [uploaded to the bucket. Highlighting these](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=86.07)  [three lines here will create an origin](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=93.52)  [access identity that will use to grant](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=95.58)  [cloudfront read only access to the bucket](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=98.45)  [in the output there to values you want to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=102.08)  [take note of the first is the I D. And the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=104.04)  [second is the S three economical user i d.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=106.66)  [We're gonna use the i d to associate the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=110.14)  [origin access identity with the cloudfront](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=112.34)  [distribution that will create in a moment](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=115.01)  [we're going to use the S three canonical](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=117.2)  [user i d to grant the origin excess](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=119.1)  [identity. Read only access to the S three](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=121.94)  [bucket using a bucket policy. So let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=124.71)  [start with the ladder. Let's go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=127.42)  [copy the S three canonical user I d. Right](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=129.35)  [here And then let's jump over to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=132.18)  [bucket policy dot Jason file. Now this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=135.27)  [bucket policy grants read only access toe](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=138.38)  [all objects in the bucket for the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=140.83)  [principal will simply paste in the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=142.87)  [economical user i d and then save the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=145.56)  [file. Now let's jump back over to the CLI](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=148.58)  [dash commands. That s H file scrolling](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=152.17)  [down here. We want to go ahead and apply](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=156.34)  [that policy to the bucket. And if all goes](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=158.59)  [well, we should get no output, But it's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=163.13)  [always a good idea to verify. So let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=165.59)  [ahead and do that. I noticed that the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=167.94)  [principal does not show the s three](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=169.93)  [canonical user i d. But instead, it shows](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=172.11)  [an A r in noticed that the Aaron ends with](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=174.57)  [the idea of the origin access identity.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=177.82)  [We're gonna use this i d when creating the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=182.44)  [cloudfront distribution. So let's go and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=184.53)  [copy this to the clipboard and then jump](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=186.4)  [over to the dest dash config dot Jason](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=188.47)  [file. Now, this files about 100 lines](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=190.94)  [long, so I'm not gonna go through all or](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=194.5)  [even most of it. This is mostly a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=196.44)  [boilerplate configuration that you can get](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=198.62)  [from the cloudfront documentation, but I](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=200.95)  [want to direct your attention. Toe line 11](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=203.31)  [Been piper dot com dash cloudfront desh](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=206.08)  [demo is the name of the cloudfront origin](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=208.67)  [online 12. We've got the domain name of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=211.84)  [the S three bucket. No, I'm operating in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=214.82)  [the U. S. East One region so I don't need](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=216.71)  [to specify the region code here, but if](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=219.06)  [you're using a different region, you'll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=221.31)  [need to specify the region code. Okay,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=222.8)  [let's go down the line 18. And here,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=225.24)  [online 18. We need to specify the origin](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=227.54)  [access identity that this distribution](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=229.95)  [will use to access the bucket. The format](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=232.83)  [here is rather peculiar. Its origin desh](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=235.86)  [excess dash identity for a slush](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=238.63)  [cloudfront four slash and then we're gonna](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=241.12)  [go and paste in the origin. Excess](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=243.64)  [identities identifier. Now, one more thing](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=245.76)  [with this file, let's go down the line 27.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=249.19)  [Make sure that the target origin I d. Is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=251.42)  [the same as the cloudfront origin up](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=254.37)  [online. 11. All right, let's go and save](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=256.44)  [this file here and then return to the seal](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=259.31)  [I dash commands. That s H file. All right,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=263.01)  [we're almost done. Let's create the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=265.51)  [cloudfront distribution referencing the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=267.01)  [dest dash config dot Jason file. This is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=269.46)  [in progress and it usually takes anywhere](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=275.01)  [between four and 20 minutes to create the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=277.31)  [distribution. Noticed that it gives us the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=279.72)  [domain name for the distribution which we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=282.03)  [will go ahead and copy so that we can test](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=284.44)  [it out once the distribution becomes](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=288.63)  [available now to check the status weaken](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=290.5)  [do in aws cloudfront list distributions,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=293.39)  [and it's not done yet, So we'll go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=298.44)  [and give it a few minutes. Open up our web](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=300.34)  [browser and browse to the domain name. All](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=302.47)  [right, I've been checking on this, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=305.53)  [after just a few minutes, we see the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=306.78)  [cloudfront distribution has been deployed.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=308.83)  [So now we should be able to go to our web](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=311.28)  [browser paste in that domain name, and we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=313.81)  [should see Hello, world eerie Orie Crume](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=317.35)  [paste in the domain name. Hello, world.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=320.47)  [Hello, world Indeed. Here on our web](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=323.78)  [browser, we see the Web page being served](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=325.48)  [from that index dot html file in our s three bucket.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=5&mode=live&start=328.28)

### [Granting Anonymous Access with Object ACLs and Bucket Policies](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live)

[In this demo, I'll show you two ways to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=1.272)  [grant anonymous access to individual](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=3.996923076923078)  [objects without granting access to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=5.7811111111111115)  [entire bucket. First, when you upload an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=9.219777777777777)  [object to S3, you can grant anonymous](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=12.354846153846157)  [access by granting read permissions to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=15.139230769230778)  [everyone using the object ACL. This is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=17.801000000000002)  [literally just flipping a switch. The](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=20.730538461538462)  [other way is using a bucket policy to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=22.727153846153843)  [grant everyone permission to perform the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=25.728399999999993)  [GetObject action against the object that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=28.403199999999984)  [you want to share. Sounds like fun! Let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=30.847333333333324)  [jump over to the S3 web console. I'm back](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=34.17290909090909)  [at the S3 web console, and I am logged in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=37.701)  [as myself. We are not working under Phil's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=40.231)  [user principal. Let's dive into the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=43.182749999999984)  [benpiper2019 bucket, and then let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=46.58666666666666)  [ahead and descend into Phil's folder. All](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=50.46966666666664)  [right, now here in Phil's folder, we are](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=54.20354545454546)  [going to upload a file. We'll click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=58.245000000000005)  [Upload, Add Files, and on my desktop the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=62.14400000000002)  [file I'm going to select is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=66.58038461538465)  [object-acl-test. txt. And then click Next.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=69.89884615384622)  [And notice that it automatically grants my](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=72.75372727272725)  [root user ownership of the object, which](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=75.814)  [is fine. Down under Manage public](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=79.21988888888887)  [permissions, click on the drop-down, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=82.00677777777777)  [select Grant public read access to this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=84.81533333333333)  [object. And it tells us this object has](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=88.60466666666662)  [public read access, which is what we want.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=91.12886666666664)  [Click on Next. Next again. And then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=93.395)  [finally, Upload. And there is the object.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=99.5277777777778)  [Now, let's click on the object name. Now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=104.14291666666664)  [notice at the very bottom, there's a link](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=108.42875)  [to the file. If I click on this link,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=110.65074999999997)  [you'll see that it opens this file in my](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=114.52225000000003)  [browser. Not a big surprise there. But](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=119.07962500000008)  [check this out. Let's click Back, and now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=121.20533333333331)  [let's jump over to the Permissions tab.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=126.09750000000003)  [Down under Public access, we have the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=131.813)  [object ACL entry that grants read access](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=134.19416666666672)  [to everyone. Click on this entry. And then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=137.24300000000002)  [let's uncheck the Read object checkbox,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=142.55866666666665)  [and then click Save. Now we've removed the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=146.3736666666666)  [permissions. All right, now let's go back](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=149.9803333333333)  [to the Overview tab, and now let's click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=151.84116666666654)  [on the same link again. Notice this time](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=157.4275833333334)  [we get an access denied message. Why?](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=162.509)  [Remember that I'm logged in as a user](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=165.39753846153846)  [principal that has full administrative](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=168.00984615384615)  [access to S3. Why can't I access this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=169.7957)  [object? Because when I clicked on this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=173.63330000000008)  [link, my browser made what's called an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=175.8225384615384)  [anonymous request to S3 for the object. It](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=177.817)  [did not include any authentication](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=180.8663333333334)  [information along with the request. My](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=182.815)  [browser simply made a normal,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=185.43108333333333)  [unauthenticated HTTP request for the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=187.9115)  [object. Now if you gave this link to an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=190.39191666666665)  [anonymous user on the internet, and they](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=193.09907692307692)  [went to it, their browser would do the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=194.974)  [same thing. All right, let's go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=196.94599999999997)  [click Back. Now notice the Download button](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=200.50149999999994)  [just underneath the Overview tab. Click on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=204.31411111111112)  [Download. And you can see it downloads the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=209.564888888889)  [file. Let's go ahead and open it. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=212.81949999999998)  [there is our file. Now when I clicked that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=215.6556666666667)  [Download button, AWS generated what's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=218.6406666666668)  [called a pre-signed URL containing my AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=221.08000000000004)  [credentials. My browser then went to that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=225.22400000000013)  [pre-signed URL to download the file. This](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=228.28999999999994)  [is called an authenticated request because](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=231.1357)  [the request included my AWS credentials.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=233.36590000000004)  [Now this is getting beyond the scope of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=235.37224999999995)  [this course, but just understand that in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=237.7489166666665)  [order to access an S3 object that is not](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=240.45749999999998)  [publicly accessible, that request must](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=244.03633333333332)  [include authentication information, so](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=245.98188888888885)  [that AWS can determine who you are and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=247.65527272727275)  [whether you have access to the object. All](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=251.08)  [right, next let's upload another object](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=253.53666666666672)  [and then modify our bucket policy to make](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=255.74715384615382)  [it publicly accessible. Let's go back into](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=259.6757692307694)  [Phil's folder here. And we're going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=262.89814285714294)  [click Upload again. Add files. And this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=265.9591428571431)  [time we're going to upload](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=269.89645454545445)  [bucket-policy-test. txt. And click Next.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=273.1782727272725)  [This time we are not going to grant public](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=275.6776153846154)  [permissions. Click Next. Next again. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=279.23746153846173)  [then finally, Upload. And there it is. All](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=283.351125)  [right, now let's click on the bucket name](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=287.5123571428571)  [right here, and then go under Permissions,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=290.60092857142854)  [and then let's go to the Bucket Policy.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=294.4982857142858)  [Now what I'm going to do here is I am](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=299.18)  [going to add another statement right here,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=301.55799999999994)  [I'll just do a comma, and then paste in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=303.615)  [something right here. And then I'm going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=307.52099999999973)  [to go ahead and save this. And now it says](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=310.19819999999993)  [this bucket has public access. Hmm, what](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=312.97033333333326)  [happened here? All right, well, let's take](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=314.4599230769231)  [a look at this. Under this new statement I](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=316.57015384615374)  [added, notice that the principal is an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=319.74974999999995)  [asterisk, indicating everyone. The action](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=322.513)  [is s3:GetObject, which allows read access,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=326.10228571428576)  [but no write access. The resource is the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=329.28549999999996)  [ARN of the object that we just uploaded.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=332.5623333333334)  [So what this is going to do is this is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=335.621)  [going to give everyone anonymous access to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=338.20600000000024)  [this particular object using this bucket](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=340.8168)  [policy. So right now that object is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=343.9704)  [public. Now the warning that we got saying](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=345.9872307692309)  [that this bucket has public access is kind](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=348.2333636363636)  [of misleading because the entire bucket is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=352.28427272727265)  [not public, it's just this one object.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=354.96575000000007)  [Nevertheless, AWS has decided to warn you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=357.302)  [if you have anything in any of your](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=360.7513846153846)  [buckets that is public. All right, so](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=364.40833333333336)  [let's do this. Let's go back into Phil's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=366.8595)  [folder. I'm going to scroll up here, go to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=369.9966666666666)  [Overview, and then we will descend back](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=373.7256666666667)  [into Phil's folder. Excellent. And then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=376.5525000000002)  [let's click on bucket-policy-test. txt.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=379.66037499999993)  [That's the object we want. And let's click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=382.821)  [the link at the bottom. And now it works.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=386.8745384615387)  [Fantastic! Now if we go back, and then go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=392.09000000000003)  [back again, and let's try to click this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=398.12450000000007)  [other file, object-acl-test, and then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=403.15880000000004)  [let's go to the link here, notice that it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=405.8912857142857)  [does not work. So, the entire bucket is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=409.7715714285713)  [not public, but just that one object, which we specified in the bucket policy.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=6&mode=live&start=412.96416666666676)

### [Encrypting S3 Objects with KMS-managed Keys (SSE-KMS)](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live)

[In this demo, I'm going to show you how to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=1.381)  [use KMS Managed Keys to encrypt objects](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=3.810999999999999)  [stored in S3. This is similar to what we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=5.6470769230769235)  [did earlier with an EBS volume, but much,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=8.44192307692308)  [much easier. First, we'll generate a new](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=12.385500000000004)  [customer master key. We'll then configure](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=15.858000000000004)  [our bucket to encrypt all objects moving](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=18.56263636363636)  [forward. And, of course, most importantly,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=21.562454545454536)  [we'll verify that those who don't have](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=23.429181818181814)  [permission to use the customer master key](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=25.603076923076923)  [cannot access the encrypted data. That is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=28.739615384615377)  [the primarily purpose of encryption, after](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=31.606888888888893)  [all. Let's jump over to the IAM web](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=33.48755555555555)  [console and take a look at our KMS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=36.23041176470586)  [encryption keys. Here we are going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=39.00688235294113)  [click on Create key. And under alias,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=43.00558333333333)  [we'll call this s3-bucket-key, and then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=47.632)  [click Next. Next again, we're not going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=52.12600000000001)  [add a tag this time. Now under](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=55.26581818181818)  [Administrator, we will make me, Ben, the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=57.5596)  [administrator. Click Next. And under the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=60.79920000000001)  [key usage permissions, we will also add me](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=63.867000000000004)  [to the policy, and then click Next Step,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=68.05066666666666)  [and then Finish. Okay, there is our key.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=72.34399999999995)  [Great! Now, next let's jump over to S3.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=76.01553846153845)  [Let's click on the bucket we created a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=79.314)  [little earlier. And then let's go under](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=83.09640000000005)  [Properties. Now look under where it says](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=86.362)  [Default encryption. If we click on this,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=89.60999999999999)  [we get a couple of options. Now, the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=93.08845454545452)  [AES-256 options performs server-side](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=97.34677777777779)  [encryption using the AWS S3-Managed Keys.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=99.74233333333336)  [These are not KMS-Managed keys. These are](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=103.383625)  [keys AWS manages behind the scenes and you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=107.21706666666665)  [have no access to them. The AWS-KMS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=110.25333333333327)  [option, on the other hand, lets you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=113.06733333333334)  [encrypt your S3 objects using a customer](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=116.27450000000003)  [master key, like the one we just created.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=119.24033333333335)  [So, let's go ahead and select that key,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=122.423)  [and it was called s3-bucket-key. Now one](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=125.78423076923082)  [advantage of using KMS here is that you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=128.49269230769232)  [can use CloudTrail to audit the use of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=130.92346153846165)  [your customer master key. You can also](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=133.3122222222223)  [restrict access to encrypted objects by](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=135.6964)  [restricting access to the keys used to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=138.10120000000003)  [encrypt them. We're going to demonstrate](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=140.44600000000008)  [how that works in a moment. All right,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=142.39)  [before we go on, notice it says this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=144.35933333333344)  [property doesn't affect existing objects](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=147.0313333333333)  [in your bucket. This encryption applies](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=149.14049999999992)  [only to objects we create moving forward,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=151.53759999999997)  [so keep that in mind. Let's click Save.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=154.178)  [And now back over to the Overview tab.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=158.52949999999998)  [Here we're going to go ahead and upload a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=162.881)  [file, which S3 should encrypt. Here I'm](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=166.4006428571428)  [going to upload encryption-test. txt.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=169.738)  [Next, Next. Now under Encryption, you can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=173.193)  [see that None is selected. That seems bad,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=177.66366666666667)  [but if you hover over the i icon, let me](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=181.7556)  [scroll a little bit here, you can see that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=184.75093333333328)  [it says S3 will encrypt objects according](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=187.73861538461543)  [to the bucket settings. So, that's good.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=190.21575)  [All right. We'll go ahead and click on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=193.224)  [Next. And then Upload. And there is our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=196.88888888888897)  [file. Go ahead and click on it. And under](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=200.73500000000007)  [server-side encryption, S3 tells us that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=205.06583333333333)  [it is using KMS. And if I click on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=207.89433333333335)  [Download here, and then open the file,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=212.40115384615385)  [boom, there is the file. So, encryption](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=216.07076923076923)  [and decryption works. Now here is the real](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=219.66433333333336)  [test. Let's log in as Phil and see if Phil](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=222.44993750000006)  [can download this file. All right, we are](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=224.95181250000016)  [logged in under Phil, and I'm looking at](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=229.07299999999998)  [the bucket, and I see the test folder, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=232.54166666666666)  [let's descend into the test folder, and we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=235.46550000000002)  [see Phil's folder, but the file that we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=238.74950000000013)  [just uploaded is not there. Let's look in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=242.20850000000004)  [Phil's folder. Well, no, it's not there](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=245.59481818181823)  [either. We have the two files that we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=248.2987272727274)  [uploaded initially, but that last file,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=251.1231538461538)  [which we encrypted, is not there. Let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=253.213)  [ahead and jump back to the root of the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=256.0579230769231)  [bucket. This is where we uploaded the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=259.0283333333334)  [files, but it's not there. The reason is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=261.1149166666669)  [that Phil has no permissions to decrypt](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=264.061153846154)  [the data using the customer master key,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=266.68015384615387)  [and so he does not even so much as see the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=269.12423076923085)  [object. Now remember, Phil does have a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=272.74285714285725)  [user policy that grants him access to read](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=274.92785714285736)  [everything in S3, but that is not enough.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=277.83186666666677)  [He also needs access to use the key that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=280.794)  [was used to encrypt the object we uploaded.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=7&mode=live&start=284.124)

### [Summary](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live)

[Protecting data at rest sounds like it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=0.967)  [should be a simple affair; set your access](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=3.171416666666666)  [controls and encrypt your data. And that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=5.789625000000001)  [really is all there is to it, but when it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=7.926500000000001)  [comes to how you implement your access](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=9.914000000000005)  [controls and encryption, things get](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=12.447666666666668)  [complicated. Let's start with encryption.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=15.34544444444445)  [Now you can use the key management](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=16.944272727272722)  [service, or KMS, to create customer master](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=18.728)  [keys. These keys are what encrypt and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=22.02762499999999)  [decrypt your data. You can use one key for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=24.75899999999999)  [multiple services, or create a separate](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=27.526076923076918)  [key for each service, or even each](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=29.163153846153836)  [resource. Keep in mind that in order for a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=31.41461538461538)  [principal to use a customer master key,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=34.33033333333333)  [they must have permissions in the key](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=36.45599999999998)  [policy. Encrypting an EBS volume is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=39.22180000000001)  [straightforward, although it takes a few](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=42.004)  [steps, take a snapshot of the volume, make](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=43.710181818181816)  [an encrypted copy of it, then create an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=46.34307692307693)  [AMI using that encrypted snapshot. Launch](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=49.57261538461541)  [a new instance using the AMI and you're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=51.83963636363635)  [good to go. Encrypting S3 objects is a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=54.79518181818182)  [different story. Now if you enable KMS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=58.004636363636365)  [encryption on a bucket, only new objects](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=60.70776923076923)  [created in that bucket are encrypted. If](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=63.36884615384615)  [you want to encrypt existing objects, you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=65.10827272727275)  [have to go and modify the properties of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=67.15585714285713)  [each object to encryption. If you delete a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=70.81528571428565)  [key that has been used to encrypt data,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=74.06020000000002)  [you will not be able to recover that data.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=76.89060000000008)  [Once the key is gone, the data is gone.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=79.65879999999996)  [For this reason, when you try to delete a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=82.219)  [key, KMS imposes a minimum seven-day](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=85.50399999999995)  [waiting period before it actually deletes](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=87.79525)  [it. Before you delete a key, make sure](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=90.59275000000001)  [that you have permanently decrypted all of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=93.68983333333333)  [the data that was encrypted with that key.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=96.2872)  [When it comes to S3 permissions, you have](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=99.16)  [3 options; access control lists, or ACLs,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=101.45840000000001)  [bucket policies, and user policies,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=104.43999999999997)  [sometimes called identity-based policies.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=106.847)  [AWS recommends against using bucket ACLs](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=109.78642857142854)  [in most cases, and opting for bucket or](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=113.33328571428572)  [user policies instead. However, if you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=116.91271428571432)  [need to grant anonymous access to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=119.24363636363636)  [individual objects, you may find it easier](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=121.22090909090907)  [to do so using an object ACL. You simply](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=123.91166666666668)  [modify the ACL of the object to grant the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=127.48906666666667)  [read permission to everyone. Bucket and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=130.7878666666667)  [user policies are almost identical. The](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=133.0337142857143)  [key difference between them is that bucket](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=135.373)  [policies contain the principal element,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=138.1029999999999)  [while user policies do not. In the next](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=140.3387142857143)  [module, you're going to learn how to use](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=143.9710769230769)  [encryption to protect data in transit. See you there.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=d3bb6aa4-0438-4842-860d-9f167050115b&clip=8&mode=live&start=146.55261538461536)

## [Protecting Data in Transit](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live)

### [Introduction to Protecting Data in Transit](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live)

[Welcome back. In this module, I'm going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=0)  [show you how to protect data in transit as](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=3.7138461538461547)  [it moves between users on the internet and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=7.9320666666666675)  [the AWS cloud. As I've said previously,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=11.726200000000002)  [the way you protect data in transit is by](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=14.552733333333334)  [encrypting it. I want to emphasize here](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=17.711133333333336)  [that this module focuses on encrypting the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=20.45466666666666)  [data between users on the internet and the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=23.313)  [AWS cloud. It is not about virtual private](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=26.350599999999996)  [networks or connecting your on-prem](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=29.961636363636366)  [resources to AWS. If that's something you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=32.338)  [are interested in, stay tuned and I will](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=35.19400000000001)  [tell you where to go to learn more about](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=38.15633333333334)  [that. Now the standard for encryption over](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=41.28533333333336)  [the internet is the Transport Layer](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=43.59936363636364)  [Security, or TLS protocol. People usually](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=45.84758333333333)  [refer to TLS as SSL, or secure sockets](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=49.50508333333333)  [layer, which is actually a different](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=53.77454545454545)  [protocol that nobody uses anymore.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=56.217636363636366)  [However, the term SSL has stuck, and so](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=58.3415)  [you'll often hear people say SSL or](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=61.83350000000002)  [SSL/TLS. You'll also hear the term HTTPS,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=65.5965)  [or secure HTTP. TLS is the underlying](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=69.50872727272727)  [protocol that enables HTTPS, which is just](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=73.60881818181815)  [a way of carrying HTTP requests and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=77.36766666666666)  [responses over an encrypted TLS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=80.87058333333333)  [connection. At any rate, in normal](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=82.97827272727274)  [conversation people use these terms](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=85.38918181818185)  [interchangeably because they all achieve](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=87.45299999999997)  [the same goal of encrypting data in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=89.53049999999995)  [transit. Just keep in mind that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=91.83299999999997)  [technically speaking they are not the same](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=93.72)  [things. There are two ways you can use TLS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=95.90575000000004)  [to secure traffic between the internet and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=98.84507692307697)  [the cloud. The first way is by configuring](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=101.11936363636363)  [your application to use TLS. How you do](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=103.64881818181817)  [that, of course, depends on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=106.7477333333333)  [application itself. How you configure an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=109.13293333333327)  [application to use TLS is substantially](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=111.49366666666668)  [the same whether that application is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=113.84216666666671)  [running in AWS or somewhere else. So, this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=116.2482)  [option is beyond the scope of this course,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=119.30946153846155)  [but there is another course where I do](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=121.81530769230771)  [cover this advanced approach, and I'll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=124.5458333333333)  [tell you where that course is in a moment.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=126.69483333333328)  [The second way to encrypt data in transit](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=129.27928571428572)  [is to configure an AWS application load](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=131.71766666666667)  [balancer to use TLS, and then you force](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=134.408)  [your internet clients to connect to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=137.45099999999994)  [load balancer, which in turns proxies](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=140.09699999999984)  [those connections along to your instances.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=142.53409090909088)  [This latter approach is what we're going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=145.005)  [to do in this course. We're going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=147.30683333333334)  [outsource the TLS encryption to an AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=150.2118181818182)  [application load balancer, and that will](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=153.1537272727273)  [not require any changes to our application](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=155.69592307692307)  [itself. Configuring TLS to encrypt traffic](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=158.66661538461534)  [between users and the AWS cloud is super](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=161.27725000000004)  [easy; in fact, it's probably one of the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=164.63407692307692)  [easiest things you can do on AWS. First,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=167.0026923076923)  [to simulate a realistic web application,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=170.139)  [we're going to bring up another instance](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=173.067)  [in another subnet, and that one is also](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=175.59399999999994)  [going to be running the tic-tac-toe web](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=178.44161538461537)  [application. Next, we'll configure an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=180.9120769230769)  [application load balancer to load balance](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=182.793)  [between these two instances. Now here is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=185.085)  [where the encryption part comes in. We'll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=187.63138461538466)  [use the AWS Certificate Manager, the ACM,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=190.30923076923077)  [to generate a TLS certificate. We'll then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=193.77584615384617)  [install this certificate on the load](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=197.1991111111111)  [balancer. Now, the purpose of the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=200.0404444444444)  [certificate is to authenticate or](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=202.36672727272733)  [establish the identity of a website,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=204.21945454545465)  [specifically the domain name. So, what the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=207.07888888888886)  [means is that we're going to need to come](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=209.63399999999996)  [up with an internet domain name for our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=211.32599999999985)  [application. If you want to follow along](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=213.66409090909093)  [with me here, you will need access to an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=216.11738461538462)  [internet domain name for which you control](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=219.03684615384617)  [the DNS records. Once we get everything](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=221.35400000000004)  [set up, a client on the internet can then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=223.70600000000013)  [browse to the domain name of our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=226.47114285714278)  [application and establish an encrypted](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=228.74055555555557)  [connection to the application load](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=230.9783333333334)  [balancer. Everything moving back and forth](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=233.14775)  [between the client and the load balancer](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=235.628)  [is encrypted, and thus protected from](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=237.92088888888892)  [being sniffed or modified. Now something](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=240.76499999999996)  [to note here is that the traffic inside](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=243.65553846153847)  [the AWS cloud is not encrypted. It is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=246.46169230769232)  [possible to encrypt this traffic; however,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=249.8125)  [how you do that depends on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=252.36884615384614)  [application, and as I said,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=254.17376923076915)  [application-specific configurations are](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=255.463)  [beyond the scope of this course. As an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=256.87266666666665)  [architect, you need to understand the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=260.375)  [pieces in play here, and how they work](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=262.424)  [together. Obviously you also need to know](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=264.8690769230769)  [how to implement all this in AWS, which is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=266.75746153846137)  [exactly what you're going to learn in this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=269.1196923076924)  [course. If you want to go deeper into TLS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=271.6346666666667)  [and specifically how to encrypt the data](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=274.94299999999987)  [between an application and a load](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=277.39283333333333)  [balancer, you will enjoy my course AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=279.34783333333326)  [Networking Deep Dive: Elastic Load](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=282.09475)  [Balancing. Specifically, the module](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=284.889125)  [Securing Web Applications with HTTPS. In](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=287.5528749999999)  [that course, I show you how to set up](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=291.3668571428571)  [multiple levels of load balancers and how](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=294.1195714285712)  [to encrypt data moving internally within](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=296.52799999999996)  [the AWS cloud. Again, that is an advanced](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=298.89799999999985)  [configuration and it's really overkill](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=302.6360000000001)  [unless you have very strict security](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=305.189)  [requirements. Nevertheless, I include it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=307.47842857142854)  [here for further reading. Anyway, let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=309.9705)  [take a look at what we're going to do in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=312.6062857142857)  [this course. First, we're going to perform](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=315.2327142857142)  [a bit of preparation work to get our VPC](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=317.459923076923)  [ready for the load balancer. We need to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=320.4546923076923)  [create a secondary CIDR block for the VPC,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=322.62823076923087)  [another subnet, and another instance. We](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=325.9092222222221)  [have to bring up the tic-tac-toe web](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=329.01758333333333)  [application on both instances, and make a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=331.57666666666677)  [few changes to our default security group.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=334.0152)  [Next, we'll generate a TLS certificate,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=336.293)  [create a load balancer, and configure the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=339.16340000000014)  [load balancer to use the certificate to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=342.26090909090914)  [encrypt traffic between itself and clients](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=345.0233636363638)  [on the internet. There's not a lot to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=347.0748749999999)  [this, but the order here is very important. Let's get started.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=0&mode=live&start=349.4439999999999)

### [Preparing for the Load Balancer](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live)

[The application load balancer requires](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=1.464)  [instances in at least two different](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=3.8689999999999998)  [availability zones. Right now we have only](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=6.723222222222223)  [one, so we're going to create another](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=9.867777777777777)  [subnet in a different availability zone,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=12.461727272727277)  [and then we'll bring up a second web](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=14.69425)  [instance named web2. After that, we'll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=18.25625000000001)  [launch the tic-tac-toe application on both](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=20.686181818181815)  [of our instances, web1-new and web2. Last,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=22.874545454545448)  [but not least, we're going to reconfigure](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=26.123090909090912)  [our VPC's default security group to permit](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=29.635454545454547)  [access to and from the load balancer. Now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=33.06163636363636)  [this is what we want to end up with at the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=36.9946875)  [end of this clip. Notice the original](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=39.24624999999998)  [subnet and the new subnet are in different](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=41.1863076923077)  [availability zones. If you're not familiar](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=44.176461538461574)  [with AWS diagrams, those dashed orange](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=46.89345454545454)  [lines represent an availability zone.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=49.84763636363635)  [Again, this is a requirement for the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=51.56181818181818)  [application load balancer. We cannot put](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=53.7)  [the instances in the same zone. Of course,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=55.99449999999999)  [different zones entails different subnets.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=59.61414285714285)  [And creating another subnet means we need](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=62.927)  [to create a secondary VPC CIDR because our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=65.66983333333334)  [primary CIDR does not have any space for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=68.75515384615386)  [additional subnets. Okay, we'll start out](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=71.7582307692308)  [by creating a secondary CIDR block for our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=74.14930769230772)  [VPC. Let's go over to the VPC dashboard.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=77.42992307692315)  [We need to create another subnet because](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=80.939)  [the application load balancer requires our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=83.50800000000002)  [targets, that is, our instances, to be in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=85.79783333333333)  [different zones. To do that, we need to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=89.08516666666665)  [create a secondary CIDR for the VPC. So to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=91.6751538461538)  [do that, we're going to go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=94.44507692307693)  [select the tic-tac-toe VPC, go up to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=97.27338461538463)  [Actions menu, and then Edit CIDRs. Let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=101.16763636363639)  [scroll down a bit, and then down under](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=105.04441666666666)  [VPC, IPv4 CIDRs, click the Add IPv4 CIDR](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=108.85574999999999)  [button, and here we're going to do 172.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=113.24125000000001)  [27. 1. 0/24. And then over there on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=117.97125000000003)  [very far right, click the checkmark, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=122.78450000000004)  [it likes it. All right, let's go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=126.25858333333333)  [click Close. Next, we need to create](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=130.16983333333334)  [another subnet, so over on the left, just](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=132.98566666666662)  [under Your VPCs, click on Subnets, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=136.43900000000002)  [then Create subnet. We're going to name](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=141.53500000000008)  [this one web-public-2, that's original,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=145.97340000000003)  [right? And then under VPC we're going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=148.79140000000007)  [select the tic-tac-toe VPC. And very](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=154.40200000000002)  [important here, under the availability](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=157.8670909090909)  [zone, we need to select a different zone](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=159.31981818181816)  [than the existing subnet is in. So, this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=162.06880000000004)  [one here we're going to select us-east-1c,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=165.35266666666666)  [the other subnet is in 1d, so they are](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=168.51549999999995)  [going to be different. And then for the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=171.33200000000008)  [CIDR block 172. 27. 1. 0/24, same as the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=174.6721176470588)  [secondary VPC CIDR block. Click Create,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=179.99588235294107)  [and it likes that, too. Great. All right,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=183.33975)  [click Close. Now, next we need to launch](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=187.0836666666667)  [another instance of our tic-tac-toe web](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=190.32633333333345)  [application. To do that, we need to jump](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=192.51353333333333)  [over to EC2. Now here under EC2, I am](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=195.26659999999998)  [looking at the AMI that we created earlier](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=198.2786470588235)  [in the course. I have it selected, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=200.91817647058818)  [we're just going to go under the Actions](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=203.53085714285714)  [menu and click Launch. Again, this is the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=206.1274285714286)  [same process we went through a little bit](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=208.3533076923077)  [earlier. We will go ahead and select a t2](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=210.7)  [micro instance type. Next. For the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=213.92649999999992)  [network, we're going to select the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=216.43709090909093)  [tic-tac-toe VPC, and for the subnet we're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=219.30727272727276)  [going to select web-public-2, which is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=221.79191666666674)  [that subnet we just created. Under](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=223.6254166666668)  [Auto-assign Public IP, I will go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=226.3314166666667)  [select Enable for that. And then, of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=230.14872727272729)  [course, very importantly, remember to set](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=233.34581818181823)  [the IAM role because the tic-tac-toe](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=236.19410000000005)  [application requires access to DynamoDB,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=239.15030000000013)  [and it's going to get that via this role.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=241.45561538461536)  [All right, this all looks fantastic. Let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=245.534)  [click Next. Storage looks good. Click Next](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=249.18255555555564)  [again. And then for the tag, we're going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=252.33681818181813)  [to go ahead and give this a nametag. Not a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=255.46560000000002)  [namtag, but a nametag of web2. All right,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=258.92400000000004)  [excellent. Looks good. Next, configure](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=263.2440000000002)  [security group. Next we're going to select](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=266.2220000000001)  [an existing security group. We're going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=268.63822222222234)  [go ahead and stick with the default VPC](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=270.5690000000001)  [security group right here. Again, this is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=273.1636666666669)  [the same one that we have been working](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=275.00474999999994)  [with, and then click Review and Launch.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=276.45474999999976)  [All right, take a look at this, just to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=279.4223076923078)  [make sure everything looks good. It does.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=283.15233333333333)  [Click Launch. And then I'm going to go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=284.83)  [ahead and select the same key pair I was](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=287.24085714285695)  [using earlier and click Launch Instances.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=290.60300000000007)  [All right, let's go ahead and check out](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=293.711)  [the instance here. And there it is coming](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=296.65572727272706)  [up. Now in case you're wondering what](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=299.44576923076926)  [happened to web1, well, I deleted that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=301.80584615384623)  [instance just to keep things clean. You](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=304.939)  [may remember, web1 is the instance that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=308.11533333333335)  [had the unencrypted EBS volume, and we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=310.77766666666673)  [took that to create a new one, web1-new,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=313.7097999999999)  [with an encrypted volume. And they're both](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=317.4719333333331)  [up. Now the next thing we need to do is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=319.99620000000004)  [log into both of our instances and bring](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=322.14020000000016)  [up the tic-tac-toe-app. I've shown you how](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=324.9289999999999)  [to do this in the past, so in the interest](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=326.98374999999993)  [of time I'm not going to show this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=329.1706249999998)  [onscreen again, but you know how to do it.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=331.1832000000001)  [Go ahead and log into both of those](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=333.546)  [instances and bring up the tic-tac-toe web](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=335.6746153846154)  [application. All right, go on over please](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=338.03009090909086)  [to the security groups and take a look at](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=341.6179090909089)  [the default security group for the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=345.2954615384614)  [tic-tac-toe VPC. Under the inbound rules,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=347.569)  [we going to need to add another rule to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=349.6820000000001)  [allow HTTPS traffic from everywhere.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=353.33062499999994)  [Because we're going to be using TLS, we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=355.89)  [want HTTPS traffic from everyone on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=358.74266666666665)  [internet coming to us, and we are going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=361.0692142857142)  [be using this security group for the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=363.76985714285695)  [application load balancer. So once you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=366.4700000000001)  [have that rule in there, click Save. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=368.8985)  [then let's jump over to the outbound](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=372.09222222222223)  [rules. And as you may recall, we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=375.36277777777786)  [restricted outbound traffic only to that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=378.7502857142858)  [VPC endpoint. In this case, the load](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=381.6705714285716)  [balancer, because it's going to be using](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=384.35976923076913)  [this security group, needs to have access](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=386.7618461538459)  [to everything. Remember that the load](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=389.68875000000014)  [balancer is going to be opening up](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=391.926)  [connections to those internal instances,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=394.33399999999995)  [so it does need access to them. Let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=396.1670909090909)  [ahead and hit Edit, Add Rule, and then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=399.5164285714286)  [we're going to go ahead and select all](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=402.4901428571429)  [traffic to anywhere. All right. Click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=406.46855555555555)  [Save. Now I could delete the HTTPS rule in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=410.03793333333334)  [there, but I am just going to leave it,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=414.1323333333332)  [it's not hurting anything to leave it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=417.24033333333324)  [there. So that's it. We've got our](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=418.69866666666644)  [tic-tac-toe web application up and running](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=421.07627272727285)  [on both instances, and now finally, we are](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=423.30169230769235)  [ready to create a secure application load balancer.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=1&mode=live&start=426.643230769231)

### [Creating a Secure Application Load Balancer](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live)

[In this demo, we're going to create an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=0.804)  [application load balancer that will listen](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=3.1526666666666667)  [for secure HTTPS connections from clients](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=5.27209090909091)  [on the internet. To do that, we'll start](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=8.107363636363639)  [by creating a TLS certificate using the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=11.314615384615387)  [Amazon Certificate Manager, or ACM. The](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=13.820076923076927)  [certificate will be valid for the domain](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=16.651636363636364)  [name, *. coastalcarolinanetworks. com.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=20.4996)  [Again, if you're following along, you'll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=24.018)  [need to have your own domain name and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=26.126499999999993)  [access to modify the public DNS records](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=28.88463636363636)  [for it. Next, we'll create the application](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=31.158363636363624)  [load balancer and install the certificate](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=33.93099999999999)  [on it. Lastly, we'll create a DNS record](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=36.460166666666666)  [for the domain name app.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=39.70949999999998)  [coastalcarolinanetworks. com, and that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=41.864999999999995)  [record is going to point to the load](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=43.73899999999999)  [balancer. Again, this is my own domain](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=47.021666666666675)  [name. If you're following along, you will](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=49.48683333333336)  [need to use yours. We'll then browse to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=51.56280000000001)  [the domain name using a web browser and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=54.106769230769245)  [verify that we have a secure encrypted](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=56.89630769230773)  [connection between our client and the load](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=59.85971428571428)  [balancer. After we create the TLS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=62.91021428571428)  [certificate, we'll install it on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=64.6591818181818)  [application load balancer. We'll also set](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=66.235)  [up a DNS record for the domain name I](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=68.73750000000003)  [mentioned, pointing to the load balancer](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=72.34799999999998)  [so that when the client browses to that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=74.56399999999996)  [address, they will be directed to the load](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=77.06408333333336)  [balancer instead of to an individual](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=79.4115)  [instance. The TLS certificate on the load](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=81.8025)  [balancer will then cause the load balancer](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=84.05999999999997)  [and the client to negotiate an encrypted](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=86.43411111111111)  [session. And that's it! Let's jump over to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=90.03988888888888)  [the AWS Certificate Manager. Now here in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=94.10463636363635)  [the ACM, if you've never used it before,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=96.82685714285715)  [you're going to get this splash screen. Go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=98.6771428571429)  [down under the left and under provision](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=101.44933333333333)  [certificates just click Get Started. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=104.359)  [what we want to do here is request a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=106.2517692307692)  [public certificate, so click the Request a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=109.68618181818182)  [certificate button. And then for the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=113.97781818181822)  [domain name, I'm going to do *.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=117.47138461538462)  [coastalcarolinanetworks. com. And then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=121.43930769230772)  [click Next. And for the validation method,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=123.36066666666666)  [I'm going to select DNS validation. This](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=126.11749999999999)  [is the easiest option, especially since I](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=128.96154545454547)  [am using route 53, and DNS validation is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=131.871)  [pretty much automated. Let's click Review,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=135.7815454545454)  [and then Confirm and request. Now it says](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=139.55087500000002)  [further action is needed to complete the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=144.33724999999998)  [validation and approval of the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=146.54983333333325)  [certificate. Now under the validation](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=148.3576666666667)  [section, if I expand this out here, it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=150.3171111111112)  [says add the following CNAME records to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=152.67546153846152)  [the DNS configuration for your domain. So](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=154.7572857142857)  [of course, like I said, you need to have](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=157.4883125)  [access to your domain name's DNS. Since](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=160.66812500000015)  [I'm using route 53, I can click this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=163.22033333333334)  [handy-dandy Create record in Route 53](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=166.679)  [button, and it says that route 53 will](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=169.44214285714284)  [create the CNAME record for me. So I'll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=173.35185714285709)  [click Create. And then once we've done](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=176.7383846153846)  [that, I'll click Continue. And while that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=179.42692307692303)  [is pending validation, it does take a few](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=182.99966666666668)  [minutes for this to actually complete,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=185.669)  [let's jump over to EC2 so we can create](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=186.959)  [the load balancer. Over on the left side](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=190.8897499999999)  [menu, scroll down until you see load](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=194.02307692307687)  [balancers and click that. Click on Create](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=196.5753846153845)  [Load Balancer. And the type of load](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=200.33375000000007)  [balancer we want is the Application Load](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=202.83416666666665)  [Balancer, the ALB. And for the name, we're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=204.751)  [going to call this tic-tac-toe-app. This](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=208.4923333333334)  [is an internet-facing load balancer, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=212.44014285714286)  [we are only going to use IPv4. Now, under](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=218.07854545454546)  [listeners, select HTTPS, scroll down a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=222.08845454545454)  [bit, and then under availability zones, go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=224.81763636363638)  [ahead and select both of those subnets,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=228.1758181818182)  [us-east-1d and us-east-1c are the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=232.50054545454554)  [availability zones holding those subnets.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=235.46600000000004)  [And then click Next. Now here we get to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=238.246)  [pick the certificate we just created.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=242.53240000000008)  [Choose a certificate from ACM, and right](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=245.39)  [here under the certificate name, it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=248.1028181818182)  [already has it selected because that's the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=250.44776923076924)  [only certificate in ACM. The security](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=253.2294615384616)  [policy, we're going to go ahead and leave](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=255.38684615384616)  [that as the default, and then click Next.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=257.65823076923084)  [For the security group, we're going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=261.225)  [select the default VPC security group.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=265.026)  [It's already selected for us, so we'll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=267.7221818181817)  [just click Next. Now for the target group,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=270.5433076923077)  [we're going to create a new target group.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=272.8405384615384)  [We're going to go ahead and call this one](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=275.10842857142865)  [tic-tac-toe-servers. The protocol is going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=277.64)  [to be HTTP because that's the protocol the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=280.59749999999997)  [application is listening on, and the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=284.76849999999996)  [target type is, of course, instance. Under](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=287.19549999999987)  [the health checks, if we expand Advanced](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=290.79263636363646)  [health check settings, I'm going to set](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=294.964)  [the healthy threshold to 2, just so that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=297.7774166666668)  [those instances pass their health checks a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=300.8555)  [little bit quicker and we don't have to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=303.3486666666669)  [wait quite as long to actually start using](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=305.56380000000007)  [this. Click on Next: Register Targets. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=307.56753333333353)  [then if we scroll down, we should see both](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=310.4950909090908)  [of our instances. We'll go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=313.9281538461538)  [select both of these and click the Add to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=316.03192307692296)  [registered button. This is actually going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=318.6396666666668)  [to register these as targets for the load](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=320.796076923077)  [balancer. And then click Next. So here we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=323.962230769231)  [can give it the once over, make sure](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=326.8720769230769)  [everything looks appropriate, and it does.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=329.86549999999994)  [All right, let's go ahead and click Create](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=332.381)  [to start creating this load balancer. This](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=335.6381428571427)  [provisioning process does sometimes take a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=338.6138888888889)  [little while, so you may want to pause the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=341.81122222222206)  [video while you wait if you are following](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=345.06712500000015)  [along. All right, most excellent. That](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=347.5701250000003)  [only took a couple of minutes. The load](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=349.6779999999999)  [balancer is now provisioned. Now if we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=352.51953846153845)  [scroll down a little bit under the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=354.925923076923)  [Description tab, it gives us a DNS name](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=357.4668461538461)  [right here. So this is the DNS name of the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=360.57576923076914)  [load balancer. We can actually browse to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=362.7458000000001)  [this. We're not going to, but just keep](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=364.9374615384615)  [this name in mind. Next thing we need to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=367.887)  [do is create a DNS record. Let's go over](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=371.0682000000002)  [to route 53. Now under my public hosted](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=374.3405714285715)  [zone for my domain name, I'm going to go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=377.4114285714287)  [ahead and jump in here, and what I want to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=380.46500000000003)  [do is create a record set, and let me](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=383.6793333333333)  [expand this a little bit, the name of the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=386.9313333333333)  [domain here is going to be app.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=390.76784615384616)  [coastalcarolinanetworks. com. I'm going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=394.32007692307695)  [select Yes for alias, and if I click an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=396.3547857142857)  [alias target, you can see here that under](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=399.41414285714285)  [application load balancers we have the DNS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=402.1303076923078)  [name of the application load balancer. I](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=404.506)  [can click that, and what this is going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=407.21989999999994)  [do is this record is going to point app.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=409.7312857142858)  [coastalcarolinanetworks. com to that load](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=412.3982857142857)  [balancer. And that's all there is to it.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=416.74471428571417)  [Pretty straightforward. Let's click Create](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=419.2496666666668)  [to create this record. Move this back so](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=420.94339999999994)  [we can see it. And there we go, there is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=424.2137999999998)  [the record. So now what I'm going to do is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=427.8154999999999)  [open up a new tab in Chrome, and I'm going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=431.093)  [to browse to https://app.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=433.9730000000001)  [coastalcarolinanetworks. com. And bingo,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=435.87424999999996)  [there we go, there is the tic-tac-toe web](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=440.02324999999985)  [application. Fantastic! Now, if I go into](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=445.2221428571428)  [Chrome's Developer Tools here, and what](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=447.7689230769231)  [I'm looking for here is the Security part](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=449.8232307692308)  [of this, so what we have now is an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=452.48520000000013)  [encrypted secure connection between me, the client, and the AWS cloud.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=2&mode=live&start=455.451)

### [Summary](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live)

[As an AWS architect, you need to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=1.302)  [understand what infrastructure components](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=3.814300000000001)  [are required to achieve a given](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=5.383)  [configuration. This means understanding](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=8.335)  [how those pieces fit together and in what](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=10.09381818181818)  [order you need to assemble them. When it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=13.472)  [comes to encrypting data in transit](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=15.642461538461538)  [between the internet and your instances,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=17.366090909090907)  [you're going to use TLS, Transport Layer](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=19.568636363636358)  [Security, but where you terminate the TLS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=22.529199999999996)  [connection in the AWS cloud makes a big](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=26.011)  [difference. If you terminate the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=28.923000000000005)  [connection on your instances, then you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=30.782999999999994)  [need to configure your application to use](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=33.026999999999994)  [TLS. Again, that is an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=35.2305)  [application-specific configuration, and it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=36.686)  [could also get very cumbersome if you have](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=38.78499999999999)  [many, many instances because you have to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=42.503636363636375)  [install a TLS certificate on all of them.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=45.338)  [However, if you terminate the TLS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=48.31066666666667)  [connection on an application load](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=50.42190909090908)  [balancer, you have to install the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=51.984181818181796)  [certificate in one place on the load](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=54.211000000000006)  [balancer. Not only that, AWS Certificate](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=57.63050000000002)  [Manager will generate the certificate for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=60.39025000000001)  [you. Whether you have 2 instances or 20,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=63.11575000000002)  [you can place them all behind a single](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=66.28600000000003)  [load balancer to secure data in transit](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=69.44127272727272)  [between the load balancer and the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=72.51618181818178)  [internet. Prior to doing any of that,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=74.8379090909091)  [though, you must make sure you have](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=77.18036363636364)  [subnets in two availability zones. Within](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=79.71809090909092)  [each of these subnets, you need at least](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=81.92125)  [one instance hosting your front-end](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=84.85924999999999)  [application. This is because the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=86.92522222222222)  [application load balancer requires targets](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=89.33577777777776)  [in at least two different zones. Also,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=91.72200000000001)  [when you go to create a TLS certificate,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=94.94608333333333)  [the Certificate Manager requires you to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=97.98674999999999)  [verify your control of the domain name you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=100.08014285714286)  [want to use before it will issue the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=102.62185714285717)  [certificate. Now, that's how you encrypt](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=105.73272727272729)  [data in transit for your internet clients.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=108.322)  [What about encrypting data in transit](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=110.704)  [between an on-site location, like a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=113.18439999999997)  [datacenter or an office, and the cloud?](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=115.57577777777777)  [For that you need to set up a VPN, a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=118.158)  [virtual private network. Again, that's an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=121.16030769230765)  [advanced topic, but if you're interested,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=123.05466666666668)  [go check out my course, AWS Networking](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=125.042)  [Deep Dive: Virtual Private Cloud,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=128.38290909090912)  [particularly the module using a transit](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=130.7496)  [VPC to connect on-premises and cloud](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=133.49520000000007)  [resources. All right, in the next and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=136.96575)  [final module of this course, you're going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=139.5888181818182)  [to learn how to configure data backup,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=141.78840000000002)  [replication, and recovery in S3. See you there.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=ddefdc12-2fa2-434a-a776-21271512e784&clip=3&mode=live&start=143.87580000000008)

## [Configuring Data Backup, Replication, and Recovery](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live)

### [Introduction to Data Backup, Replication, and Recovery](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live)

[Welcome back! In this module, I'll show](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=0)  [you how you can protect your data stored](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=3.699769230769232)  [in S3 by using versioning, lifecycle](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=7.950111111111111)  [rules, and cross-region replication. Now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=11.187444444444443)  [if you're currently storing a lot of data](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=13.317000000000004)  [on EBS volumes, after watching this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=16.459846153846154)  [module, I think you might start giving](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=18.73338461538461)  [some serious consideration to using S3](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=21.59488888888889)  [instead. When it comes to protecting your](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=24.495555555555555)  [data, S3 offers a lot more options, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=27.145461538461532)  [best of all, it's a lot more automated](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=30.0353125)  [than when you can do in EBS. So, what does](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=32.93381250000001)  [S3 offer anyway? Let's take a look. We're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=36.66729999999999)  [going to start out by configuring bucket](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=39.88422222222222)  [versioning. Have you ever accidentally](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=42.846777777777774)  [overwritten or deleted a file? I'm not](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=45.02066666666666)  [talking about putting in the recycle bin,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=47.81471428571429)  [I'm talking about deleting it. Of course,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=49.934714285714286)  [everybody's done that. Well, with](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=52.40554545454545)  [versioning, S3 will keep a backup of every](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=54.79690909090907)  [object you create. This is called a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=58.34833333333332)  [version. If you modify or delete that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=61.215416666666634)  [object, S3 keeps a backup of it right](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=64.00485714285715)  [there in the bucket, so you can easily get](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=67.178)  [it back. After that, we'll configure](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=69.46645454545448)  [lifecycle rules. S3 offers different tiers](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=72.58233333333331)  [of data storage because, let's face it,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=75.71509090909089)  [not all data is equally valuable. Some](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=78.916)  [data you need to keep around for a long](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=80.98046153846158)  [time, and you simply can't afford to lose](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=83.71350000000001)  [it. Other data you may not need to keep](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=86.28283333333337)  [around, but for just a few days or even](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=89.16826666666664)  [less. Lifecycle rules automatically move](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=92.3484)  [your data around to different storage](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=94.68939999999998)  [classes, which can help lower your cost](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=97.09381818181818)  [while still protecting your data. They can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=99.42672727272728)  [also delete old objects after a period of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=102.19399999999997)  [time, so that you're not paying to store](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=105.00485714285715)  [old data that you don't need anymore.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=106.51228571428574)  [Lastly, we'll configure cross-region](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=109.200625)  [replication. This is just what it sounds](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=111.780125)  [like. Take an S3 bucket in one region and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=114.14299999999999)  [synchronously replicate the objects to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=116.72)  [another S3 bucket. In the unlikely event](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=119.52562500000002)  [you lose an entire region, say, due to an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=122.83053846153848)  [earthquake or tornado outbreak, your data](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=126.479)  [will be safely replicated in another](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=128.98999999999998)  [region hundreds or maybe even thousands of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=131.55599999999998)  [miles away. Awesome! All right, this is going to be fun. Let's get started.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=0&mode=live&start=134.67799999999997)

### [Versioning](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live)

[We'll start out by configuring versioning.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=0.978)  [The point of versioning is to prevent](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=2.99290909090909)  [accidental deletion and overwriting of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=5.765999999999999)  [data. Once you enable versioning, when you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=8.500999999999998)  [change an object, a new version of that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=11.221000000000002)  [object is created. It's basically a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=14.102727272727273)  [snapshot if you're familiar with that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=16.22890909090909)  [term. In this demo, we will enable](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=18.39981818181818)  [versioning, which can only be done at the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=20.984727272727262)  [bucket level, and it applies to all](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=23.06549999999999)  [objects in the bucket. We'll then upload](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=24.777)  [an object multiple times, which is going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=27.648909090909086)  [to create two versions of that object.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=30.3238)  [Lastly, we'll look at how to delete and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=32.736)  [restore object versions. This is one of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=36.453090909090925)  [those things that you have to see in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=38.8194705882353)  [action before it really clicks. So, let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=40.76441176470589)  [jump over to the S3 dashboard. In the S3](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=42.887499999999996)  [dashboard, I want to delve into the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=46.91178571428572)  [benpiper2019 bucket right here. Go up to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=49.949285714285736)  [Properties, click on Versioning, and then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=53.628)  [we're going to click on Enable versioning,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=57.513999999999996)  [and then Save. All right, let's jump back](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=61.64766666666666)  [over to the Overview tab. We're going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=66.029)  [go ahead and upload a file, click on Add](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=69.51928571428573)  [files here, and the file I'm going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=73.81635714285713)  [upload is version-test-txt. Next, Next,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=78.2946428571428)  [Next, and then Upload. All right, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=81.38466666666666)  [there's the object. Nothing new or](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=86.32199999999996)  [surprising here. Now, next to where it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=89.64950000000002)  [says Versions, click on Show, and under](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=92.47633333333339)  [the object name, we have a timestamp](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=96.15592307692309)  [marked as the latest version. Now this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=100.1766153846154)  [version we're looking at is called the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=103.44100000000003)  [current version. The thing that I want you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=106.336)  [to remember is that a version is a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=107.97599999999998)  [snapshot of an object at a point in time.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=110.06325000000001)  [It is not the same as the object. Right](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=113.25)  [now we have only one version of this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=116.32799999999999)  [object. Next, we're going to upload the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=119.15666666666667)  [same file again. So I'm going to click on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=121.87500000000001)  [Upload, and I'm going to go through the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=124.15840000000004)  [exact same process, this is the exact same](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=125.64960000000009)  [file, I have not changed it at all. Upload](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=128.78346666666664)  [it. S3 creates a new version of the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=132.5910714285714)  [object, and it marks that new version as](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=136.1036428571428)  [the latest. The previous version, which is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=139.47949999999997)  [also called the non-current version, is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=142.2339999999999)  [still there. Now again, just think of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=144.64790909090905)  [these versions as point-in-time snapshots](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=147.495)  [of the object. Now here's what's cool.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=149.478125)  [Suppose I want to restore the original](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=152.5146666666667)  [version. All I do is select the latest](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=155.7463333333334)  [version right here, go up to More, click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=159.27449999999993)  [on Delete, and it says All affected](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=162.91406666666668)  [versions of objects will be permanently](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=166.92553333333342)  [deleted. That's a little misleading here](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=170.36393333333348)  [because it's actually only going to delete](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=172.0124545454546)  [this one version. And there we go. The](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=173.834875)  [version of the object gets deleted, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=177.95521428571428)  [I'm left with the original version. All](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=180.73571428571427)  [right, now what happens if I delete this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=183.43263636363636)  [remaining version? Well, if I do, it's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=185.94172727272726)  [gone, permanently. It's not coming back.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=188.8403636363636)  [Under this view, I can delete object](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=191.566)  [versions. So, this is kind of dangerous if](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=195.03275)  [you're not careful. Let's go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=197.85059999999993)  [click on Hide next to versions. That way](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=200.56039999999996)  [we don't see the versions anymore. Now we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=203.79649999999998)  [have just the object. Okay, let's pretend](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=206.39214285714283)  [for a moment that we are not aware of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=208.49964285714276)  [versioning, and we don't even know how S3](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=211.22992307692311)  [works. We're just messing around and we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=213.67976923076935)  [click the checkbox next to the file. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=216.15107692307691)  [then I click on More, and then I click on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=219.00674999999998)  [Delete, and it says all affected objects](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=222.30424999999988)  [will be deleted, and I just think, okay,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=224.43033333333332)  [that's fine, and I click Delete. And, oh](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=226.3396666666666)  [no, the object is gone! How did that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=228.4086363636364)  [happen? Well, it's not really gone. How do](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=231.22833333333332)  [we get it back, though? How do we undelete](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=234.795)  [it? Like I said, it's not really gone,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=237.40499999999992)  [it's not really deleted. Let's go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=238.87800000000007)  [and look at the versions again. Go up to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=240.63699999999997)  [Show, scroll down a bit, and check this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=243.9945)  [out. Instead of having a latest version,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=247.1718333333333)  [we have the original version of the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=250.04749999999999)  [object, and a delete marker. Now the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=252.89000000000001)  [delete marker is a flag that indicates](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=255.43800000000005)  [someone tried to delete the object, and so](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=258.00176923076924)  [S3 hides it from view, but the original](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=261.03992307692306)  [version of the object is still there. So](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=264.29209090909086)  [how do we get this to show up again to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=267.7960714285714)  [essentially undelete it? Well, simple. We](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=272.50678571428546)  [simply delete the delete marker. So I'll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=275.42974999999996)  [select the delete marker right here. I'm](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=278.56475)  [going to close this so it stops popping](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=280.666)  [up. And then go under More, Delete, and I](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=282.62600000000003)  [am deleting the Delete marker. All right,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=286.8433076923078)  [now the original version shows as the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=290.1536666666667)  [latest once again, and if we click Hide](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=293.0505000000001)  [versions, boom, there's the object again.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=296.7147272727273)  [All right, so if you've dealt with](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=299.622)  [versioning file systems, most of this is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=302.92530000000005)  [probably familiar to you with the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=305.76526666666666)  [exception of the delete marker. Just](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=307.90166666666664)  [remember that when you delete an object,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=310.0865)  [S3 inserts a delete marker and it does not](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=312.9179999999999)  [actually delete the latest object version.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=316.4996363636363)  [The delete marker causes S3 to hide the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=318.856)  [object from view, but the object versions are still there.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=1&mode=live&start=321.8399999999999)

### [Lifecycle Management](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live)

[In this clip, I'll show you how to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=1.594)  [configure lifecycle management on your S3](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=4.4846666666666675)  [objects using lifecycle rules. What is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=6.795818181818182)  [lifecycle management, anyway? Well, S3 can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=9.393272727272727)  [store your objects in different object](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=12.094909090909093)  [storage classes. Different storage classes](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=14.900727272727279)  [have different levels of redundancy and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=16.918400000000002)  [are optimized for different access](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=19.08320000000001)  [patterns. Some data may be accessed](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=21.513599999999993)  [frequently, other less frequently. The](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=24.618)  [default storage class for objects is the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=26.84522222222222)  [standard storage class, but you can change](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=29.443999999999996)  [to a different storage class manually at](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=31.35033333333332)  [anytime under the object properties.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=34.4005)  [Lifecycle rules lets you move data around](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=36.906)  [to different storage classes based on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=40.09940000000002)  [age of the objects. The idea here is that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=42.86028571428572)  [an older object may not be as important or](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=45.99292857142859)  [may not get accessed as frequently. So to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=48.92671428571429)  [save money, lifecycle rules can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=51.75036363636363)  [automatically move old objects to a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=53.96127272727271)  [different storage class that has less](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=56.492)  [redundancy. Lifecycle rules can also](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=58.778)  [delete old objects that you simply don't](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=60.88)  [want or need anymore. S3 storage is not](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=63.89175000000001)  [free, and if you never delete anything,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=66.47853846153848)  [you can end up with some massive storage](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=68.74119999999999)  [costs. Lifecycle rules can help you avoid](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=72.05479999999994)  [that and save you the trouble of having to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=73.7926923076923)  [manually delete things on a regular basis.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=76.17588888888888)  [In this demo, we're going to examine the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=79.112)  [different objects storage classes and then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=82.25236363636364)  [create a lifecycle rule for our bucket.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=84.8079)  [After that, S3 takes care of the rest. We](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=88.023)  [just have to set it up. Let's jump over to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=90.33960000000003)  [our S3 bucket. Make sure you're already in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=94.05257142857145)  [the bucket and click over on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=98.08578571428575)  [Management tab. Make sure the lifecycle](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=101.4552857142858)  [button is selected and click Add lifecycle](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=104.50966666666665)  [rule. Now for the rule name, I'm just](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=108.17008333333327)  [going to call this clean up; you can call](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=111.01215384615382)  [it whatever you like. Click Next. First it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=114.19066666666669)  [asks us to configure the transition rules.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=117.44111111111113)  [Transition rules control when objects are](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=120.483)  [moved into a different storage class](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=122.76299999999998)  [automatically. Because this bucket uses](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=125.461)  [versioning, we can set up different](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=128.406)  [transition rules for current versions](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=131.30681818181824)  [versus non-current versions of objects.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=133.61863636363648)  [Let's go ahead and check both here. And](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=136.1439090909091)  [now we can add rule for each. For current](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=140.12184615384615)  [versions of objects, click on Add](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=143.43246153846158)  [transition, and in the drop-down, we can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=145.88161538461534)  [select to move the objects to Standard-IA,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=149.02138461538448)  [One Zone-IA, or Amazon Glacier. Now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=152.89188888888887)  [Standard-IA is standard infrequent access.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=156.76883333333333)  [It's kept in different availability zones,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=160.373)  [so it's very durable, but it's designated](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=162.7387999999999)  [for data that needs to be accessed less](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=165.51874999999998)  [frequently. However, this does not mean](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=168.72608333333326)  [that it's slow. The difference between the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=170.75824999999995)  [standard storage class and Standard-IA is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=173.48539999999997)  [that in order to qualify for reduced](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=176.108)  [pricing, the data must be in the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=178.75250000000005)  [Standard-IA storage class for a minimum of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=181.397)  [30 days. It also encouraged a very slight](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=184.27711111111108)  [additional charge for retrieval. Right now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=187.27139999999994)  [it's about 1 cent per gigabyte. Also, if](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=189.25714285714287)  [you plan to store many small objects, be](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=191.40971428571436)  [aware that Standard-IA bills each object](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=194.67966666666666)  [at a minimum size of 128 KB. So if you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=197.97016666666667)  [store an object that's only 50 KB, S3's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=202.1454000000001)  [billing system will pretend it's 128 KB](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=205.3785)  [and charge you accordingly. Next up is One](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=209.15500000000003)  [Zone infrequent access. I call this one](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=213.12126666666666)  [the gambler's storage class. This has the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=216.28573333333333)  [same caveats as Standard-IA, except data](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=219.42392307692305)  [is kept in only one availability zone, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=222.08376923076915)  [I bet you can guess what this means. If](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=224.77133333333336)  [that availability zone is lost, so is all](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=226.90818181818182)  [your data. The bottom line is do not store](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=229.3736363636364)  [irreplaceable data in this storage class.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=232.60369230769237)  [Also, the uptime for this is only 99. 5%](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=234.844)  [over a year, which means that your](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=239.0362)  [downtime is going to be a little less than](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=242.05642857142857)  [2 days per year. Lastly, we have the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=244.0852857142858)  [Glacier storage class. Now understand that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=246.44263636363635)  [this is a S3 storage class, this is not](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=248.6260909090909)  [the Glacier service. The S3 Glacier](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=253.27654545454538)  [storage class uses the Glacier service as](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=256.3015)  [a back-end, but the data only shows up in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=259.60900000000015)  [S3. This storage class is intended for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=262.4965000000002)  [long-term archival of data. It is not for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=264.439)  [data that you need to access regularly.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=267.5195333333333)  [This is kind of like putting your data in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=270.215)  [a box and sticking it in the storage unit](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=273.1808000000002)  [or a warehouse somewhere miles away. It's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=275.985)  [there in case you ever need it, but you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=277.93806666666666)  [don't expect it to be available on demand.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=280.6296666666665)  [It can take minutes or even hours to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=283.14849999999996)  [retrieve data from Glacier, depending on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=285.8778333333332)  [the retrieval option you choose. All](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=288.145)  [right, so for current object versions,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=290.35058333333336)  [let's go ahead and choose One Zone-IA.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=292.02808333333337)  [Notice that it automatically changes the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=294.5410769230769)  [number of days to 30. That is the minimum](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=297.88630769230764)  [age the current version of an object must](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=301.8586153846154)  [be before the lifecycle rule can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=304.22784615384626)  [transition it to One Zone-IA. Also, keep](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=307.18499999999995)  [in mind that the object version must be a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=310.68533333333335)  [minimum of 128 KB in size; if an object is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=314.4623333333334)  [below that size, it will not get](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=318.2266)  [automatically transitioned. So just to be](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=320.6598)  [clear here, it is possible to store](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=322.7541428571428)  [objects less than 128 KB in One Zone-IA,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=325.20264285714273)  [but when it comes to lifecycle rules, the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=328.53450000000004)  [lifecycle rule will not transfer anything](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=332.1790909090909)  [is below that threshold. All right, now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=334.8736363636363)  [for previous versions of objects, let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=337.72575000000006)  [ahead and click Add transition here, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=340.18916666666684)  [in the drop-down, scroll down here, oh,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=344.6816363636363)  [here we go, click Amazon Glacier. Notice](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=349.6506153846154)  [it sets the days after creation to 1.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=352.60892307692296)  [Let's go ahead and click Next. Here we get](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=355.89147058823534)  [to set up object expiration. The](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=359.3998823529414)  [expiration rules determine how long after](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=361.73554545454544)  [an object's creation it will be deleted.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=364.0548181818182)  [As with the transition rules, we can set](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=366.557)  [different expiration rules for current and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=369.1063333333334)  [non-current object versions. Let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=372.6312500000001)  [ahead and click current version and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=375.45599999999996)  [previous versions. Now here's where it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=378.1589999999998)  [gets tricky. Because we have versioning](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=380.49927272727274)  [enabled, you can't really delete an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=382.65818181818184)  [object. You can only delete versions of an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=384.7344285714287)  [object. Therefore, expire current version](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=387.4807142857146)  [of an object indicates when the object](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=390.0836000000001)  [will be marked as deleted. So here after](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=393.82863636363635)  [395 days, the current version of an object](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=396.67372727272704)  [will be marked as deleted. Essentially the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=399.2990000000001)  [current version of that object will become](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=401.59366666666665)  [a previous version. This is where the next](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=404.0424999999999)  [setting comes in, permanently delete](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=407.2374166666666)  [previous versions. Three hundred sixty-six](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=409.3828333333332)  [days after an object becomes non-current,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=411.773)  [that is, after it becomes a previous](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=414.837)  [version, that version will be permanently](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=417.9845)  [deleted. All right, did I lose you there?](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=420.6823571428572)  [All right, let's try a simpler example.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=422.93750000000006)  [I'm going to change the numbers here to 31](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=424.743)  [and 7. Okay, let's say you create a new](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=428.50581818181803)  [object. That object is the current](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=431.7495000000001)  [version. Or you can just say it's current.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=433.8130714285717)  [After 31 days, the expiration rule will](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=436.63823076923063)  [set a delete marker on that object, making](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=439.1566923076923)  [the current version non-current. That is,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=442.2902307692309)  [making it a now previous version. So the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=444.6025)  [object is non-current, and it exists only](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=447.5845)  [as a previous version. Seven days after](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=450.5561111111112)  [that, the expiration rule will permanently](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=453.85949999999997)  [delete that version of the object. The net](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=456.9044999999999)  [effect is that the object will be](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=459.4053846153848)  [completely gone. So you can conclude from](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=461.58863636363634)  [this simple example that you probably want](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=464.9110909090909)  [to set some pretty high numbers here. By](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=467.63827272727275)  [the way, these numbers must be higher than](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=470.2941818181818)  [the corresponding numbers for the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=473.29563636363645)  [transition rules. For instance, for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=475.2532)  [current versions, the transition rule was](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=477.2652)  [set to 30 days, so the expiration rule](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=479.11615384615385)  [must be set to more than 30 days; hence, I](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=481.20846153846156)  [chose 31 days. All right, let's click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=485.02049999999997)  [Next, and then Save. And that is it. It](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=489.42400000000004)  [gives us a nice little summary of what the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=493.7626666666666)  [rule does, and now we can just leave it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=495.7762666666664)  [and let S3 manage our object lifecycles automagically.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=2&mode=live&start=504)

### [Cross-region Replication](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live)

[When you create a bucket, it exists in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=1.655)  [only one region, and depending on the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=4.393181818181818)  [storage class, it may exist in only one](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=6.8651428571428585)  [availability zone. So, if your data is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=9.755428571428572)  [particularly valuable, you may want to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=12.45175)  [replicate it to another bucket in a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=14.820250000000001)  [different region. In this demo, we're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=17.069000000000006)  [going to configure cross-region](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=19.743)  [replication. We'll create a new object in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=21.798999999999996)  [our existing bucket, and if all goes well,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=23.641307692307688)  [we'll see it show up in a different bucket](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=25.605785714285712)  [in the us-west1 region. By the way,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=29.338857142857133)  [replication only works on new objects. It](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=32.25833333333333)  [does not replicate existing objects in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=35.22755555555556)  [your bucket. So, if you think this might](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=37.91888888888891)  [be useful to you, set it up first before](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=40.56999999999999)  [you start populating your bucket. Let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=43.201)  [jump back over to S3. All right here in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=46.213000000000015)  [the bucket under the Management tab, click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=49.87961538461538)  [on the Replication button, and then we're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=51.90369230769229)  [going to add a replication rule. So click](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=54.54472727272726)  [Add rule. Excellent. Now since we want to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=57.71750000000001)  [replicate the entire bucket, we're going](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=60.50750000000003)  [to select all contents in the bucket name.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=62.712666666666664)  [Because this bucket has encrypted objects,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=65.728)  [we need to select replicate objects](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=68.53927272727269)  [encrypted with AWS KMS. And then down here](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=71.37176923076923)  [we are going to select the key, which is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=75.28992307692305)  [used to encrypt it, which is the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=80.11553846153846)  [s3-bucket-key. Now if we don't select a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=84.12869230769232)  [key here, then the encrypted objects in](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=86.95414285714284)  [the bucket will not get it replicated. Now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=89.58164285714282)  [if I click off of here, notice it says](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=92.31923076923077)  [that cross-region replication increases](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=95.46374999999999)  [the number of KMS requests. Now the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=96.95674999999999)  [current limit on encryption and decryption](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=99.64427272727274)  [operations is about 1200 per second, so](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=102.10809090909096)  [this is not going to be an issue unless](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=104.7742857142857)  [you're dumping a lot of objects into your](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=108.0014285714285)  [bucket at a high rate of speed. If so, you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=109.88950000000004)  [would need to contact AWS support to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=112.48723076923078)  [increase your limit. This is not going to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=114.97976923076926)  [be an issue for us here, however. Let's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=117.53508333333332)  [click on Next. Now for the destination](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=120.04855555555557)  [bucket, click the drop-down and we'll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=123.0694444444445)  [click Create new bucket, and I'm just](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=125.28475000000003)  [going to call this one](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=127.782)  [benpiper2019-replica, and the for the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=130.52866666666662)  [region I want to put this in us-west1,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=133.27533333333324)  [which is Northern California. There we go.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=136.90419999999995)  [And now because we've chosen to replicate](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=139.59218181818179)  [encrypted objects, we also need to specify](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=141.9282727272726)  [a KMS key for the destination bucket. If](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=144.5978461538461)  [you have a key in the destination region,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=147.69892857142858)  [you may include the ARN of the KMS key you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=150.70635714285717)  [want to use there. Otherwise, if we scroll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=154.70600000000005)  [down here, we can just go ahead and use](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=158.0980000000001)  [the Amazon managed S3 key. We'll go ahead](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=161.325076923077)  [and use that, and then click Next. Now](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=164.23350000000002)  [here we need to create a service role to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=167.36085714285713)  [grant S3 permission to replicate the data.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=171.2205714285714)  [Under Select role, we'll just click on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=173.83425000000003)  [Create new role, and this way it's just](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=175.93016666666674)  [going to do it for us. We don't even have](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=177.81199999999995)  [to think about it. Click on Next, and then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=180.72528571428572)  [Save. All right, so here we go, here's the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=184.3934285714286)  [replication rule. We're going to replicate](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=187.4866)  [everything in the entire bucket, and we](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=189.57400000000004)  [are also going to replicate KMS-encrypted](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=192.05200000000013)  [objects. All right, it's time to test this](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=195.2485)  [out. Let's go over to the Overview tab,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=198.06000000000006)  [and let's upload an object. Here we're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=200.95707692307693)  [going to upload gemini. txt. Next, Next,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=205.53561538461543)  [Next, and Upload. All right, here is the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=210.7258181818182)  [object, so we should, if we go back out](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=218.40509090909094)  [here to S3, there's the replica bucket, if](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=222.26728571428566)  [we click on this, we'll go ahead and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=225.1852857142857)  [refresh a few times here, and boom,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=228.15042857142853)  [there's the object replicated from the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=231.25681818181815)  [source bucket in us-east1 to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=234.50445454545442)  [destination bucket in us-west1. And then](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=237.90049999999997)  [by the way, if you delete an object in the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=240.82685714285714)  [source bucket, S3 will not delete the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=243.89114285714282)  [object in the destination bucket. And that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=246.23050000000003)  [makes sense because propagating the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=248.75979999999998)  [deletion would defeat the purpose of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=250.76679999999996)  [replication in the first place. Let's go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=253.157875)  [ahead and click on the object, and if you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=255.83828571428572)  [look down under Replication status, notice](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=258.99857142857144)  [it says REPLICA. So this is useful because](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=262.26200000000006)  [now you can tell the difference between an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=265.5000769230769)  [object that was replicated from another](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=267.145)  [bucket versus an object that was created](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=269.90336363636357)  [natively in the bucket. For example, if](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=272.8343636363636)  [somebody uploaded this file, we would know](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=275.04763636363623)  [that they did that. In this case, it says](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=277.9238888888888)  [REPLICA, so we know that this came via cross-region replication.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=3&mode=live&start=284.719)

### [Summary](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live)

[S3 is a powerful object storage service](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live&start=1.672)  [that gives you many options for protecting](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live&start=4.411333333333334)  [your data. The first option we looked at](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live&start=6.947666666666667)  [is versioning. With versioning, every](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live&start=9.266333333333336)  [change to an object results in a version](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live&start=11.04)  [of that object being created. If you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live&start=14.223999999999997)  [delete an object, a delete marker is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live&start=16.738)  [inserted into the version list. To restore](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live&start=19.2559)  [the object, just delete the marker. Next,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live&start=22.06920000000001)  [we configured lifecycle management. You](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live&start=25.810777777777787)  [can use lifecycle rules to do two things;](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live&start=28.46288888888889)  [one, it can automatically move objects to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live&start=30.878)  [different storage classes based on age,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live&start=33.85090000000001)  [and two, it can delete objects based on](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live&start=36.34525000000001)  [age. Finally, we set up cross-region](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live&start=39.599250000000026)  [replication. This is just what it sounds](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live&start=43.196833333333316)  [like; when you create a new object, that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live&start=45.560692307692314)  [object is synchronously replicated to a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live&start=48.13466666666667)  [destination bucket, which may be in the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live&start=51.498666666666686)  [same region or in a different region. The](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live&start=54.13833333333332)  [selling point of cross-region replication](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live&start=56.7177)  [is that it guards against local](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live&start=58.98619999999999)  [catastrophes. If an epic tornado wipes out](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live&start=61.577)  [all availability zones in a region, you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live&start=64.29299999999999)  [want a copy of your data to be at least](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live&start=66.67214285714287)  [hundreds of miles away. That is what cross-region replication can give you.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=4&mode=live&start=70.0764)

### [Course Summary](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live)

[All right, that is it for this course.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=0.98)  [Thank you so much for watching! Before I](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=3.094285714285714)  [open all the doors and let you out into](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=5.292923076923076)  [the world, let's step back and talk about](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=8.05107692307692)  [how everything you've learned fits into](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=10.655454545454548)  [the broader topic of architecting for AWS](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=12.737444444444444)  [security. The word architecture comes from](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=15.694555555555555)  [the Latin word that originally meant chief](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=18.083363636363636)  [builder or craftsman. An AWS architect](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=20.864636363636365)  [isn't someone who just builds an](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=23.394454545454543)  [infrastructure, but also decides how it](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=25.958454545454547)  [should be build, what it should look like,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=28.59081818181819)  [and how it should function. Remember that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=30.954499999999996)  [the goal of security is protect the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=32.6998)  [confidentiality, integrity, and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=35.142100000000006)  [availability of data. It's that CIA triad.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=36.641000000000005)  [So, sticking with this building analogy,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=40.666)  [imagine the security of a physical](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=43.110307692307686)  [building. The goal of physical security is](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=45.554615384615374)  [to protect not just data and other things](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=47.74076923076922)  [in the building, but more importantly,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=50.274625)  [people. However, to avoid taking the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=53.02637499999999)  [analogy too far, we'll just stick with](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=54.990833333333335)  [protecting data stored in a building. At](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=57.099)  [the start of this course, you learned how](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=59.117333333333335)  [to configure identity and access](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=61.84066666666666)  [management. This is like the building](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=63.976777777777755)  [security system. It controls who can enter](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=66.47685714285717)  [the building, what rooms they can go into,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=68.72907692307689)  [and so on. After that, you learned how to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=71.006)  [capture and analyze logs using CloudTrail](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=73.61392307692302)  [and CloudWatch. In a physical building,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=75.76175)  [this would be the building's cameras,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=78.728)  [security guards, and log books. You're not](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=81.06854545454549)  [just concerned with what should happen,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=83.67983333333333)  [but what did happen. You want to know](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=85.66233333333332)  [everything that's going on inside that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=88.284)  [building. However, perhaps the nature of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=90.23400000000002)  [your particular building is such that it's](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=92.33672727272725)  [not practical to identify everyone that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=95.0311)  [exits and enters. If you've got a business](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=98.39769999999997)  [that has clients coming in and out all the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=101.11171428571426)  [time, making them sign in and sign out can](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=102.967)  [be a burden. In that case, you need a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=105.16224999999997)  [different way of controlling access to the](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=108.0467142857143)  [building. This is analogous to protecting](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=110.55821428571431)  [network and host-level boundaries in your](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=113.24450000000003)  [AWS environment. Think of security groups](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=115.93016666666666)  [and network access control lists. You'll](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=118.07916666666664)  [let strangers in your building, but you're](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=120.11416666666668)  [going to be strict about where they can go](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=121.82333333333338)  [and what they can do. Next, you learned](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=124.54399999999998)  [how to protect at rest using encryption](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=127.65138461538463)  [and access controls. Think of a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=130.83261538461542)  [combination safe that contains a secret](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=133.24839999999998)  [message. The safe is locked in a room that](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=135.35319999999993)  [you have to use a badge to gain access to.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=138.02311111111118)  [First, you swipe your badge to get into](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=140.922)  [the room, and then once in the room, you](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=142.59171428571423)  [must possess the correct combination to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=145.01775000000004)  [open the safe. Next, you'll learn how to](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=147.36525000000012)  [protect data in transit by way of, yes,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=150.40114285714284)  [encryption. Again, if you want to take a](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=153.38057142857141)  [top secret document out of the building](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=156.09300000000007)  [and deliver it to someone, you might stick](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=158.433)  [it in a locked briefcase or perhaps hire](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=160.65330769230764)  [an armored courier to transport it for](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=163.14309090909094)  [you. As long as the document is outside of](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=165.7146363636365)  [the building, it remains under lock and](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=168.26169230769221)  [key until it gets to its destination.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=170.2848888888889)  [Lastly, we looked at how to perform data](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=172.598)  [backup, replication, and recovery.](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=175.79666666666668)  [Basically, if all else fails and your data](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=177.396)  [does get destroyed, at least it's not gone](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=180.84981818181816)  [forever. You can get it back. All right,](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=183.8372727272727)  [my friends, that's it for this course. If](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=186.4711111111111)  [you have any questions, send me an email](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=188.95223076923077)  [at ben@benpiper. com or use the course](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=191.91407692307695)  [discussion page on the Pluralsight](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=194.83833333333337)  [website. Until next time, I'm Ben Piper, thank you so much for watching!](https://app.pluralsight.com/player?course=architecting-security-aws&author=ben-piper&name=0ba2c2d9-a4c1-4538-b8f2-a832099ab2f1&clip=5&mode=live&start=197.24388888888896)

## Course author

![ben-piper-v1.jpg](c7df7946175222af80e8645591d3a2ea.jpg)
[Ben Piper](https://app.pluralsight.com/profile/author/ben-piper)

Ben Piper is an IT consultant and author of the "AWS Certified Solutions Architect Study Guide: Associate SAA-C01 Exam", "AWS Certified Cloud Practitioner Study Guide: CLF-C01 Exam", and "Learn...